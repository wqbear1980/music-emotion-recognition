# 情绪词库使用指南

## 概述

情绪词库已经集成到音乐分析系统中，用于识别和标准化情绪相关词汇。

## 词库分类

### 1. 情绪词 (52个标准词汇)

#### 中性/平静类 (26个)
包括：中性、平和、平静、平淡、平衡、客观、自然、宁静、安详、稳定、舒缓、安逸、沉稳、平稳、清淡、恬静、柔和、冷静、淡然、放松、温和、舒适、安宁、静谧、平和安详、平静安详

#### 温暖类 (7个)
包括：温暖、亲切、慈爱、关怀、温柔体贴、温馨、暖意

#### 忧郁类 (8个)
包括：忧郁、惆怅、孤独、寂寞、凄楚、哀怨、哀叹、悲凉、凄切

#### 活力类 (6个)
包括：活力、动感、活泼、阳光、朝气蓬勃、生动

#### 欢快类 (7个)
包括：欢快、快乐、兴奋、愉悦、喜悦、开心、欢呼

#### 庄重类 (6个)
包括：庄严、肃穆、恭敬、严肃、庄重、肃然起敬

#### 欢庆类 (6个)
包括：欢庆、喜庆、节日、热烈、欢腾、热闹

#### 哀婉类 (7个)
包括：哀婉、哀愁、哀伤、哀思、悲泣、悲怆、哀而不伤

#### 恐惧类 (7个)
包括：恐惧、畏惧、胆怯、胆寒、恐怖、惊骇、战栗

#### 愤怒类 (6个)
包括：愤怒、愤慨、愤恨、暴怒、怒火、激愤

#### 神秘类 (6个)
包括：神秘、玄幻、奇幻、魔幻、玄妙、奥妙

#### 梦幻类 (5个)
包括：梦幻、幻想、遐想、梦境、虚幻

#### 勇敢类 (6个)
包括：勇敢、无畏、果敢、坚毅、英勇、英勇无畏

#### 坚强类 (6个)
包括：坚强、坚韧、刚毅、顽强、不屈、刚强

#### 怀旧类 (6个)
包括：怀旧、怀念、回忆、追忆、追怀、忆往昔

#### 期待类 (6个)
包括：期待、期望、盼望、期盼、憧憬、向往

#### 灵动类 (5个)
包括：灵动、飘逸、轻盈、灵巧、灵动飘逸

#### 沉醉类 (5个)
包括：沉醉、陶醉、痴迷、沉迷、沉溺

#### 感动类 (5个)
包括：感动、感触、感怀、感人、感人至深

#### 崇高类 (5个)
包括：崇高、高峻、雄浑、高洁、高尚

#### 傲慢类 (5个)
包括：傲慢、高傲、自负、傲气、孤傲

#### 俏皮类 (4个)
包括：俏皮、调皮、活泼可爱、机灵

#### 悠闲类 (5个)
包括：悠闲、闲适、自在、悠然、轻松自在

#### 愉悦类 (5个)
包括：愉悦、舒畅、欢欣、怡然、怡然自得

#### 凄美类 (5个)
包括：凄美、悲惨、悲壮、哀艳、凄艳

#### 壮阔类 (5个)
包括：壮阔、壮美、雄浑、磅礴、苍茫

#### 唯美类 (5个)
包括：唯美、美丽、优美、典雅、精致

#### 幽默类 (5个)
包括：幽默、风趣、诙谐、滑稽、幽默风趣

#### 俏丽类 (4个)
包括：俏丽、秀丽、灵动秀美、娇俏

#### 娇美类 (5个)
包括：娇美、娇媚、妖娆、妩媚、柔媚

#### 其他 (7个)
包括：明快、轻快、轻快愉悦、悲伤、紧张、浪漫、史诗、激昂、悬疑、惊悚、压抑、沉稳、震撼、空灵、酸涩、励志、热血、青涩、甜蜜

**总计：52个标准情绪词汇（含同义词映射共200+词汇）**

## 中性音乐词库

### 1. 情绪词 (26个)
包括：中性、平和、平静、平淡、平衡、客观、自然、宁静、安详、稳定、舒缓、安逸、沉稳、平稳、清淡、恬静、柔和、冷静、淡然、放松、温和、舒适、安宁、静谧等

### 2. 风格词 (32个)
包括：环境音乐、氛围音乐、Ambient、轻古典、轻音乐、轻柔音乐、后摇、电子氛围、氛围电子、缓拍、慢节奏、慢拍、钢琴独奏、钢琴曲、弦乐、弦乐合奏、自然采样、环境音、自然音效、白噪音、粉红噪音、轻柔打击乐、轻快节奏、极简主义、极简风格、简约音乐、疗愈音乐、治愈音乐、放松音乐、冥想音乐、冥想曲、禅意音乐等

### 3. 场景词 (14个)
包括：背景音乐、BGM、学习、工作、冥想、助眠、专注、放松、阅读、休息、疗愈、瑜伽、咖啡厅、商场等

### 4. 特征词 (10个)
包括：节奏缓慢、旋律简单、和谐温和、音量适中、无明显高潮、循环性强、渐进变化、声音纯净、空间感、流动性等

### 5. 乐器词 (6个)
包括：钢琴、弦乐、合成器、长笛、吉他、自然采样等

## 词库统计

### 情绪词库
- 标准词汇：52个
- 同义词映射：200+个

### 中性音乐词库
- 情绪词：26个
- 风格词：32个
- 场景词：14个
- 特征词：10个
- 乐器词：6个
- **总计：88个词汇**

## API 使用

### 1. 获取词库

```bash
curl -X GET http://localhost:5000/api/vocabulary/analyze
```

返回示例：
```json
{
  "success": true,
  "data": {
    "emotions": ["中性", "平和", "平静", ...],
    "styles": ["环境音乐", "氛围音乐", ...],
    "scenarios": ["背景音乐", "BGM", ...],
    "characteristics": ["节奏缓慢", "旋律简单", ...],
    "instruments": ["钢琴", "弦乐", ...]
  },
  "stats": {
    "totalEmotions": 26,
    "totalStyles": 32,
    "totalScenarios": 14,
    "totalCharacteristics": 10,
    "totalInstruments": 6,
    "total": 88
  }
}
```

### 2. 分析文本中的词汇

```bash
curl -X POST -H "Content-Type: application/json" \
  -d '{"text":"这首音乐平和舒缓，适合作为背景音乐，节奏缓慢，旋律简单"}' \
  http://localhost:5000/api/vocabulary/analyze
```

返回示例：
```json
{
  "success": true,
  "data": {
    "text": "这首音乐平和舒缓，适合作为背景音乐，节奏缓慢，旋律简单",
    "extractedTerms": [
      {
        "originalTerm": "这首音乐平和舒缓",
        "standardizedTerm": "这首音乐平和舒缓",
        "category": "scenario",
        "isNeutral": true,
        "confidence": 0.8
      },
      {
        "originalTerm": "适合作为背景音乐",
        "standardizedTerm": "场景氛围",
        "category": "style",
        "isNeutral": true,
        "confidence": 0.8
      },
      ...
    ],
    "count": 4
  }
}
```

### 3. 判断单个词汇是否为中性音乐词汇

```bash
curl -X POST -H "Content-Type: application/json" \
  -d '{"action":"isNeutral","term":"氛围音乐"}' \
  http://localhost:5000/api/vocabulary/analyze
```

返回示例：
```json
{
  "success": true,
  "data": {
    "term": "氛围音乐",
    "isNeutral": true
  }
}
```

### 4. 分析单个词汇

```bash
curl -X POST -H "Content-Type: application/json" \
  -d '{"action":"analyzeTerm","term":"氛围音乐"}' \
  http://localhost:5000/api/vocabulary/analyze
```

返回示例：
```json
{
  "success": true,
  "data": {
    "originalTerm": "氛围音乐",
    "standardizedTerm": "场景氛围",
    "category": "style",
    "isNeutral": true,
    "confidence": 1.0
  }
}
```

### 5. 标准化词汇

```bash
curl -X POST -H "Content-Type: application/json" \
  -d '{"action":"standardize","term":"氛围音乐"}' \
  http://localhost:5000/api/vocabulary/analyze
```

返回示例：
```json
{
  "success": true,
  "data": {
    "original": "氛围音乐",
    "standardized": "场景氛围"
  }
}
```

### 6. 判断音乐是否为中性音乐（基于词汇列表）

```bash
curl -X POST -H "Content-Type: application/json" \
  -d '{"terms":["平和","舒缓","氛围音乐","钢琴独奏"]}' \
  http://localhost:5000/api/vocabulary/analyze
```

返回示例：
```json
{
  "success": true,
  "data": {
    "isNeutral": true,
    "totalTerms": 4,
    "neutralTerms": ["平和", "舒缓", "氛围音乐", "钢琴独奏"],
    "neutralCount": 4,
    "ratio": 1.0
  }
}
```

## 在代码中使用

### 导入工具函数

```typescript
import {
  isNeutralMusicTerm,
  standardizeTerm,
  analyzeVocabulary,
  extractNeutralMusicTerms,
  isNeutralMusic,
  getNeutralMusicVocabulary,
} from '@/lib/vocabularyAnalyzer';
```

### 使用示例

```typescript
// 1. 判断是否为中性音乐词汇
const isNeutral = isNeutralMusicTerm('氛围音乐'); // true

// 2. 标准化词汇
const standardized = standardizeTerm('氛围音乐'); // '场景氛围'

// 3. 分析词汇
const analysis = analyzeVocabulary('氛围音乐');
// {
//   originalTerm: '氛围音乐',
//   standardizedTerm: '场景氛围',
//   category: 'style',
//   isNeutral: true,
//   confidence: 1.0
// }

// 4. 从文本中提取中性音乐词汇
const extracted = extractNeutralMusicTerms('这首音乐平和舒缓，适合作为背景音乐');
// 返回匹配到的词汇列表

// 5. 判断音乐是否为中性音乐
const isNeutral = isNeutralMusic(['平和', '舒缓', '氛围音乐', '钢琴']); // true

// 6. 获取完整词库
const vocabulary = getNeutralMusicVocabulary();
// {
//   emotions: [...],
//   styles: [...],
//   scenarios: [...],
//   characteristics: [...],
//   instruments: [...]
// }
```

## 数据更新

词库已集成到 `src/lib/standardTerms.ts` 中，与现有的音乐分析系统完全兼容。新增的中性音乐词汇会自动同步到数据库。

如需添加新词汇，请更新：
1. `src/lib/standardTerms.ts` - 添加到对应的映射表
2. `src/lib/vocabularyAnalyzer.ts` - 添加到 `NEUTRAL_MUSIC_TERMS` 常量

## 特性

- **自动标准化**：自动将同义词映射到标准术语
- **智能识别**：支持模糊匹配和关键词识别
- **分类清晰**：按情绪、风格、场景、特征、乐器分类
- **高准确度**：基于置信度评分，提高识别准确率
- **易于扩展**：模块化设计，便于添加新词汇

## 注意事项

1. 词库目前包含88个中性音乐相关词汇，后续可根据需要扩展
2. 识别算法基于关键词匹配，对于复杂句子可能需要优化
3. 标准化功能与现有的 `STANDARD_TERMS` 系统完全兼容
4. 在音乐分析时，建议结合多种词汇进行综合判断
