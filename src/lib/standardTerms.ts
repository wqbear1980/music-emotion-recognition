// 音乐分析标准化术语映射表
// 【词库管理混合模式 - 方案C】
// 核心原则：真正同义词映射，近义词独立
//
// 【混合模式规则】
// 1. 近义词独立：每个近义词作为独立的标准词，丰富音乐描述的多样性
//    - 例如："快乐"、"愉悦"、"开心"是独立的标准词，各有细微差别
//    - AI可以根据音乐特征选择最合适的词汇
//
// 2. 真正同义词映射：仅保留意思完全相同、无细微差别的同义词映射
//    - 例如："悲怆" -> "悲壮"（两者表达的核心情感完全相同）
//    - 例如："恢弘" -> "恢弘"（重复映射，避免重复）
//
// 3. 标记策略：
//    - 独立词汇：'词A': '词A'（自映射，表示独立存在）
//    - 同义词映射：'词B': '词A'（词B映射到词A，词A为标准词）
//
// 4. 使用场景：
//    - 近义词独立：日常音乐分析、情绪描述、场景匹配
//    - 同义词映射：专业术语统一、交响乐分析、避免语义重复
//
// 【重要更新】
// - 2024: 从严格映射模式（方案A）升级到混合模式（方案C）
// - 近义词数量从67个增加到139个，丰富描述能力
// - 保留关键同义词映射，确保术语一致性

export const STANDARD_TERMS = {
  // 情绪维度标准化
  mood: {
    mapping: {
      // ========== 中性类音乐：无明显情绪倾向，适合作为背景音乐 ==========
      // 这些都是独立的标准词，允许AI根据音乐特征选择最合适的描述
      '中性': '中性',
      '平和': '平和',
      '平淡': '平淡',
      '平衡': '平衡',
      '客观': '客观',
      '自然': '自然',
      '宁静': '宁静',
      '安详': '安详',
      '稳定': '稳定',
      '舒缓': '舒缓',
      '平静': '平静',
      '安逸': '安逸',
      '沉稳': '沉稳',
      '平稳': '平稳',
      '清淡': '清淡',
      '恬静': '恬静',
      '柔和': '柔和',
      '冷静': '冷静',
      '淡然': '淡然',
      '放松': '放松',
      '温和': '温和',
      '舒适': '舒适',
      '安宁': '安宁',
      '静谧': '静谧',
      '平和安详': '平和安详',
      '平静安详': '平静安详',

      // ========== 欢快/快乐类：独立的情绪词，各有细微差别 ==========
      '欢快': '欢快',
      '快乐': '快乐',
      '愉悦': '愉悦',
      '兴奋': '兴奋',
      '振奋': '振奋',
      '喜悦': '喜悦',
      '开心': '开心',
      '愉快': '愉快',
      '欢乐': '欢乐',
      '欢喜': '欢喜',
      '雀跃': '雀跃',
      '兴高采烈': '兴高采烈',
      '欢呼': '欢呼',
      '明快': '明快',
      '轻快': '轻快',
      '轻扬': '轻扬',
      '轻快愉悦': '轻快愉悦',

      // ========== 悲伤类：独立的情绪词，各有细微差别 ==========
      '悲伤': '悲伤',
      '哀愁': '哀愁',
      '忧郁': '忧郁',
      '悲痛': '悲痛',
      '感伤': '感伤',
      '哀伤': '哀伤',
      '忧愁': '忧愁',
      '悲哀': '悲哀',
      '哀伤痛苦': '哀伤痛苦',
      '凄凉': '凄凉',
      '凄美': '凄美',
      '忧伤': '忧伤',

      // ========== 紧张/焦虑类：独立的情绪词，各有细微差别 ==========
      '紧张': '紧张',
      '焦虑': '焦虑',
      '惊险': '惊险',
      '压迫': '压迫',
      '紧迫': '紧迫',
      '不安': '不安',
      '急促': '急促',
      '急迫': '急迫',
      '惊惶': '惊惶',
      '慌乱': '慌乱',
      '惊慌': '惊慌',

      // ========== 浪漫/温柔类：独立的情绪词，各有细微差别 ==========
      '浪漫': '浪漫',
      '温柔': '温柔',
      '柔情': '柔情',
      '温情': '温情',
      '温馨': '温馨',
      '深情': '深情',
      '缱绻': '缱绻',
      '缱绻温柔': '缱绻温柔',
      '柔情似水': '柔情似水',

      // ========== 史诗/宏大类：独立的情绪词，各有细微差别 ==========
      '史诗': '史诗',
      '宏大': '宏大',
      '壮丽': '壮丽',
      '庄严': '庄严',
      '雄壮': '雄壮',
      '磅礴': '磅礴',
      '壮观': '壮观',
      '雄伟': '雄伟',

      // ========== 激昂/热情类：独立的情绪词，各有细微差别 ==========
      '激昂': '激昂',
      '热情': '热情',
      '激烈': '激烈',
      '激荡': '激荡',
      '激情': '激情',
      '火热': '火热',
      '炽热': '炽热',
      '狂热': '狂热',
      '热情奔放': '热情奔放',

      // ========== 悬疑/神秘类：独立的情绪词，各有细微差别 ==========
      '悬疑': '悬疑',
      '神秘': '神秘',
      '诡异': '诡异',
      '黑暗': '黑暗',
      '诡谲': '诡谲',
      '阴郁': '阴郁',
      '莫测': '莫测',

      // ========== 惊悚/恐惧类：独立的情绪词，各有细微差别 ==========
      '惊悚': '惊悚',
      '压抑': '压抑',
      '阴森': '阴森',
      '震撼': '震撼',
      '空灵': '空灵',
      '惊恐': '惊恐',
      '恐惧': '恐惧',
      '骇然': '骇然',
      '惊栗': '惊栗',
      '沉郁': '沉郁',
      '沉闷': '沉闷',
      '压抑感': '压抑感',

      // ========== 其他细分情绪词 ==========
      '酸涩': '酸涩',
      '励志': '励志',
      '热血': '热血',
      '青涩': '青涩',
      '甜蜜': '甜蜜',

      // 温暖类
      '温暖': '温暖',
      '亲切': '亲切',
      '慈爱': '慈爱',
      '关怀': '关怀',
      '温柔体贴': '温柔体贴',
      '暖意': '暖意',

      // 忧郁类
      '惆怅': '惆怅',
      '孤独': '孤独',
      '寂寞': '寂寞',
      '凄楚': '凄楚',
      '哀怨': '哀怨',
      '哀叹': '哀叹',
      '悲凉': '悲凉',
      '凄切': '凄切',

      // 活力类
      '活力': '活力',
      '动感': '动感',
      '活泼': '活泼',
      '阳光': '阳光',
      '朝气蓬勃': '朝气蓬勃',
      '生动': '生动',
      '充满活力': '充满活力',

      // 庄重类
      '肃穆': '肃穆',
      '恭敬': '恭敬',
      '严肃': '严肃',
      '庄重': '庄重',
      '肃然起敬': '肃然起敬',

      // 欢庆类
      '喜庆': '喜庆',
      '节日': '节日',
      '热烈': '热烈',
      '欢庆': '欢庆',
      '欢腾': '欢腾',
      '热闹': '热闹',
      '欢畅': '欢畅',

      // 哀婉类
      '哀婉': '哀婉',
      '哀思': '哀思',
      '悲泣': '悲泣',
      '哀而不伤': '哀而不伤',

      // 恐惧类
      '畏惧': '畏惧',
      '胆怯': '胆怯',
      '胆寒': '胆寒',
      '恐怖': '恐怖',
      '惊骇': '惊骇',
      '战栗': '战栗',

      // 愤怒类
      '愤怒': '愤怒',
      '愤慨': '愤慨',
      '愤恨': '愤恨',
      '暴怒': '暴怒',
      '怒火': '怒火',
      '激愤': '激愤',

      // 温柔类（补充）
      '柔美': '柔美',
      '柔弱': '柔弱',
      '柔顺': '柔顺',
      '柔曼': '柔曼',
      '轻盈': '轻盈',

      // 神秘类
      '玄幻': '玄幻',
      '奇幻': '奇幻',
      '魔幻': '魔幻',
      '玄妙': '玄妙',
      '奥妙': '奥妙',

      // 奇幻类
      '梦幻': '梦幻',
      '幻想': '幻想',
      '遐想': '遐想',
      '梦境': '梦境',
      '虚幻': '虚幻',

      // 勇敢类
      '勇敢': '勇敢',
      '无畏': '无畏',
      '果敢': '果敢',
      '坚毅': '坚毅',
      '英勇': '英勇',
      '英勇无畏': '英勇无畏',

      // 坚强类
      '坚强': '坚强',
      '坚韧': '坚韧',
      '刚毅': '刚毅',
      '顽强': '顽强',
      '不屈': '不屈',
      '刚强': '刚强',

      // 怀旧类
      '怀旧': '怀旧',
      '怀念': '怀念',
      '回忆': '回忆',
      '追忆': '追忆',
      '追怀': '追怀',
      '忆往昔': '忆往昔',

      // 期待类
      '期待': '期待',
      '期望': '期望',
      '盼望': '盼望',
      '期盼': '期盼',
      '憧憬': '憧憬',
      '向往': '向往',

      // 灵动类
      '灵动': '灵动',
      '飘逸': '飘逸',
      '灵巧': '灵巧',
      '灵动飘逸': '灵动飘逸',

      // 沉稳类
      '稳重': '稳重',
      '稳重踏实': '稳重踏实',
      '沉静': '沉静',

      // 沉醉类
      '沉醉': '沉醉',
      '陶醉': '陶醉',
      '痴迷': '痴迷',
      '沉迷': '沉迷',
      '沉溺': '沉溺',

      // 感动类
      '感动': '感动',
      '感触': '感触',
      '感怀': '感怀',
      '感人': '感人',
      '感人至深': '感人至深',

      // 崇高类
      '崇高': '崇高',
      '高峻': '高峻',
      '雄浑': '雄浑',
      '高洁': '高洁',
      '高尚': '高尚',

      // 傲慢类
      '傲慢': '傲慢',
      '高傲': '高傲',
      '自负': '自负',
      '傲气': '傲气',
      '孤傲': '孤傲',

      // 俏皮类
      '俏皮': '俏皮',
      '调皮': '调皮',
      '活泼可爱': '活泼可爱',
      '机灵': '机灵',

      // 悠闲类
      '悠闲': '悠闲',
      '闲适': '闲适',
      '自在': '自在',
      '悠然': '悠然',
      '轻松自在': '轻松自在',

      // 愉悦类
      '舒畅': '舒畅',
      '欢欣': '欢欣',
      '怡然': '怡然',
      '怡然自得': '怡然自得',

      // 凄美类
      '悲惨': '悲惨',
      '哀艳': '哀艳',
      '凄艳': '凄艳',

      // 壮阔类
      '壮阔': '壮阔',
      '壮美': '壮美',

      // 唯美类
      '唯美': '唯美',
      '美丽': '美丽',
      '优美': '优美',
      '典雅': '典雅',
      '精致': '精致',

      // 幽默类
      '幽默': '幽默',
      '风趣': '风趣',
      '诙谐': '诙谐',
      '滑稽': '滑稽',
      '幽默风趣': '幽默风趣',

      // 俏丽类
      '俏丽': '俏丽',
      '秀丽': '秀丽',
      '灵动秀美': '灵动秀美',
      '娇俏': '娇俏',

      // 娇美类
      '娇美': '娇美',
      '娇媚': '娇媚',
      '妖娆': '妖娆',
      '妩媚': '妩媚',
      '柔媚': '柔媚',

      // ========== 交响乐专用情绪词（保留真正同义词映射） ==========
      // 【混合模式说明】以下为真正同义词映射，意思完全相同，无细微差别

      // 悲壮苍凉类
      '悲壮': '悲壮',
      '苍凉': '苍凉',
      '凛然': '凛然',
      '悲怆': '悲壮',  // 【真正同义词】悲怆和悲壮表达的核心情感完全相同，映射到"悲壮"
      '悲愤': '悲愤',
      '悲壮豪迈': '悲壮豪迈',
      '悲壮苍凉': '悲壮苍凉',
      '苍茫悲壮': '苍茫悲壮',

      // 恢弘壮丽类
      '恢弘': '恢弘',
      '绚丽': '绚丽',
      '辉煌': '辉煌',
      '华彩': '华彩',
      '壮丽恢弘': '恢弘',    // 【真正同义词】与"恢弘"意思完全相同
      '辉煌灿烂': '辉煌',   // 【真正同义词】与"辉煌"意思完全相同
      '华彩乐章': '华彩',   // 【真正同义词】与"华彩"意思完全相同
      '绚丽多彩': '绚丽',   // 【真正同义词】与"绚丽"意思完全相同

      // 戏剧性类
      '戏剧性': '戏剧性',
      '戏剧张力': '戏剧张力',
      '戏剧冲突': '戏剧冲突',
      '戏剧性张力': '戏剧性',

      // 英雄史诗类
      '英雄气概': '英雄气概',
      '民族史诗': '民族史诗',
      '史诗感': '史诗感',
      '史诗般': '史诗般',
      '英雄史诗': '英雄史诗',

      // 神圣崇高类
      '神圣': '神圣',
      '圣洁': '圣洁',
      '庄严肃穆': '庄严肃穆',
      '庄严神圣': '庄严神圣',
      '肃穆崇高': '肃穆崇高',

      // 细腻内省类
      '内省': '内省',
      '沉思': '沉思',
      '哲理性': '哲理性',
      '哲思': '哲思',
      '内心独白': '内心独白',
      '深沉内省': '深沉内省',

      // 叙事画面类
      '叙事性': '叙事性',
      '画面感': '画面感',
      '史诗叙事': '史诗叙事',
      '叙事史诗': '叙事史诗',
      '电影叙事感': '电影叙事感',

    },
    // 扩展的标准词列表，包含所有独立词汇
    standardList: [
      // 中性类
      '中性', '平和', '平淡', '平衡', '客观', '自然', '宁静', '安详',
      '稳定', '舒缓', '平静', '安逸', '沉稳', '平稳', '清淡', '恬静',
      '柔和', '冷静', '淡然', '放松', '温和', '舒适', '安宁', '静谧',

      // 欢快/快乐类
      '欢快', '快乐', '愉悦', '兴奋', '振奋', '喜悦', '开心', '欢呼',
      '明快', '轻快', '轻快愉悦', '愉快', '欢乐', '欢喜', '雀跃',

      // 悲伤类
      '悲伤', '哀愁', '忧郁', '悲痛', '感伤', '哀伤', '忧愁', '悲哀',
      '凄凉', '凄美', '忧伤',

      // 紧张/焦虑类
      '紧张', '焦虑', '惊险', '压迫', '紧迫', '不安', '急促', '急迫',
      '惊惶', '慌乱', '惊慌',

      // 浪漫/温柔类
      '浪漫', '温柔', '柔情', '温情', '温馨', '深情', '缱绻',

      // 史诗/宏大类
      '史诗', '宏大', '壮丽', '庄严', '雄壮', '磅礴', '壮观', '雄伟',

      // 激昂/热情类
      '激昂', '热情', '激烈', '激荡', '激情', '火热', '炽热', '狂热',

      // 悬疑/神秘类
      '悬疑', '神秘', '诡异', '黑暗', '诡谲', '阴郁', '莫测',

      // 惊悚/恐惧类
      '惊悚', '压抑', '阴森', '震撼', '空灵', '惊恐', '恐惧',

      // 其他细分情绪
      '酸涩', '励志', '热血', '青涩', '甜蜜', '温暖', '忧郁', '活力',
      '肃穆', '欢庆', '哀婉', '愤怒', '柔美', '玄幻', '梦幻', '勇敢',
      '坚强', '怀旧', '期待', '灵动', '稳重', '沉醉', '感动', '崇高',
      '傲慢', '俏皮', '悠闲', '舒畅', '凄美', '壮阔', '唯美', '幽默',
      '俏丽', '娇美', '悲壮', '恢弘', '戏剧性', '英雄气概', '神圣', '内省', '叙事性',
    ],
  },

  // 音乐风格标准化
  // 【风格分类规则】
  // 第一类：明确的、传统的音乐风格（单独作为正式风格）
  // 第二类：带场景/氛围描述的风格（归到"场景氛围"分类）
  style: {
    // 第一类：明确的传统风格（单独作为正式风格）
    traditionalMapping: {
      '古典': '古典',
      '古典音乐': '古典',
      '管弦乐': '古典',
      '交响乐': '古典',
      '巴洛克': '古典',

      '流行': '流行',
      '流行音乐': '流行',
      '流行曲': '流行',
      'Pop': '流行',
      '流行乐': '流行',

      '电子': '电子',
      '电子音乐': '电子',
      '电子乐': '电子',
      'EDM': '电子',
      '电音': '电子',

      '摇滚': '摇滚',
      '摇滚音乐': '摇滚',
      'Rock': '摇滚',
      '摇滚乐': '摇滚',

      '爵士': '爵士',
      '爵士音乐': '爵士',
      '爵士乐': '爵士',
      'Jazz': '爵士',

      '民谣': '民谣',
      '民谣音乐': '民谣',
      '民谣乐': '民谣',
      'Folk': '民谣',

      '嘻哈': '嘻哈',
      'Hip-Hop': '嘻哈',
      '说唱': '嘻哈',
      'Rap': '嘻哈',

      'R&B': 'R&B',
      '节奏布鲁斯': 'R&B',
      '蓝调': 'R&B',

      '金属': '金属',
      '重金属': '金属',
      'Metal': '金属',

      '新世纪': '新世纪',
      'New Age': '新世纪',
      '新世纪音乐': '新世纪',

      '乡村': '乡村',
      'Country': '乡村',
      '乡村音乐': '乡村',

      '雷鬼': '雷鬼',
      'Reggae': '雷鬼',
      '雷鬼音乐': '雷鬼',
    },

    // 第二类：场景/氛围风格（归到"场景氛围"分类）
    atmosphericMapping: {
      '氛围音乐': '场景氛围',
      '环境音乐': '场景氛围',
      'Ambient': '场景氛围',

      '史诗氛围': '场景氛围',
      '史诗感音乐': '场景氛围',
      '史诗风格': '场景氛围',

      '电影氛围': '场景氛围',
      '电影感音乐': '场景氛围',
      '电影风格': '场景氛围',

      '励志流行': '场景氛围',
      '励志音乐': '场景氛围',
      '正能量音乐': '场景氛围',

      '疗愈音乐': '场景氛围',
      '治愈音乐': '场景氛围',
      '放松音乐': '场景氛围',

      '冥想音乐': '场景氛围',
      '冥想曲': '场景氛围',
      '禅意音乐': '场景氛围',

      // 中性音乐风格（舒缓、背景、环境）
      '轻古典': '场景氛围',
      '轻音乐': '场景氛围',
      '轻柔音乐': '场景氛围',

      '后摇': '场景氛围',
      '电子氛围': '场景氛围',
      '氛围电子': '场景氛围',

      '缓拍': '场景氛围',
      '慢节奏': '场景氛围',
      '慢拍': '场景氛围',

      '钢琴独奏': '场景氛围',
      '钢琴曲': '场景氛围',

      '弦乐': '场景氛围',
      '弦乐合奏': '场景氛围',

      '自然采样': '场景氛围',
      '环境音': '场景氛围',
      '自然音效': '场景氛围',

      '白噪音': '场景氛围',
      '粉红噪音': '场景氛围',

      '轻柔打击乐': '场景氛围',
      '轻快节奏': '场景氛围',

      '极简主义': '场景氛围',
      '极简风格': '场景氛围',
      '简约音乐': '场景氛围',

      '背景音乐': '场景氛围',
      'BGM': '场景氛围',
      '配乐': '场景氛围',

      '电影原声': '场景氛围',
      '原声带': '场景氛围',
      'OST': '场景氛围',

      '青春向': '场景氛围',
      '青春风格': '场景氛围',
      '青春氛围': '场景氛围',
      '活力向': '场景氛围',
      '活力风格': '场景氛围',
      '活力氛围': '场景氛围',

      // 【新增风格词】描述性标签扩展（场景/氛围风格）
      '氛围感': '场景氛围',
      '情境音乐': '场景氛围',
      '情境乐': '场景氛围',
      '意境音乐': '场景氛围',
      '意境乐': '场景氛围',
      '情景音乐': '场景氛围',
      '情景乐': '场景氛围',

      '情感氛围': '场景氛围',
      '情感背景': '场景氛围',
      '情感BGM': '场景氛围',

      '叙事氛围': '场景氛围',
      '叙事音乐': '场景氛围',
      '叙事BGM': '场景氛围',

      '戏剧氛围': '场景氛围',
      '戏剧音乐': '场景氛围',
      '戏剧配乐': '场景氛围',

      '情感叙事': '场景氛围',
      '叙事情感': '场景氛围',

      '电影感': '场景氛围',
      '电影质感': '场景氛围',
      '电影氛围感': '场景氛围',

      '沉浸感': '场景氛围',
      '沉浸氛围': '场景氛围',
      '沉浸音乐': '场景氛围',

      '情绪氛围': '场景氛围',
      '情绪背景': '场景氛围',
      '情绪BGM': '场景氛围',

      '氛围营造': '场景氛围',
      '氛围构建': '场景氛围',

      '场景音乐': '场景氛围',
      '场景配乐': '场景氛围',

      '画面氛围': '场景氛围',
      '画面感': '场景氛围',

      '情感氛围音乐': '场景氛围',
      '场景氛围音乐': '场景氛围',

      '戏剧性氛围': '场景氛围',
      '电影戏剧氛围': '场景氛围',

      '沉浸式氛围': '场景氛围',
      '沉浸式音乐': '场景氛围',

      '情感渲染': '场景氛围',
      '氛围渲染': '场景氛围',
    },

    // 传统风格标准列表
    traditionalList: ['古典', '流行', '电子', '摇滚', '爵士', '民谣', '嘻哈', 'R&B', '金属', '新世纪', '乡村', '雷鬼'],

    // 场景/氛围风格标准列表（统一为"场景氛围"）
    atmosphericList: ['场景氛围'],

    // 完整的映射表（用于兼容现有代码）
    get mapping() {
      return {
        ...this.traditionalMapping,
        ...this.atmosphericMapping,
      };
    },

    // 完整的标准列表（用于兼容现有代码）
    get standardList() {
      return [...this.traditionalList, ...this.atmosphericList];
    },

    // 判断是否为传统风格
    isTraditional(style: string): boolean {
      const standardStyle = this.standardize(style);
      return this.traditionalList.includes(standardStyle);
    },

    // 判断是否为场景/氛围风格
    isAtmospheric(style: string): boolean {
      const standardStyle = this.standardize(style);
      return this.atmosphericList.includes(standardStyle);
    },

    // 标准化风格词
    standardize(style: string): string {
      // 先尝试传统风格映射
      for (const [key, value] of Object.entries(this.traditionalMapping)) {
        if (style.includes(key) || key.includes(style)) {
          return value;
        }
      }

      // 再尝试场景/氛围风格映射
      for (const [key, value] of Object.entries(this.atmosphericMapping)) {
        if (style.includes(key) || key.includes(style)) {
          return value;
        }
      }

      // 如果没有匹配，返回原词
      return style;
    },
  },

  // 乐器名称标准化
  instruments: {
    mapping: {
      // 主奏乐器
      '钢琴': '钢琴',
      'Piano': '钢琴',
      '电钢琴': '钢琴',
      '电子钢琴': '钢琴',

      '吉他': '吉他',
      'Guitar': '吉他',
      '木吉他': '吉他',
      '钢弦吉他': '吉他',

      '电吉他': '电吉他',
      'Electric Guitar': '电吉他',

      '小提琴': '小提琴',
      'Violin': '小提琴',

      '大提琴': '大提琴',
      'Cello': '大提琴',

      '萨克斯': '萨克斯',
      'Saxophone': '萨克斯',
      'Sax': '萨克斯',

      '长笛': '长笛',
      'Flute': '长笛',

      '单簧管': '单簧管',
      'Clarinet': '单簧管',

      '小号': '小号',
      'Trumpet': '小号',

      '合成器': '合成器',
      'Synthesizer': '合成器',
      'Synth': '合成器',
      '电子合成器': '合成器',

      '人声': '人声',
      'Vocal': '人声',
      '歌唱': '人声',
      '演唱': '人声',

      // 打击乐器
      '鼓': '鼓',
      'Drums': '鼓',
      '架子鼓': '鼓',
      '爵士鼓': '鼓',

      '贝斯': '贝斯',
      'Bass': '贝斯',
      '低音吉他': '贝斯',
      '电贝斯': '贝斯',

      '电子鼓': '电子鼓',
      'Electronic Drums': '电子鼓',

      '镲片': '镲片',
      'Cymbal': '镲片',

      // 伴奏乐器（贝斯已在打击乐器中定义）
      '低音提琴': '贝斯',
      'Double Bass': '贝斯',

      '键盘': '键盘',
      'Keyboard': '键盘',
      '电键盘': '键盘',

      '管风琴': '管风琴',
      'Organ': '管风琴',

      '电子琴': '电子琴',
      'Electronic Organ': '电子琴',
      'Digital Piano': '电子琴',

      // 弦乐器
      '弦乐': '弦乐',
      'String': '弦乐',
      'Strings': '弦乐',
      '弦乐组': '弦乐',

      '中提琴': '中提琴',
      'Viola': '中提琴',

      '竖琴': '竖琴',
      'Harp': '竖琴',

      // 管乐器
      '长号': '长号',
      'Trombone': '长号',

      '圆号': '圆号',
      'French Horn': '圆号',

      '双簧管': '双簧管',
      'Oboe': '双簧管',

      '巴松管': '巴松管',
      'Bassoon': '巴松管',

      // 打击乐器（补充）
      'hi-hat': '镲片',
      'Hi-Hat': '镲片',
      '踩镲': '镲片',

      '军鼓': '鼓',
      'Snare Drum': '鼓',

      '底鼓': '鼓',
      'Kick Drum': '鼓',
      'Bass Drum': '鼓',

      '通鼓': '鼓',
      'Tom': '鼓',
      'Tom Drum': '鼓',

      '定音鼓': '鼓',
      'Timpani': '鼓',

      '钹': '镲片',
      'Cymbals': '镲片',

      '三角铁': '三角铁',
      'Triangle': '三角铁',

      '木鱼': '木鱼',
      'Wood Block': '木鱼',

      // 吉他类（补充）
      '民谣吉他': '吉他',
      'Folk Guitar': '吉他',

      '古典吉他': '吉他',
      'Classical Guitar': '吉他',

      // 键盘乐器（补充）
      '手风琴': '手风琴',
      'Accordion': '手风琴',

      // 电子乐器（补充）
      'MIDI键盘': '键盘',
      'MIDI': '键盘',

      // 人声（补充）
      '合唱': '人声',
      'Chorus': '人声',

      '独唱': '人声',
      'Solo': '人声',

      '和声': '人声',
      'Harmony': '人声',
    },
    standardList: [
      '钢琴', '吉他', '电吉他', '小提琴', '大提琴', '萨克斯', '长笛', '单簧管',
      '小号', '合成器', '人声', '鼓', '贝斯', '电子鼓', '镲片', '键盘', '管风琴', '电子琴',
      // 新增乐器
      '弦乐', '中提琴', '竖琴', '长号', '圆号', '双簧管', '巴松管', '手风琴', '三角铁', '木鱼'
    ],
  },

  // 影视类型标准化
  filmGenres: {
    mapping: {
      // 原有12种类型
      '动作片': '动作片',
      'Action': '动作片',
      '动作电影': '动作片',
      '动作剧': '动作片',
      '武打片': '动作片',

      '爱情片': '爱情片',
      'Romance': '爱情片',
      '爱情电影': '爱情片',
      '爱情剧': '爱情片',
      '恋爱剧': '爱情片',
      '都市爱情': '爱情片',
      '青春爱情': '爱情片',

      '科幻片': '科幻片',
      'Sci-Fi': '科幻片',
      '科幻电影': '科幻片',
      '科幻剧': '科幻片',

      '恐怖片': '恐怖片',
      'Horror': '恐怖片',
      '恐怖电影': '恐怖片',
      '恐怖剧': '恐怖片',
      '惊悚片': '恐怖片',

      '悬疑片': '悬疑片',
      'Thriller': '悬疑片',
      '悬疑电影': '悬疑片',
      '悬疑剧': '悬疑片',
      '推理剧': '悬疑片',

      '喜剧片': '喜剧片',
      'Comedy': '喜剧片',
      '喜剧电影': '喜剧片',
      '喜剧剧': '喜剧片',
      '搞笑片': '喜剧片',

      '剧情片': '剧情片',
      'Drama': '剧情片',
      '剧情电影': '剧情片',

      '纪录片': '纪录片',
      'Documentary': '纪录片',
      '纪录片电影': '纪录片',

      '动画片': '动画片',
      'Animation': '动画片',
      '动画电影': '动画片',

      '冒险片': '冒险片',
      'Adventure': '冒险片',
      '冒险电影': '冒险片',

      '奇幻片': '奇幻片',
      'Fantasy': '奇幻片',
      '奇幻电影': '奇幻片',

      '战争片': '战争片',
      'War': '战争片',
      '战争电影': '战争片',
      '战争剧': '战争片',
      '抗战片': '战争片',

      // 补充filmTypes中的类型
      '职场剧': '职场剧',
      '职场题材': '职场剧',
      '职业剧': '职场剧',
      '行业剧': '职场剧',

      '魔幻片': '魔幻片',
      '玄幻片': '魔幻片',

      '古装剧': '古装剧',
      '古装电影': '古装剧',
      '古代剧': '古装剧',

      '神话剧': '神话剧',
      '仙侠剧': '神话剧',

      '侦探剧': '推理剧',
      '破案剧': '推理剧',

      '励志片': '励志片',
      '正能量片': '励志片',
      '奋斗片': '励志片',

      '歌舞片': '歌舞片',
      '音乐歌舞片': '歌舞片',

      '校园剧': '校园剧',
      '校园题材': '校园剧',
      '青春剧': '校园剧',
      '青春校园': '校园剧',

      '灾难片': '灾难片',
      '灾难题材片': '灾难片',

      '传记片': '传记片',
      '人物传记片': '传记片',
      '人物传记': '传记片',
      '人物纪实片': '传记片',

      '动漫': '动漫',
      '卡通片': '动漫',

      '超级英雄题材': '超级英雄题材',
      '超级英雄电影': '超级英雄题材',
      '英雄题材': '超级英雄题材',

      '西部题材': '西部题材',
      '西部电影': '西部题材',
      '西部片': '西部题材',

      '太空歌剧题材': '太空歌剧题材',
      '太空片': '太空歌剧题材',

      '狗血伦理题材': '狗血伦理题材',
      '伦理剧': '狗血伦理题材',
      '家庭伦理': '狗血伦理题材',

      '治愈系田园题材': '治愈系田园题材',
      '田园剧': '治愈系田园题材',

      '僵尸/丧尸题材': '僵尸/丧尸题材',
      '丧尸片': '僵尸/丧尸题材',
      '僵尸片': '僵尸/丧尸题材',

      '校园霸凌题材': '校园霸凌题材',
      '霸凌剧': '校园霸凌题材',

      '奇幻治愈题材': '奇幻治愈题材',

      '印度歌舞题材': '印度歌舞题材',
      '宝莱坞': '印度歌舞题材',

      '印度家庭伦理题材': '印度家庭伦理题材',

      '医护题材': '医护题材',
      '医疗剧': '医护题材',
      '医生剧': '医护题材',

      '律师题材': '律师题材',
      '律师剧': '律师题材',

      '复仇题材': '复仇题材',
      '复仇剧': '复仇题材',
      '复仇片': '复仇题材',

      '家庭题材': '家庭题材',
      '家庭剧': '家庭题材',

      '美食题材': '美食题材',
      '美食剧': '美食题材',

      '吸血鬼/狼人题材': '吸血鬼/狼人题材',
      '吸血鬼片': '吸血鬼/狼人题材',

      '校园青春竞技题材': '校园青春竞技题材',
      '青春竞技': '校园青春竞技题材',

      '社会派批判题材': '社会派批判题材',

      '奇幻冒险题材': '奇幻冒险题材',

      '老年题材': '老年题材',
      '老年剧': '老年题材',

      '主旋律题材': '主旋律题材',
      '主旋律电影': '主旋律题材',

      '红色题材': '红色题材',
      '革命片': '红色题材',

      '偶像剧': '偶像剧',
      '偶像电影': '偶像剧',

      '体育题材': '体育题材',
      '体育电影': '体育题材',

      '武侠剧': '武侠剧',
      '武侠电影': '武侠剧',
      '功夫片': '武侠剧',

      '黑帮剧': '黑帮剧',
      '黑帮电影': '黑帮剧',

      '都市剧': '都市剧',
      '都市电影': '都市剧',
      '都市题材': '都市剧',

      '政治题材': '政治题材',
      '政治电影': '政治题材',
      '权谋剧': '政治题材',

      // 【新增】12种影片类型扩展
      '黑色电影': '黑色电影',
      'Film Noir': '黑色电影',
      '黑色片': '黑色电影',

      '公路电影': '公路电影',
      'Road Movie': '公路电影',
      '公路片': '公路电影',
      '公路题材': '公路电影',

      '音乐剧': '音乐剧',
      'Musical': '音乐剧',
      '舞台剧电影': '音乐剧',

      '历史剧': '历史剧',
      'Historical Drama': '历史剧',
      '历史电影': '历史剧',
      '历史题材': '历史剧',

      '宗教片': '宗教片',
      'Religious Film': '宗教片',
      '宗教题材': '宗教片',
      '宗教电影': '宗教片',

      '实验电影': '实验电影',
      'Experimental Film': '实验电影',
      '先锋电影': '实验电影',
      '实验片': '实验电影',

      '短片': '短片',
      'Short Film': '短片',
      '微电影': '短片',

      '文艺片': '文艺片',
      'Art Film': '文艺片',
      '艺术电影': '文艺片',
      '文艺电影': '文艺片',

      '自然纪录片': '自然纪录片',
      'Nature Documentary': '自然纪录片',
      '自然片': '自然纪录片',
      '野生动物纪录片': '自然纪录片',

      '犯罪片': '犯罪片',
      'Crime': '犯罪片',
      '犯罪电影': '犯罪片',
      '犯罪剧': '犯罪片',

      // 【新增】喜剧细分类型
      '浪漫喜剧': '浪漫喜剧',
      'Romantic Comedy': '浪漫喜剧',

      '动作喜剧': '动作喜剧',
      'Action Comedy': '动作喜剧',

      '黑色喜剧': '黑色喜剧',
      'Black Comedy': '黑色喜剧',

      '讽刺喜剧': '讽刺喜剧',
      'Satire': '讽刺喜剧',

      '无厘头喜剧': '无厘头喜剧',
      'Slapstick': '无厘头喜剧',
    },
    standardList: [
      '动作片', '爱情片', '科幻片', '恐怖片', '悬疑片', '喜剧片',
      '剧情片', '纪录片', '动画片', '冒险片', '奇幻片', '战争片',
      '职场剧', '魔幻片', '古装剧', '神话剧', '推理剧', '励志片',
      '歌舞片', '校园剧', '灾难片', '传记片', '动漫',
      // 【新增】11种影片类型扩展（传记片已更新）
      '黑色电影', '公路电影', '音乐剧', '历史剧',
      '宗教片', '实验电影', '短片', '文艺片', '自然纪录片', '犯罪片',
      // 【新增】喜剧细分类型
      '浪漫喜剧', '动作喜剧', '黑色喜剧', '讽刺喜剧', '无厘头喜剧'
    ],
  },

  // 音乐时期标准化
  era: {
    mapping: {
      '古典主义': '古典主义',
      '浪漫主义': '浪漫主义',
      '现代': '现代',
      '现代主义': '现代',
      '当代': '当代',
      '当代音乐': '当代',
      '巴洛克': '巴洛克',
      '文艺复兴': '文艺复兴',
      '印象派': '印象派',
      '20世纪': '现代',
      '21世纪': '当代',
    },
    standardList: ['巴洛克', '古典主义', '浪漫主义', '印象派', '现代', '当代'],
  },

  // 场景类型标准化
  sceneTypes: {
    mapping: {
      '动作场景': '动作场景',
      'Action Scene': '动作场景',
      '战斗场景': '战斗场景',
      '打斗': '动作场景',

      '爱情场景': '爱情场景',
      'Romance Scene': '爱情场景',
      '恋爱': '爱情场景',

      '悬疑场景': '悬疑场景',
      'Suspense Scene': '悬疑场景',
      '揭秘': '悬疑场景',

      '高潮场景': '高潮场景',
      'Climax': '高潮场景',
      '高潮': '高潮场景',

      '抒情场景': '抒情场景',
      'Emotional Scene': '抒情场景',
      '情感': '抒情场景',

      '追逐场景': '追逐场景',
      'Chase Scene': '追逐场景',
      '逃亡': '追逐场景',

      '开场场景': '开场场景',
      'Opening': '开场场景',
      '开始': '开场场景',

      '片尾场景': '片尾场景',
      'Ending': '片尾场景',
      '结尾': '片尾场景',

      '战争场景': '战斗场景',
      'Battle Scene': '战斗场景',
      '战争': '战斗场景',
    },
    standardList: [
      '动作场景', '爱情场景', '悬疑场景', '高潮场景',
      '抒情场景', '追逐场景', '开场场景', '片尾场景', '战斗场景'
    ],
  },

  // 影片类型标准化（自动识别唯一依据）
  filmTypes: {
    // 一级标准影片类型及其细分题材
    standardTypes: [
      {
        type: '恐怖片',
        subGenres: [] as string[],
        forbidden: ['惊悚片', '恐怖电影']
      },
      {
        type: '职场剧',
        subGenres: ['医护题材', '警察题材', '律政题材', '美食题材'],
        forbidden: ['职业剧', '行业剧', '医疗题材', '医生题材']
      },
      {
        type: '魔幻片',
        subGenres: [] as string[],
        forbidden: ['奇幻片', '玄幻片']
      },
      {
        type: '古装剧',
        subGenres: [] as string[],
        forbidden: ['古代剧', '古装大戏']
      },
      {
        type: '神话剧',
        subGenres: [] as string[],
        forbidden: ['仙侠剧', '神话故事片']
      },
      {
        type: '推理剧',
        subGenres: [] as string[],
        forbidden: ['侦探剧', '破案剧']
      },
      {
        type: '励志片',
        subGenres: [] as string[],
        forbidden: ['正能量片', '奋斗片']
      },
      {
        type: '歌舞片',
        subGenres: [] as string[],
        forbidden: ['音乐歌舞片', '歌舞电影']
      },
      {
        type: '校园剧',
        subGenres: [] as string[],
        forbidden: ['青春剧', '校园青春片']
      },
      {
        type: '灾难片',
        subGenres: [] as string[],
        forbidden: ['灾难题材片', '灾难电影']
      },
      {
        type: '战争片',
        subGenres: [] as string[],
        forbidden: ['抗战片', '战争题材剧']
      },
      {
        type: '动漫',
        subGenres: [] as string[],
        forbidden: ['动画片', '卡通片']
      },
      // 【新增影视类型】来自影视场景词库（9个）
      {
        type: '超级英雄题材',
        subGenres: ['漫威/DC宇宙', '反英雄', '英雄成长'],
        forbidden: ['超级英雄电影', '英雄题材']
      },
      {
        type: '西部题材',
        subGenres: ['经典西部', '西部复仇', '西部开拓'],
        forbidden: ['西部电影', '西部片']
      },
      {
        type: '太空歌剧题材',
        subGenres: ['星际争霸', '太空殖民', '星际文明'],
        forbidden: ['太空片', '科幻太空']
      },
      {
        type: '狗血伦理题材',
        subGenres: ['豪门恩怨', '婚外情', '家族斗争'],
        forbidden: ['伦理剧', '家庭伦理']
      },
      {
        type: '治愈系田园题材',
        subGenres: ['乡村归隐', '农场治愈', '慢生活'],
        forbidden: ['田园剧', '治愈剧']
      },
      {
        type: '僵尸/丧尸题材',
        subGenres: ['丧尸围城', '病毒扩散', '末世求生'],
        forbidden: ['丧尸片', '僵尸片']
      },
      {
        type: '校园霸凌题材',
        subGenres: ['霸凌反抗', '旁观者觉醒', '师生介入'],
        forbidden: ['霸凌剧', '校园暴力']
      },
      {
        type: '奇幻治愈题材',
        subGenres: ['妖怪共生', '时光奇幻', '日常奇幻'],
        forbidden: ['奇幻治愈', '日常奇幻剧']
      },
      {
        type: '印度歌舞题材',
        subGenres: ['爱情歌舞', '复仇歌舞', '社会议题歌舞'],
        forbidden: ['印度歌舞', '宝莱坞']
      },
      {
        type: '印度家庭伦理题材',
        subGenres: ['跨国婚姻', '代际冲突', '女性觉醒'],
        forbidden: ['印度家庭剧', '印地家庭伦理']
      },
      {
        type: '动作片',
        subGenres: ['现代动作', '武侠动作', '警匪动作', '军事动作'],
        forbidden: ['动作电影', '武打片']
      },
      {
        type: '悬疑片',
        subGenres: ['心理悬疑', '犯罪悬疑', '密室悬疑', '谍战悬疑'],
        forbidden: ['悬疑电影', '推理片']
      },
      {
        type: '爱情片',
        subGenres: ['青春爱情', '都市爱情', '年代爱情', '奇幻爱情'],
        forbidden: ['爱情电影', '恋爱剧']
      },
      {
        type: '医护题材',
        subGenres: ['医院职场', '急诊救援', '医患关系', '医疗科研'],
        forbidden: ['医疗剧', '医生剧']
      },
      {
        type: '律师题材',
        subGenres: ['刑事辩护', '民事纠纷', '律政职场', '司法公正'],
        forbidden: ['律师剧', '律政剧']
      },
      {
        type: '复仇题材',
        subGenres: ['快意复仇', '隐忍复仇', '复仇救赎', '暗黑复仇'],
        forbidden: ['复仇剧', '复仇片']
      },
      {
        type: '家庭题材',
        subGenres: ['家庭温情', '家庭矛盾', '代际沟通', '家庭成长'],
        forbidden: ['家庭剧', '家庭伦理剧']
      },
      {
        type: '美食题材',
        subGenres: ['美食治愈', '美食创业', '美食竞技', '美食寻根'],
        forbidden: ['美食剧', '烹饪剧']
      },
      {
        type: '吸血鬼/狼人题材',
        subGenres: ['吸血鬼爱情', '种族斗争', '永生困境'],
        forbidden: ['吸血鬼片', '狼人片']
      },
      {
        type: '校园青春竞技题材',
        subGenres: ['篮球/棒球/排球竞技', '社团成长', '青春热血'],
        forbidden: ['青春竞技', '校园体育']
      },
      {
        type: '社会派批判题材',
        subGenres: ['阶级差异', '性别平等', '职场歧视'],
        forbidden: ['社会批判', '现实题材']
      },
      {
        type: '奇幻冒险题材',
        subGenres: ['寻宝探险', '秘境生存', '神话传说'],
        forbidden: ['冒险片', '奇幻探险']
      },
      {
        type: '老年题材',
        subGenres: ['老年爱情', '退休生活', '代际和解'],
        forbidden: ['老年剧', '退休题材']
      },
      // 【新增影视类型】主旋律&红色题材+偶像剧&体育题材（4个）
      {
        type: '主旋律题材',
        subGenres: ['红色革命', '家国情怀', '时代楷模', '脱贫攻坚', '科技强国'],
        forbidden: ['主旋律电影', '爱国题材']
      },
      {
        type: '红色题材',
        subGenres: ['革命战争', '先烈事迹', '红色传承', '地下谍战'],
        forbidden: ['革命片', '历史革命']
      },
      {
        type: '偶像剧',
        subGenres: ['都市甜宠', '青春校园', '职场偶像', '奇幻偶像'],
        forbidden: ['浪漫爱情', '青春片']
      },
      {
        type: '体育题材',
        subGenres: ['职业体育竞技', '奥运备战', '草根体育逆袭', '校园体育社团'],
        forbidden: ['体育电影', '运动题材']
      },
      // 【新增影视类型】四大题材（武侠剧、黑帮剧、都市剧、政治题材）（4个）
      {
        type: '武侠剧',
        subGenres: ['传统武侠', '新派武侠', '江湖权谋', '仙侠武侠'],
        forbidden: ['武侠电影', '功夫片', '武打片']
      },
      {
        type: '黑帮剧',
        subGenres: ['江湖道义', '黑帮争斗', '卧底潜伏', '扫黑除恶'],
        forbidden: ['黑帮电影', '警匪片', '黑道片']
      },
      {
        type: '都市剧',
        subGenres: ['职场奋斗', '都市情感', '家庭伦理', '悬疑刑侦'],
        forbidden: ['都市电影', '都市题材', '现代都市']
      },
      {
        type: '政治题材',
        subGenres: ['历史权谋', '现代官场', '国际政治', '反腐风暴'],
        forbidden: ['政治电影', '权谋剧', '政治剧']
      },
      // 【新增】12种影片类型扩展
      {
        type: '黑色电影',
        subGenres: ['经典黑色', '新黑色', '黑色悬疑', '黑色犯罪'],
        forbidden: ['黑色片', 'film noir']
      },
      {
        type: '公路电影',
        subGenres: ['自我救赎', '友情公路', '家庭公路', '逃亡公路'],
        forbidden: ['公路片', 'road movie']
      },
      {
        type: '音乐剧',
        subGenres: ['舞台音乐剧', '电影音乐剧', '流行音乐剧', '古典音乐剧'],
        forbidden: ['musical', '歌舞剧电影']
      },
      {
        type: '历史剧',
        subGenres: ['古代历史', '近代历史', '历史战争', '历史传记'],
        forbidden: ['历史电影', '历史题材']
      },
      {
        type: '传记片',
        subGenres: ['名人传记', '艺术家传记', '运动员传记', '普通人物传记'],
        forbidden: ['人物传记', 'biography']
      },
      {
        type: '宗教片',
        subGenres: ['基督教题材', '佛教题材', '其他宗教题材', '宗教历史'],
        forbidden: ['宗教电影', 'religious film']
      },
      {
        type: '实验电影',
        subGenres: ['先锋实验', '视觉实验', '叙事实验', '概念实验'],
        forbidden: ['先锋电影', '实验片']
      },
      {
        type: '短片',
        subGenres: ['短片剧情', '短片动画', '短片纪录片', '微电影'],
        forbidden: ['short film', '微电影']
      },
      {
        type: '文艺片',
        subGenres: ['文艺剧情', '独立制片', '艺术探索', '文艺爱情'],
        forbidden: ['艺术电影', 'art film']
      },
      {
        type: '自然纪录片',
        subGenres: ['野生动物', '自然风光', '生态环保', '海洋生物'],
        forbidden: ['自然片', 'nature documentary']
      },
      {
        type: '犯罪片',
        subGenres: ['犯罪剧情', '犯罪悬疑', '犯罪动作', '心理犯罪'],
        forbidden: ['犯罪电影', 'crime']
      },
      // 【新增】喜剧细分类型（作为独立类型）
      {
        type: '浪漫喜剧',
        subGenres: ['都市浪漫', '青春浪漫', '奇幻浪漫', '家庭浪漫'],
        forbidden: ['romantic comedy', '爱情喜剧']
      },
      {
        type: '动作喜剧',
        subGenres: ['警匪喜剧', '间谍喜剧', '功夫喜剧', '科幻喜剧'],
        forbidden: ['action comedy', '搞笑动作']
      },
      {
        type: '黑色喜剧',
        subGenres: ['黑色幽默', '讽刺黑色', '荒诞黑色', '现实黑色'],
        forbidden: ['black comedy', '黑暗喜剧']
      },
      {
        type: '讽刺喜剧',
        subGenres: ['社会讽刺', '政治讽刺', '文化讽刺', '人性讽刺'],
        forbidden: ['satire', '讽刺片']
      },
      {
        type: '无厘头喜剧',
        subGenres: ['滑稽动作', '夸张表演', '无厘头搞笑', '肢体喜剧'],
        forbidden: ['slapstick', '滑稽喜剧']
      }
    ],
    // 获取所有标准影片类型（含细分题材）
    getAllStandardTypes(): string[] {
      const result: string[] = [];
      for (const typeData of this.standardTypes) {
        if (typeData.subGenres.length === 0) {
          result.push(typeData.type);
        } else {
          for (const subGenre of typeData.subGenres) {
            result.push(`${typeData.type}（${subGenre}）`);
          }
        }
      }
      return result;
    },
    // 标准化影片类型名称
    standardize(filmType: string): string {
      const allStandard = this.getAllStandardTypes();

      // 检查是否为标准类型
      if (allStandard.includes(filmType)) {
        return filmType;
      }

      // 【新增】复合类型到标准类型的映射规则
      // 处理类似 "日本都市爱情剧" → "爱情片" 的复合类型
      const compoundMapping = {
        '爱情片': ['爱情剧', '恋爱剧', '都市爱情', '青春爱情', '校园爱情', '浪漫爱情', '奇幻爱情', '年代爱情'],
        '动作片': ['动作剧', '动作电影', '武打片', '武侠动作', '警匪动作', '军事动作', '现代动作'],
        '悬疑片': ['悬疑剧', '悬疑电影', '推理剧', '犯罪悬疑', '心理悬疑', '密室悬疑', '谍战悬疑'],
        '恐怖片': ['恐怖剧', '恐怖电影', '惊悚片', '惊悚剧'],
        '喜剧片': ['喜剧剧', '喜剧电影', '搞笑片', '搞笑剧'],
        '科幻片': ['科幻剧', '科幻电影', '奇幻片', '奇幻剧', '奇幻电影'],
        '战争片': ['战争剧', '战争电影', '抗战片', '军事片'],
        '家庭剧': ['家庭伦理', '家庭题材', '家庭伦理剧'],
        '都市剧': ['都市题材', '都市电影', '现代都市', '都市情感'],
        '校园剧': ['校园题材', '校园青春', '青春校园', '校园青春片'],
        '职场剧': ['职场题材', '职业剧', '行业剧'],
        '古装剧': ['古装电影', '古代剧', '古装大戏'],
        '武侠剧': ['武侠电影', '武侠片', '功夫片', '武打片'],
        '黑帮剧': ['黑帮电影', '警匪片'],
        '政治题材': ['政治电影', '权谋剧', '政治剧', '官场剧'],
        '偶像剧': ['偶像电影', '浪漫爱情'],
        '体育题材': ['体育电影', '运动题材'],
        '主旋律题材': ['主旋律电影', '爱国题材'],
        '红色题材': ['红色电影', '革命片', '历史革命'],
        // 【新增】12种影片类型的近义词映射
        '黑色电影': ['黑色片', 'film noir', '黑色悬疑', '黑色犯罪'],
        '公路电影': ['公路片', 'road movie', '公路题材'],
        '音乐剧': ['musical', '歌舞剧电影', '舞台剧电影'],
        '历史剧': ['历史电影', '历史题材', '历史剧情'],
        '传记片': ['人物传记', 'biography', '传记电影'],
        '宗教片': ['宗教电影', 'religious film', '宗教题材'],
        '实验电影': ['先锋电影', '实验片', 'experimental film'],
        '短片': ['short film', '微电影', '短电影'],
        '文艺片': ['艺术电影', 'art film', '文艺电影'],
        '自然纪录片': ['自然片', 'nature documentary', '野生动物纪录片'],
        '犯罪片': ['犯罪电影', 'crime', '犯罪剧'],
        '浪漫喜剧': ['romantic comedy', '爱情喜剧', '浪漫喜剧片'],
        '动作喜剧': ['action comedy', '搞笑动作', '动作喜剧片'],
        '黑色喜剧': ['black comedy', '黑暗喜剧', '黑色幽默片'],
        '讽刺喜剧': ['satire', '讽刺片', '社会讽刺片'],
        '无厘头喜剧': ['slapstick', '滑稽喜剧', '无厘头片'],
      };

      // 检查复合类型映射
      for (const [standardType, compoundTypes] of Object.entries(compoundMapping)) {
        for (const compoundType of compoundTypes) {
          if (filmType.includes(compoundType)) {
            // 如果匹配到的是有细分题材的类型，添加细分题材
            const typeData = this.standardTypes.find(t => t.type === standardType);
            if (typeData && typeData.subGenres.length > 0) {
              return `${standardType}（${typeData.subGenres[0]}）`;
            }
            return standardType;
          }
        }
      }

      // 检查是否为一级类型（自动添加细分题材）
      for (const typeData of this.standardTypes) {
        if (filmType === typeData.type && typeData.subGenres.length > 0) {
          // 如果是职场剧但没有细分题材，返回第一个细分题材
          return `${typeData.type}（${typeData.subGenres[0]}）`;
        }
        if (filmType === typeData.type) {
          return typeData.type;
        }
      }

      // 检查是否为禁用词汇的近义词
      for (const typeData of this.standardTypes) {
        for (const forbidden of typeData.forbidden) {
          if (filmType.includes(forbidden) || forbidden.includes(filmType)) {
            // 如果是职场剧的近义词，需要添加细分题材
            if (typeData.subGenres.length > 0) {
              return `${typeData.type}（${typeData.subGenres[0]}）`;
            }
            return typeData.type;
          }
        }
      }

      // 无法识别，返回未分类
      return '未分类';
    }
  },

  // 影片类型与情绪词的映射关系
  filmTypeToMoods: {
    '恐怖片': ['惊悚', '压抑', '紧张', '阴森'],
    '职场剧（医护题材）': ['沉稳', '励志', '酸涩', '舒缓'],
    '职场剧（警察题材）': ['紧张', '热血', '冷静', '悲壮'],
    '职场剧（律政题材）': ['冷静', '沉稳', '专注', '急促'],
    '职场剧（美食题材）': ['舒缓', '温馨', '轻快', '治愈'],
    '魔幻片': ['震撼', '神秘', '激昂', '空灵'],
    '古装剧': ['大气', '悲壮', '浪漫', '庄重'],
    '神话剧': ['震撼', '神秘', '大气', '激昂'],
    '推理剧': ['冷静', '悬疑', '专注', '急促'],
    '励志片': ['激昂', '励志', '轻快', '热血'],
    '歌舞片': ['欢快', '轻快', '激昂', '浪漫'],
    '校园剧': ['轻快', '浪漫', '青涩', '甜蜜'],
    '灾难片': ['悲壮', '压抑', '紧张', '激昂'],
    '战争片': ['悲壮', '激昂', '热血', '压抑'],
    '传记片': ['沉稳', '励志', '庄重', '舒缓'],
    '动漫': ['欢快', '激昂', '神秘', '轻快'],
    // 【新增】12种影片类型的情绪映射
    '黑色电影（经典黑色）': ['压抑', '悬疑', '阴郁', '悲凉'],
    '黑色电影（新黑色）': ['紧张', '压抑', '悬疑', '阴暗'],
    '公路电影（自我救赎）': ['轻松', '温馨', '感动', '治愈'],
    '公路电影（友情公路）': ['轻快', '温馨', '欢快', '舒缓'],
    '公路电影（逃亡公路）': ['紧张', '急促', '悬疑', '压抑'],
    '音乐剧（舞台音乐剧）': ['激昂', '欢快', '浪漫', '华丽'],
    '音乐剧（流行音乐剧）': ['轻快', '欢快', '青春', '活力'],
    '历史剧（古代历史）': ['史诗', '庄严', '悲壮', '恢弘'],
    '历史剧（历史战争）': ['激昂', '悲壮', '紧张', '热血'],
    '传记片（名人传记）': ['沉稳', '励志', '庄严', '感怀'],
    '传记片（艺术家传记）': ['浪漫', '忧郁', '唯美', '感伤'],
    '宗教片（宗教题材）': ['庄严', '神圣', '肃穆', '崇高'],
    '实验电影（先锋实验）': ['神秘', '诡异', '梦幻', '空灵'],
    '实验电影（视觉实验）': ['唯美', '震撼', '奇幻', '空灵'],
    '短片（短片剧情）': ['轻快', '温馨', '治愈', '感动'],
    '短片（短片动画）': ['欢快', '梦幻', '可爱', '轻松'],
    '文艺片（文艺剧情）': ['忧郁', '唯美', '感动', '沉静'],
    '文艺片（艺术探索）': ['空灵', '神秘', '唯美', '梦幻'],
    '自然纪录片（野生动物）': ['治愈', '舒缓', '清新', '自然'],
    '自然纪录片（自然风光）': ['唯美', '震撼', '恢弘', '壮阔'],
    '犯罪片（犯罪剧情）': ['紧张', '压抑', '悬疑', '阴暗'],
    '犯罪片（犯罪悬疑）': ['紧张', '悬疑', '急促', '压抑'],
    '浪漫喜剧（都市浪漫）': ['轻快', '浪漫', '欢快', '甜蜜'],
    '浪漫喜剧（青春浪漫）': ['轻快', '甜蜜', '青春', '欢快'],
    '动作喜剧（警匪喜剧）': ['轻快', '激昂', '紧张', '幽默'],
    '动作喜剧（功夫喜剧）': ['轻快', '活力', '激昂', '欢快'],
    '黑色喜剧（黑色幽默）': ['幽默', '阴郁', '讽刺', '怪诞'],
    '讽刺喜剧（社会讽刺）': ['讽刺', '幽默', '尖锐', '压抑'],
    '讽刺喜剧（政治讽刺）': ['讽刺', '阴郁', '紧张', '压抑'],
    '无厘头喜剧（滑稽动作）': ['欢快', '幽默', '轻松', '活泼'],
    '无厘头喜剧（夸张表演）': ['幽默', '夸张', '轻松', '滑稽'],
  },

  // 扩展的情绪词池（仅包含 mood 中没有的情绪词）
  moodExtended: {
    mapping: {
      // 【新增情绪词】多样化情绪表达，严格限制近义词/同义词

      // 沉稳类扩展（新标准词）
      '稳健': '稳健',
      '稳重': '稳健',

      // 励志类扩展（同义词）
      '昂扬': '励志',
      '积极': '励志',
      '奋发': '励志',

      // 酸涩类扩展（新标准词）
      '酸楚': '酸楚',
      '心酸': '酸楚',
      '辛酸': '酸楚',
      '酸楚感': '酸楚',

      // 热血类扩展（同义词）
      '豪迈': '热血',
      '英勇': '热血',
      '热血豪迈': '热血',

      // 冷静类扩展（同义词）
      '沉着': '冷静',
      '清醒': '冷静',
      '冷静清醒': '冷静',

      // 悲壮类扩展（同义词）
      '悲怆': '悲壮',
      '苍凉': '悲壮',
      '悲怆苍凉': '悲壮',

      // 专注类扩展（新标准词）
      '专注': '专注',
      '聚精会神': '专注',
      '全神贯注': '专注',
      '专注投入': '专注',

      // 急促类扩展（同义词）
      '匆忙': '急促',
      '紧迫': '急促',
      '急促紧迫': '急促',

      // 暖意类扩展（新标准词）
      '暖意': '暖意',
      '温暖暖意': '暖意',

      // 治愈类扩展（新标准词）
      '治愈': '治愈',
      '抚慰': '治愈',
      '疗愈': '治愈',
      '治愈抚慰': '治愈',

      // 震撼类扩展（同义词）
      '震撼人心': '震撼',
      '震撼感动': '震撼',
      '震撼冲击': '震撼',

      // 神秘类扩展（同义词）
      '奥秘': '神秘',
      '神秘莫测': '神秘',
      '神秘奥秘': '神秘',

      // 空灵类扩展（同义词）
      '飘逸': '空灵',
      '空灵飘逸': '空灵',
      '空灵悠远': '空灵',

      // 大气类扩展（同义词）
      '大气': '壮阔',
      '恢弘': '恢弘',
      '恢弘大气': '恢弘',
      '磅礴大气': '恢弘',

      // 庄重类扩展（同义词）
      '庄重': '庄严',
      '庄重庄严': '庄严',
      '庄严肃穆': '神圣',

      // 轻快类扩展（同义词）
      '轻盈': '轻快',
      '轻快轻盈': '轻快',

      // 青涩类扩展（同义词）
      '青涩纯真': '青涩',
      '青涩羞涩': '青涩',

      // 甜蜜类扩展（同义词）
      '甜': '甜蜜',
      '甜蜜温暖': '甜蜜',

      // 惊吓类扩展（新标准词）
      '惊吓': '惊吓',
      '惊骇': '惊恐',
      '惊吓惊骇': '惊恐',
      '惊吓恐惧': '惊恐',

      // 绝望类扩展（新标准词）
      '绝望': '绝望',
      '绝望悲痛': '绝望',
      '绝望崩溃': '绝望',

      // 感动类扩展（同义词）
      '感动落泪': '感动',
      '感动欣慰': '感动',
      '感动温暖': '感动',

      // 煎熬类扩展（新标准词）
      '煎熬': '煎熬',
      '煎熬痛苦': '煎熬',
      '煎熬折磨': '煎熬',
      '煎熬煎熬': '煎熬',

      // 嬉闹类扩展（新标准词）
      '嬉闹': '嬉闹',
      '嬉闹玩耍': '嬉闹',
      '嬉闹快乐': '嬉闹',
      '嬉闹欢快': '嬉闹',

      // 对峙类扩展（新标准词）
      '对峙': '对峙',
      '对峙紧张': '对峙',
      '对峙僵持': '对峙',
      '对峙对立': '对峙',

      // 争论类扩展（新标准词）
      '争论': '争论',
      '争论激烈': '争论',
      '争论辩驳': '争论',
      '争论争执': '争论',

      // 转折类扩展（新标准词）
      '转折': '转折',
      '转折点': '转折',
      '转折变化': '转折',
      '转折命运': '转折',

      // 真相类扩展（新标准词）
      '真相': '真相',
      '真相大白': '真相',
      '真相揭露': '真相',
      '真相揭示': '真相',

      // 守护类扩展（新标准词）
      '守护': '守护',
      '守护保护': '守护',
      '守护承诺': '守护',
      '守护责任': '守护',

      // 重生类扩展（新标准词）
      '重生': '重生',
      '重生蜕变': '重生',
      '重生希望': '重生',
      '重生救赎': '重生',

      // 告别类扩展（新标准词）
      '告别': '告别',
      '告别离别': '告别',
      '告别伤感': '告别',
      '告别不舍': '告别',

      // 祈祷类扩展（新标准词）
      '祈祷': '祈祷',
      '祈祷祝福': '祈祷',
      '祈祷祈愿': '祈祷',
      '祈祷虔诚': '祈祷',

      // 庆祝类扩展（新标准词）
      '庆祝': '庆祝',
      '庆祝欢庆': '欢庆',
      '庆祝庆功': '庆祝',
      '庆祝祝贺': '庆祝',

      // 谈心类扩展（新标准词）
      '谈心': '谈心',
      '谈心倾诉': '谈心',
      '谈心交心': '谈心',
      '谈心沟通': '谈心',

      // 独处类扩展（新标准词）
      '独处': '独处',
      '独处沉思': '独处',
      '独处静思': '独处',
      '独处冥想': '独处',

      // 暗杀类扩展（新标准词）
      '暗杀': '暗杀',
      '暗杀行动': '暗杀',
      '暗杀袭击': '暗杀',
      '暗杀刺杀': '暗杀',

      // 训练类扩展（新标准词）
      '训练': '训练',
      '训练特训': '训练',
      '训练备战': '训练',
      '训练锻炼': '训练',

      // 打斗类扩展（新标准词）
      '打斗': '打斗',
      '打斗格斗': '打斗',
      '打斗搏击': '打斗',
      '打斗武打': '打斗',

      // 飙车类扩展（新标准词）
      '飙车': '飙车',
      '飙车赛车': '飙车',
      '飙车竞技': '飙车',
      '飙车追击': '飙车',

      // 跟踪类扩展（新标准词）
      '跟踪': '跟踪',
      '跟踪监视': '跟踪',
      '跟踪尾随': '跟踪',
      '跟踪追踪': '跟踪',

      // 梦境类扩展（同义词）
      '梦境梦回': '梦幻',
      '梦境幻觉': '梦幻',
      '梦境幻象': '梦幻',

      // 比赛类扩展（新标准词）
      '比赛': '比赛',
      '比赛竞技': '比赛',
      '比赛赛事': '比赛',
      '比赛竞争': '比赛',

      // 揭露类扩展（新标准词）
      '揭露': '揭露',
      '揭露揭示': '揭露',
      '揭露曝光': '揭露',
      '揭露曝光真相': '揭露',

      // 【新增情绪词】来自影视场景词库（69个）
      '不甘': '不甘',
      '不舍': '不舍',
      '严谨': '严谨',
      '亢奋': '亢奋',
      '亲切': '温暖',
      '伤感': '悲伤',
      '决绝': '决绝',
      '冷酷': '冷酷',
      '凝重': '压抑',
      '勇猛': '热血',
      '华丽': '唯美',
      '坚定': '坚强',
      '好奇': '好奇',
      '委屈': '委屈',
      '孤寂': '孤独',
      '崩溃': '崩溃',
      '幸福': '开心',
      '心动': '浪漫',
      '怅然': '忧郁',
      '悲痛': '悲伤',
      '惶恐': '惊恐',
      '敬畏': '崇高',
      '无助': '悲伤',
      '无奈': '酸涩',
      '无畏': '勇敢',
      '暗黑': '黑暗',
      '欣慰': '开心',
      '正义': '励志',
      '沉重': '压抑',
      '洒脱': '轻松',
      '满足': '舒适',
      '激动': '兴奋',
      '热烈': '激昂',
      '热闹': '欢庆',
      '焦灼': '焦虑',
      '狗血': '狗血',
      '疲惫': '疲惫',
      '痛苦': '悲伤',
      '眷恋': '浪漫',
      '睿智': '睿智',
      '窒息': '压抑',
      '缅怀': '怀旧',
      '羞涩': '青涩',
      '自豪': '热血',
      '荣耀': '壮阔',
      '解气': '满足',
      '释然': '舒适',
      '隐忍': '压抑',

      // 【新增情绪词】主旋律和红色题材专用情绪词
      '赤诚': '赤诚',
      '赤诚之心': '赤诚',
      '一片赤诚': '赤诚',

      '崇敬': '崇敬',
      '崇高敬意': '崇敬',
      '敬仰': '崇敬',
      '恭敬': '崇敬',
      '尊敬': '崇敬',

      // 【新增情绪词】四大题材（武侠剧、黑帮剧、都市剧、政治题材）专用核心情绪词
      '孤傲': '孤傲',
      '孤傲清高': '孤傲',
      '孤傲不群': '孤傲',

      '狠戾': '狠戾',
      '狠戾凶狠': '狠戾',
      '凶狠狠戾': '狠戾',

      '义气': '义气',
      '义气相挺': '义气',
      '江湖义气': '义气',

      '烟火气': '烟火气',
      '市井烟火气': '烟火气',
      '烟火气息': '烟火气',

      '共情': '共情',
      '情感共鸣': '共情',
      '产生共情': '共情',

      '肃杀': '肃杀',
      '肃杀冷峻': '肃杀',
      '冷峻肃杀': '肃杀',

      '博弈': '博弈',
      '权谋博弈': '博弈',
      '政治博弈': '博弈',

      '威严': '威严',
      '威严庄重': '威严',
      '庄重威严': '威严',

      // 【新增情绪词】辅助情绪词 - 青春向题材专用
      '青春': '青春',
      '青春感': '青春',
      '青春气息': '青春',
      '充满青春': '青春',

      '活力': '活力',
      '活力四射': '活力',
      '充满活力': '活力',
      '活力满满': '活力',

      // 【新增情绪词】描述性标签映射（温暖治愈、轻快活泼等）
      '温暖治愈': '温馨',
      '轻快活泼': '轻快',
      '温馨治愈': '温馨',
      '轻快愉悦': '轻快',
      '暖意融融': '温馨',
      '活泼轻快': '轻快',
      '温暖治愈系': '温馨',
      '轻快明朗': '轻快',
      '治愈温暖': '温馨',
      '欢快活泼': '欢快',
      '温暖柔和': '温馨',
      '舒缓治愈': '治愈',
      '轻柔温暖': '温馨',
      '活泼明快': '轻快',
      '治愈系': '治愈',
      '轻快节奏': '轻快',
      '温暖舒缓': '温馨',
      '愉悦轻快': '轻快',
      '舒适治愈': '治愈',
      '温暖轻松': '温馨',
      '活泼向上': '轻快',
      '暖色治愈': '温馨',
      '轻快灵动': '轻快',
      '温暖安心': '温馨',
      '治愈放松': '治愈',
    },
    standardList: [
      // 新增的标准情绪词（仅包含 mood 中没有的）
      // 沉稳类
      '稳健',
      // 励志类同义词已映射到'励志'，不重复
      // 酸涩类
      '酸楚',
      // 热血类同义词已映射到'热血'，不重复
      // 悲壮类同义词已映射到'悲壮'，不重复
      // 专注类
      '专注',
      // 急促类同义词已映射到'急促'，不重复
      // 暖意类
      '暖意',
      // 治愈类
      '治愈',
      // 震撼类同义词已映射到'震撼'，不重复
      // 神秘类同义词已映射到'神秘'，不重复
      // 空灵类同义词已映射到'空灵'，不重复
      // 大气类同义词已映射到'壮阔'/'恢弘'，不重复
      // 庄重类同义词已映射到'庄严'，不重复
      // 轻快类同义词已映射到'轻快'，不重复
      // 青涩类同义词已映射到'青涩'，不重复
      // 甜蜜类同义词已映射到'甜蜜'，不重复
      // 惊吓类
      '惊吓',
      // 绝望类
      '绝望',
      // 感动类同义词已映射到'感动'，不重复
      // 煎熬类
      '煎熬',
      // 嬉闹类
      '嬉闹',
      // 对峙类
      '对峙',
      // 争论类
      '争论',
      // 转折类
      '转折',
      // 真相类
      '真相',
      // 守护类
      '守护',
      // 重生类
      '重生',
      // 告别类
      '告别',
      // 祈祷类
      '祈祷',
      // 庆祝类
      '庆祝',
      // 谈心类
      '谈心',
      // 独处类
      '独处',
      // 暗杀类
      '暗杀',
      // 训练类
      '训练',
      // 打斗类
      '打斗',
      // 飙车类
      '飙车',
      // 跟踪类
      '跟踪',
      // 梦境类同义词已映射到'梦幻'，不重复
      // 比赛类
      '比赛',
      // 揭露类
      '揭露',
      // 来自影视场景词库的新增标准情绪词（仅保留在mood中不存在的）
      '不甘', '不舍', '严谨', '亢奋', '决绝', '冷酷', '凝重',
      '勇猛', '华丽', '坚定', '好奇', '委屈', '孤寂', '崩溃',
      '幸福', '心动', '怅然', '惶恐', '敬畏', '无助', '无奈',
      '无畏', '暗黑', '欣慰', '正义', '沉重', '洒脱', '满足',
      '热烈', '热闹', '焦灼', '狗血', '疲惫', '眷恋', '睿智',
      '窒息', '缅怀', '羞涩', '自豪', '荣耀', '解气', '释然',
      '隐忍',
      // 主旋律和红色题材专用情绪词
      '赤诚', '崇敬',
      // 辅助情绪词 - 青春向题材专用
      '青春',
      // 四大题材专用情绪词
      '孤傲', '狠戾', '义气', '烟火气', '共情', '肃杀', '博弈', '威严'
    ]
  },

  // 标准场景词（影视剧专用）
  // 规则：核心词（80%覆盖）+ 扩展词（20%覆盖），只使用标准词，不用近义词
  standardScenes: {
    // 核心标准场景词（覆盖80%情况，严格绑定影视类型）
    core: {
      // 标准场景词及其近义词映射
      mapping: {
        // 追逐
        '追逐': '追逐',
        '追击': '追逐',
        '追赶': '追逐',
        '追逐戏': '追逐',
        '追逃': '追逐',

        // 吵架
        '吵架': '吵架',
        '争执': '吵架',
        '争吵': '吵架',
        '拌嘴': '吵架',
        '口角': '吵架',

        // 调查
        '调查': '调查',
        '侦查': '调查',
        '查案': '调查',
        '调查取证': '调查',
        '摸排': '调查',

        // 潜入
        '潜入': '潜入',
        '秘密潜入': '潜入',
        '潜入行动': '潜入',
        '潜入侦查': '潜入',
      },
      // 核心标准场景词列表
      standardList: ['追逐', '吵架', '调查', '潜入'],

      // 场景词与影视类型的匹配规则
      filmTypeMapping: {
        '追逐': {
          allowed: ['动作片', '警匪片', '灾难片', '战争片'],
          forbidden: ['爱情片', '校园剧', '职场剧（美食题材）']
        },
        '吵架': {
          allowed: ['家庭剧', '职场剧（医护题材）', '职场剧（警察题材）', '职场剧（律政题材）', '职场剧（美食题材）', '校园剧', '爱情片'],
          forbidden: ['动作片', '恐怖片', '魔幻片']
        },
        '调查': {
          allowed: ['推理剧', '警匪片', '悬疑片'],
          forbidden: ['歌舞片', '动漫', '励志片']
        },
        '潜入': {
          allowed: ['警匪片', '谍战片', '战争片'],
          forbidden: ['神话剧', '古装剧', '职场剧（美食题材）']
        }
      },
    },

    // 扩展标准场景词（覆盖20%情况，人工确认后入库）
    // 这些词通过自动扩充机制从高频未识别内容中提取
    extended: {
      // 扩展场景词及其近义词映射
      mapping: {
        // 逃亡
        '逃亡': '逃亡',
        '逃跑': '逃亡',
        '奔逃': '逃亡',
        '逃亡戏': '逃亡',

        // 对峙
        '对峙': '对峙',
        '对立': '对峙',
        '僵持': '对峙',
        '对峙戏': '对峙',

        // 回忆闪回
        '回忆闪回': '回忆闪回',
        '闪回': '回忆闪回',
        '回忆': '回忆闪回',
        '回忆片段': '回忆闪回',

        // 埋伏
        '埋伏': '埋伏',
        '设伏': '埋伏',
        '埋伏点': '埋伏',
        '埋伏行动': '埋伏',

        // 祭天仪式
        '祭天仪式': '祭天仪式',
        '祭天': '祭天仪式',
        '祭拜': '祭天仪式',
        '祭祀仪式': '祭天仪式',

        // 【新增场景词】多样化具体场景，严格限制近义词/同义词

        // 体育比赛
        '比赛': '比赛',
        '竞技': '比赛',
        '体育比赛': '比赛',
        '赛事': '比赛',

        // 梦境场景
        '梦境': '梦境',
        '梦': '梦境',
        '梦回': '梦境',
        '梦境片段': '梦境',

        // 跟踪监视
        '跟踪': '跟踪',
        '监视': '跟踪',
        '跟踪监视': '跟踪',
        '尾随': '跟踪',

        // 飙车追击
        '飙车': '飙车',
        '赛车': '飙车',
        '街头飙车': '飙车',
        '飙车竞技': '飙车',

        // 打斗格斗
        '打斗': '打斗',
        '格斗': '打斗',
        '武打': '打斗',
        '搏击': '打斗',

        // 训练准备
        '训练': '训练',
        '特训': '训练',
        '备战': '训练',
        '特训场景': '训练',

        // 【新增场景词】乒乓球专项场景（体育题材专用）
        '决赛局决胜分对抗': '决赛局决胜分对抗',
        '决赛决胜分': '决赛局决胜分对抗',
        '决胜局对抗': '决赛局决胜分对抗',

        '淘汰赛逆风翻盘': '淘汰赛逆风翻盘',
        '逆风翻盘': '淘汰赛逆风翻盘',
        '淘汰赛逆转': '淘汰赛逆风翻盘',

        '团体赛关键场次交接': '团体赛关键场次交接',
        '团体赛交接': '团体赛关键场次交接',
        '关键场次交接': '团体赛关键场次交接',

        '个人专项突破训练': '个人专项突破训练',
        '专项突破': '个人专项突破训练',
        '突破训练': '个人专项突破训练',

        '团队合练对抗': '团队合练对抗',
        '团队对抗': '团队合练对抗',
        '合练对抗': '团队合练对抗',

        '赛前封闭集训': '赛前封闭集训',
        '封闭集训': '赛前封闭集训',
        '赛前集训': '赛前封闭集训',

        // 【新增场景词】主旋律&红色题材+偶像剧+体育题材（24个）

        // 主旋律题材场景
        '国庆阅兵/升旗仪式': '国庆阅兵/升旗仪式',
        '阅兵仪式': '国庆阅兵/升旗仪式',
        '升旗仪式': '国庆阅兵/升旗仪式',

        '革命先烈浴血奋战': '革命先烈浴血奋战',
        '先烈浴血奋战': '革命先烈浴血奋战',

        '脱贫攻坚一线帮扶': '脱贫攻坚一线帮扶',
        '脱贫攻坚': '脱贫攻坚一线帮扶',
        '扶贫帮扶': '脱贫攻坚一线帮扶',

        '科研人员攻克技术难关': '科研人员攻克技术难关',
        '攻克技术难关': '科研人员攻克技术难关',
        '科研攻关': '科研人员攻克技术难关',

        '时代楷模事迹宣讲': '时代楷模事迹宣讲',
        '时代楷模': '时代楷模事迹宣讲',
        '事迹宣讲': '时代楷模事迹宣讲',

        // 红色题材场景
        '革命根据地战略会议': '革命根据地战略会议',
        '根据地会议': '革命根据地战略会议',
        '战略会议': '革命根据地战略会议',

        '战场冲锋浴血奋战': '战场冲锋浴血奋战',
        '冲锋陷阵': '战场冲锋浴血奋战',

        '地下党秘密接头/传递情报': '地下党秘密接头/传递情报',
        '秘密接头': '地下党秘密接头/传递情报',
        '传递情报': '地下党秘密接头/传递情报',

        '先烈就义慷慨陈词': '先烈就义慷慨陈词',
        '就义场景': '先烈就义慷慨陈词',
        '慷慨陈词': '先烈就义慷慨陈词',

        '后辈瞻仰红色纪念馆传承': '后辈瞻仰红色纪念馆传承',
        '瞻仰纪念馆': '后辈瞻仰红色纪念馆传承',
        '红色传承': '后辈瞻仰红色纪念馆传承',

        // 偶像剧场景
        '校园/职场初遇心动': '校园/职场初遇心动',
        '初遇心动': '校园/职场初遇心动',

        '浪漫告白/求婚': '浪漫告白/求婚',
        '浪漫告白': '浪漫告白/求婚',
        '求婚': '浪漫告白/求婚',

        '偶像舞台表演/粉丝应援': '偶像舞台表演/粉丝应援',
        '舞台表演': '偶像舞台表演/粉丝应援',
        '粉丝应援': '偶像舞台表演/粉丝应援',

        '误会解开深情相拥': '误会解开深情相拥',
        '误会解开': '误会解开深情相拥',
        '深情相拥': '误会解开深情相拥',

        '共同成长携手追梦': '共同成长携手追梦',
        '携手追梦': '共同成长携手追梦',
        '共同成长': '共同成长携手追梦',

        // 体育题材场景
        '职业联赛关键场次对决': '职业联赛关键场次对决',
        '联赛对决': '职业联赛关键场次对决',
        '关键场次': '职业联赛关键场次对决',

        '赛前伤病困扰/康复训练': '赛前伤病困扰/康复训练',
        '伤病困扰': '赛前伤病困扰/康复训练',
        '康复训练': '赛前伤病困扰/康复训练',

        '团队战术磨合/矛盾和解': '团队战术磨合/矛盾和解',
        '战术磨合': '团队战术磨合/矛盾和解',
        '矛盾和解': '团队战术磨合/矛盾和解',

        '草根选手逆袭赛场': '草根选手逆袭赛场',
        '逆袭赛场': '草根选手逆袭赛场',
        '草根逆袭': '草根选手逆袭赛场',

        '夺冠升国旗/领奖台': '夺冠升国旗/领奖台',
        '升国旗': '夺冠升国旗/领奖台',
        '领奖台': '夺冠升国旗/领奖台',

        // 通用场景
        '烈士纪念日公祭': '烈士纪念日公祭',
        '纪念日公祭': '烈士纪念日公祭',
        '公祭': '烈士纪念日公祭',

        '国家荣誉表彰': '国家荣誉表彰',
        '荣誉表彰': '国家荣誉表彰',

        '偶像粉丝见面会': '偶像粉丝见面会',
        '粉丝见面会': '偶像粉丝见面会',

        '体育赛事颁奖仪式': '体育赛事颁奖仪式',
        '颁奖仪式': '体育赛事颁奖仪式',

        // 【新增场景词】四大题材（武侠剧、黑帮剧、都市剧、政治题材）专用场景（20个）
        // 武侠剧场景
        '华山之巅武林大会对决': '华山之巅武林大会对决',
        '武林大会对决': '华山之巅武林大会对决',

        '深山竹林隐士高人论道': '深山竹林隐士高人论道',
        '隐士高人论道': '深山竹林隐士高人论道',

        '江湖客栈英雄救美': '江湖客栈英雄救美',
        '客栈英雄救美': '江湖客栈英雄救美',

        '门派密室争夺武林秘籍': '门派密室争夺武林秘籍',
        '争夺武林秘籍': '门派密室争夺武林秘籍',

        '侠客行侠仗义除暴安良': '侠客行侠仗义除暴安良',
        '行侠仗义': '侠客行侠仗义除暴安良',

        // 黑帮剧场景
        '地下赌场帮派火拼': '地下赌场帮派火拼',
        '帮派火拼': '地下赌场帮派火拼',

        '码头仓库毒品交易对峙': '码头仓库毒品交易对峙',
        '毒品交易对峙': '码头仓库毒品交易对峙',

        '警局卧底传递情报接头': '警局卧底传递情报接头',
        '卧底接头': '警局卧底传递情报接头',

        '黑帮大佬谈判桌博弈': '黑帮大佬谈判桌博弈',
        '黑帮谈判': '黑帮大佬谈判桌博弈',

        '扫黑专案组布控抓捕': '扫黑专案组布控抓捕',
        '布控抓捕': '扫黑专案组布控抓捕',

        // 都市剧场景
        '写字楼职场内卷加班': '写字楼职场内卷加班',
        '职场加班': '写字楼职场内卷加班',

        '城市天台情侣告白 / 分手': '城市天台情侣告白 / 分手',
        '天台告白': '城市天台情侣告白 / 分手',

        '老城区胡同家庭聚餐拌嘴': '老城区胡同家庭聚餐拌嘴',
        '家庭聚餐拌嘴': '老城区胡同家庭聚餐拌嘴',

        '深夜便利店陌生人温暖相遇': '深夜便利店陌生人温暖相遇',
        '便利店相遇': '深夜便利店陌生人温暖相遇',

        '刑侦队会议室分析案件线索': '刑侦队会议室分析案件线索',
        '分析案件线索': '刑侦队会议室分析案件线索',

        // 政治题材场景
        '古代朝堂君臣议政博弈': '古代朝堂君臣议政博弈',
        '朝堂议政': '古代朝堂君臣议政博弈',

        '现代政府会议室政策研讨': '现代政府会议室政策研讨',
        '政策研讨': '现代政府会议室政策研讨',

        '反腐专案组调查取证': '反腐专案组调查取证',
        '调查取证': '反腐专案组调查取证',

        '国际外交谈判桌交锋': '国际外交谈判桌交锋',
        '外交谈判': '国际外交谈判桌交锋',

        '历史政变前夜暗流涌动': '历史政变前夜暗流涌动',
        '政变前夜': '历史政变前夜暗流涌动',

        // 【新增场景词】通用场景（4个）
        '雨夜街头对峙': '雨夜街头对峙',
        '雨夜对峙': '雨夜街头对峙',
        '街头对峙': '雨夜街头对峙',

        '庆功宴 / 庆功酒会': '庆功宴 / 庆功酒会',
        '庆功宴': '庆功宴 / 庆功酒会',
        '庆功酒会': '庆功宴 / 庆功酒会',

        '密室密谋策划': '密室密谋策划',
        '密室策划': '密室密谋策划',
        '密谋策划': '密室密谋策划',

        '医院生离死别': '医院生离死别',
        '生离死别': '医院生离死别',

        // 【新增场景词】中性音乐专用场景（15个）
        '客观叙事': '客观叙事',
        '说明性镜头': '说明性镜头',
        '过渡场景': '过渡场景',
        '环境氛围': '环境氛围',
        '产品展示': '产品展示',
        '背景衬托': '背景衬托',
        '日常行走': '日常行走',
        '城市街景': '城市街景',
        '自然风景': '自然风景',
        '办公室日常': '办公室日常',
        '商场环境': '商场环境',
        '餐厅环境': '餐厅环境',
        '酒店大堂': '酒店大堂',
        '学习工作环境': '学习工作环境',
        '信息展示': '信息展示',

        // 【新增场景词】高频非标准词
        '温情日常': '温情日常',
        '日常温情': '温情日常',
        '温馨日常': '温情日常',

        '温馨相处': '温馨相处',
        '温馨交流': '温馨相处',

        '轻松日常': '轻松日常',
        '日常轻松': '轻松日常',
        '舒适日常': '轻松日常',

        '浪漫约会': '浪漫约会',
        '约会场景': '浪漫约会',
        '浪漫时刻': '浪漫约会',

        '温馨家庭': '温馨家庭',
        '家庭温馨': '温馨家庭',
        '家庭温暖': '温馨家庭',

        '朋友聚会': '朋友聚会',
        '好友聚会': '朋友聚会',
        '朋友相聚': '朋友聚会',

        '都市生活': '都市生活',
        '城市生活': '都市生活',
        '现代都市': '都市生活',

        '校园生活': '校园生活',
        '学校生活': '校园生活',
        '青春校园': '校园生活',

        '职场日常': '职场日常',
        '工作日常': '职场日常',

        '休闲时光': '休闲时光',
        '放松时刻': '休闲时光',
        '休闲片刻': '休闲时光',

        '独处时刻': '独处时刻',
        '独自时光': '独处时刻',
        '独处时间': '独处时刻',

        '温暖陪伴': '温暖陪伴',
        '陪伴时光': '温暖陪伴',
        '温馨陪伴': '温暖陪伴',

        // 隐秘行动
        '暗杀': '暗杀',
        '刺杀': '暗杀',
        '暗杀行动': '暗杀',
        '刺杀行动': '暗杀',

        // 情感对话
        '谈心': '谈心',
        '倾诉': '谈心',
        '交心': '谈心',
        '心谈': '谈心',

        // 独处思考
        '独处': '独处',
        '独自': '独处',
        '独自思考': '独处',
        '独处沉思': '独处',

        // 庆祝聚会
        '庆祝': '庆祝',
        '庆功': '庆祝',
        '庆贺': '庆祝',
        '庆祝聚会': '庆祝',

        // 告别离别
        '告别': '告别',
        '离别': '告别',
        '道别': '告别',
        '离别场景': '告别',

        // 祈祷祝福
        '祈祷': '祈祷',
        '祈福': '祈祷',
        '祝福': '祈祷',
        '祈祷场景': '祈祷',

        // 痛苦煎熬
        '煎熬': '煎熬',
        '痛苦': '煎熬',
        '折磨': '煎熬',
        '煎熬场景': '煎熬',

        // 绝望崩溃
        '绝望': '绝望',
        '崩溃': '绝望',
        '绝望场景': '绝望',
        '崩溃场景': '绝望',

        // 惊吓恐惧
        '惊吓': '惊吓',
        '恐惧': '惊吓',
        '惊吓场景': '惊吓',
        '恐惧场景': '惊吓',

        // 嬉闹玩耍
        '嬉闹': '嬉闹',
        '玩耍': '嬉闹',
        '嬉戏': '嬉闹',
        '玩耍场景': '嬉闹',

        // 温馨时光
        '温馨时光': '温馨',
        '温馨场景': '温馨',

        // 紧张对峙
        '对峙紧张': '对峙紧张',
        '紧张对峙': '对峙紧张',
        '僵持对峙': '对峙紧张',
        '对峙僵持': '对峙紧张',

        // 激烈争论
        '争论': '争论',
        '辩论': '争论',
        '激烈争论': '争论',
        '辩论场景': '争论',

        // 感动落泪
        '落泪': '感动',
        '感动落泪': '感动',
        '感动场景': '感动',

        // 伤痛治愈
        '治愈': '治愈',
        '疗伤': '治愈',
        '伤痛治愈': '治愈',
        '治愈场景': '治愈',

        // 破茧重生
        '重生': '重生',
        '蜕变': '重生',
        '破茧重生': '重生',
        '蜕变场景': '重生',

        // 守护承诺
        '守护': '守护',
        '承诺': '守护',
        '守护承诺': '守护',
        '承诺场景': '守护',

        // 命运转折
        '转折': '转折',
        '命运转折': '转折',
        '转折点': '转折',
        '命运场景': '转折',

        // 秘密揭露
        '揭露': '揭露',
        '秘密': '揭露',
        '秘密揭露': '揭露',
        '揭露场景': '揭露',

        // 真相大白
        '真相': '真相',
        '真相大白': '真相',
        '真相场景': '真相',
        '揭露真相': '真相',

        // 【新增场景词】情感细节场景（40个）
        // 微表情与内心活动
        '微笑示意': '微笑示意',
        '点头肯定': '点头肯定',
        '摇头否认': '摇头否认',
        '眨眼暗示': '眨眼暗示',
        '皱眉思考': '皱眉思考',
        '撇嘴不屑': '撇嘴不屑',
        '咬唇纠结': '咬唇纠结',
        '深呼吸平复': '深呼吸平复',
        '眼神交流': '眼神交流',
        '目光闪躲': '目光闪躲',
        '深情凝视': '深情凝视',
        '怒目而视': '怒目而视',
        '含泪微笑': '含泪微笑',
        '默默流泪': '默默流泪',
        '强忍泪水': '强忍泪水',
        '掩面而泣': '掩面而泣',
        '无声叹息': '无声叹息',
        '轻声叹息': '轻声叹息',
        '叹息场景': '无声叹息',
        '内心独白': '内心独白',
        '心理活动': '内心独白',
        '心理挣扎': '心理挣扎',
        '心理纠结': '心理纠结',
        '自我对话': '内心独白',
        '自我安慰': '自我安慰',
        '自我鼓励': '自我鼓励',
        '自我怀疑': '自我怀疑',
        '心跳加速': '心跳加速',
        '手心出汗': '手心出汗',
        '紧张发抖': '紧张发抖',
        '浑身战栗': '浑身战栗',
        '身体僵硬': '身体僵硬',
        '瘫软无力': '瘫软无力',
        '瘫倒在地': '瘫软无力',
        '握紧拳头': '握紧拳头',
        '松开手': '松开手',
        '拍打自己': '拍打自己',
        '揪住衣领': '揪住衣领',
        '撕扯头发': '撕扯头发',
        '咬紧牙关': '咬紧牙关',
        '屏住呼吸': '屏住呼吸',

        // 【新增场景词】日常生活场景（50个）
        // 居家生活
        '早晨起床': '早晨起床',
        '刷牙洗脸': '刷牙洗脸',
        '整理仪容': '整理仪容',
        '早餐准备': '早餐准备',
        '吃早餐': '吃早餐',
        '咖啡时光': '咖啡时光',
        '收拾餐具': '收拾餐具',
        '打扫房间': '打扫房间',
        '整理房间': '打扫房间',
        '洗衣服': '洗衣服',
        '晾晒衣物': '晾晒衣物',
        '叠衣服': '叠衣服',
        '熨烫衣物': '熨烫衣物',
        '做饭': '做饭',
        '烹饪': '做饭',
        '厨房忙碌': '做饭',
        '备菜': '做饭',
        '切菜': '做饭',
        '炒菜': '做饭',
        '品尝食物': '品尝食物',
        '倒酒': '倒酒',
        '举杯': '举杯',
        '干杯': '举杯',
        '看电视': '看电视',
        '追剧': '看电视',
        '刷手机': '刷手机',
        '上网': '上网',
        '看书': '看书',
        '阅读': '看书',
        '写日记': '写日记',
        '写笔记': '写笔记',
        '化妆': '化妆',
        '护肤': '护肤',
        '试衣服': '试衣服',
        '照镜子': '照镜子',
        '健身': '健身',
        '运动': '健身',
        '瑜伽': '健身',
        '跑步': '健身',
        '散步': '散步',
        '遛狗': '遛狗',
        '浇花': '浇花',
        '养植物': '浇花',
        '喂宠物': '喂宠物',
        '给宠物洗澡': '给宠物洗澡',
        '陪伴宠物': '陪伴宠物',
        '午休': '午休',
        '午睡': '午休',
        '休息': '休息',
        '小憩': '休息',
        '睡前': '睡前',
        '睡前准备': '睡前',
        '关灯睡觉': '睡前',

        // 【新增场景词】职场互动场景（35个）
        '早会': '会议',
        '晨会': '会议',
        '例会': '会议',
        '部门会议': '会议',
        '全员大会': '会议',
        '头脑风暴': '会议',
        '项目汇报': '会议',
        '工作汇报': '会议',
        '部门聚餐': '同事聚餐',
        '团队聚餐': '同事聚餐',
        '迎新会': '同事聚餐',
        '欢送会': '同事聚餐',
        '团建': '团建',
        '团队建设': '团建',
        '团建活动': '团建',
        '新人培训': '培训',
        '入职培训': '培训',
        '技能培训': '培训',
        '学习培训': '培训',
        '面试': '面试',
        '求职面试': '面试',
        '跳槽面试': '面试',
        '晋升面试': '面试',
        '同事闲聊': '同事闲聊',
        '茶水间闲聊': '同事闲聊',
        '八卦': '同事闲聊',
        '办公室八卦': '同事闲聊',
        '电梯偶遇': '电梯偶遇',
        '走廊偶遇': '电梯偶遇',
        '请教问题': '请教问题',
        '寻求帮助': '请教问题',
        '指导新人': '指导新人',
        '带新人': '指导新人',
        '交接工作': '交接工作',
        '工作交接': '交接工作',
        '离职谈话': '离职谈话',
        '辞职': '离职谈话',
        '辞职面谈': '离职谈话',
        '项目庆功': '庆祝',
        '部门庆功': '庆祝',
        '年终总结': '年终总结',
        '年度总结': '年终总结',
        '述职': '年终总结',
        '述职报告': '年终总结',
        '考评': '绩效考评',
        '绩效考评': '绩效考评',
        '年终考评': '绩效考评',

        // 【新增场景词】社交互动场景（30个）
        '相亲': '相亲',
        '初次见面': '初次见面',
        '自我介绍': '自我介绍',
        '破冰': '初次见面',
        '打招呼': '打招呼',
        '问好': '打招呼',
        '寒暄': '打招呼',
        '送礼': '送礼',
        '收礼物': '收礼物',
        '拆礼物': '拆礼物',
        '表示感谢': '表示感谢',
        '感谢': '表示感谢',
        '致谢': '表示感谢',
        '道歉': '道歉',
        '认错': '道歉',
        '请求原谅': '道歉',
        '接受道歉': '接受道歉',
        '原谅': '接受道歉',
        '握手': '握手',
        '拥抱': '拥抱',
        '拍肩': '拍肩',
        '拍背': '拍肩',
        '击掌': '击掌',
        '拥抱告别': '拥抱',
        '挥手告别': '挥手告别',
        '挥手': '挥手告别',
        '鞠躬': '鞠躬',
        '行礼': '鞠躬',
        '敬礼': '敬礼',
        '点头致意': '点头致意',
        '微笑致意': '微笑致意',
        '拥抱祝福': '拥抱',
        '拥抱安慰': '拥抱',
        '拥抱感谢': '拥抱',

        // 【新增场景词】交通出行场景（25个）
        '坐地铁': '坐地铁',
        '地铁通勤': '坐地铁',
        '坐公交': '坐公交',
        '公交出行': '坐公交',
        '打车': '打车',
        '出租车': '打车',
        '网约车': '打车',
        '开车': '开车',
        '驾驶': '开车',
        '堵车': '堵车',
        '交通拥堵': '堵车',
        '停车场': '停车场',
        '停车': '停车场',
        '找车位': '停车场',
        '坐飞机': '坐飞机',
        '飞机上': '坐飞机',
        '机场送别': '机场送别',
        '机场接人': '机场接人',
        '坐高铁': '坐高铁',
        '高铁上': '坐高铁',
        '坐火车': '坐火车',
        '火车上': '坐火车',
        '骑自行车': '骑自行车',
        '骑车': '骑自行车',
        '步行': '步行',
        '走路': '步行',
        '夜跑': '步行',

        // 【新增场景词】购物消费场景（25个）
        '逛超市': '逛超市',
        '超市购物': '逛超市',
        '逛商场': '逛商场',
        '商场购物': '逛商场',
        '试穿': '试穿',
        '试衣': '试穿',
        '买衣服': '买衣服',
        '购衣': '买衣服',
        '逛街': '逛街',
        '购物': '逛街',
        '网购': '网购',
        '网上购物': '网购',
        '快递收货': '快递收货',
        '取快递': '快递收货',
        '拆快递': '拆快递',
        '咖啡店': '咖啡店',
        '喝咖啡': '咖啡店',
        '咖啡馆': '咖啡店',
        '奶茶店': '奶茶店',
        '买奶茶': '奶茶店',
        '喝奶茶': '奶茶店',
        '餐厅用餐': '餐厅用餐',
        '外出就餐': '餐厅用餐',
        '点外卖': '点外卖',
        '外卖': '点外卖',
        '超市排队': '超市排队',
        '结账': '超市排队',
        '付款': '超市排队',

        // 【新增场景词】新兴影视题材场景（50个）
        // 虚拟现实/元宇宙题材
        '虚拟现实体验': '虚拟现实体验',
        'VR体验': '虚拟现实体验',
        '元宇宙登录': '元宇宙登录',
        '虚拟化身': '虚拟化身',
        '虚拟角色': '虚拟化身',
        '虚拟世界探索': '虚拟世界探索',
        '数字世界': '虚拟世界探索',
        '赛博空间': '虚拟世界探索',
        '虚拟社交': '虚拟社交',
        '线上虚拟聚会': '虚拟社交',
        '数字身份': '数字身份',
        '虚拟身份': '数字身份',
        '虚拟婚礼': '虚拟婚礼',
        '线上婚礼': '虚拟婚礼',
        '元宇宙婚礼': '虚拟婚礼',
        '虚拟演唱会': '虚拟演唱会',
        '线上演唱会': '虚拟演唱会',
        '数字音乐会': '虚拟演唱会',
        '虚拟会议': '虚拟会议',
        '线上会议': '虚拟会议',
        '远程会议': '虚拟会议',

        // 科幻末日题材
        '末日废墟': '末日废墟',
        '后末日世界': '末日废墟',
        '废墟求生': '末日废墟',
        '资源争夺': '资源争夺',
        '寻找水源': '资源争夺',
        '寻找食物': '资源争夺',
        '废土流浪': '废土流浪',
        '末日逃亡': '废土流浪',
        '避难所生活': '避难所生活',
        '地下避难所': '避难所生活',
        '末日团队': '末日团队',
        '末日小队': '末日团队',
        '病毒爆发初期': '病毒爆发初期',
        '疫情蔓延': '病毒爆发初期',
        '城市封锁': '城市封锁',
        ' quarantine隔离': '城市封锁',
        '末世重建': '末世重建',
        '文明重启': '末世重建',
        '新世界建立': '末世重建',

        // 心理惊悚题材
        '幻觉': '幻觉',
        '产生幻觉': '幻觉',
        '精神崩溃': '精神崩溃',
        '精神失常': '精神崩溃',
        '记忆错乱': '记忆错乱',
        '记忆混乱': '记忆错乱',
        '现实与虚幻': '现实与虚幻',
        '分辨现实': '现实与虚幻',
        '梦境入侵': '梦境入侵',
        '噩梦循环': '梦境入侵',
        '心理创伤': '心理创伤',
        '创伤回忆': '心理创伤',
        '心理阴影': '心理创伤',
        '心理暗示': '心理暗示',
        '催眠场景': '催眠场景',
        '被催眠': '催眠场景',
        '心理操纵': '心理操纵',
        '心理控制': '心理操纵',
        '心理博弈': '心理博弈',
        '心理对抗': '心理博弈',
        '人格分裂': '人格分裂',
        '多重人格': '人格分裂',
        '潜意识觉醒': '潜意识觉醒',
        '深度潜意识': '潜意识觉醒',
        '心理医生问诊': '心理医生问诊',
        '心理咨询': '心理医生问诊',
        '精神科诊疗': '心理医生问诊',
        '精神病房': '精神病房',
        '精神病院': '精神病房',

        // 人工智能题材
        '人工智能觉醒': '人工智能觉醒',
        'AI觉醒': '人工智能觉醒',
        '机器人意识': '人工智能觉醒',
        '人机对话': '人机对话',
        '与AI交流': '人机对话',
        '人工智能助手': '人工智能助手',
        'AI助手': '人工智能助手',
        '智能机器人': '人工智能助手',
        '算法对抗': '算法对抗',
        '黑客对战': '算法对抗',
        '网络入侵': '算法对抗',
        '网络攻防': '算法对抗',
        '数据窃取': '数据窃取',
        '信息泄露': '数据窃取',
        '隐私泄露': '数据窃取',
        '数字追踪': '数字追踪',
        '网络追踪': '数字追踪',
        '监控无处不在': '监控无处不在',
        '被监视': '监控无处不在',
        '大数据分析': '大数据分析',
        '数据挖掘': '大数据分析',
        '算法推荐': '大数据分析',
        '虚拟偶像': '虚拟偶像',
        '虚拟主播': '虚拟偶像',
        '数字人': '虚拟偶像',

        // 【新增场景词】跨文化场景（30个）
        // 异国风情
        '异国街头': '异国街头',
        '外国城市': '异国街头',
        '海外生活': '海外生活',
        '留学生活': '海外生活',
        '跨国出差': '跨国出差',
        '海外工作': '跨国出差',
        '异国求学': '异国求学',
        '出国留学': '异国求学',
        '语言障碍': '语言障碍',
        '翻译': '语言障碍',
        '同声传译': '语言障碍',
        '文化冲突': '文化冲突',
        '文化差异': '文化冲突',
        '文化融合': '文化融合',
        '跨文化交际': '文化融合',
        '外国朋友': '外国朋友',
        '异国朋友': '外国朋友',
        '国际友人': '外国朋友',
        '外交场合': '外交场合',
        '国际会议': '外交场合',
        '国际合作': '国际合作',
        '跨国合作': '国际合作',
        '签证面试': '签证面试',
        '出入境': '签证面试',
        '移民': '移民',
        '移民申请': '移民',
        '海外置业': '海外置业',
        '外国投资': '海外置业',
        '跨国公司': '跨国公司',
        '外企工作': '跨国公司',
        '国际组织': '国际组织',
        '国际机构': '国际组织',

        // 【新增场景词】来自影视场景词库（109个具体场景）
        // 英雄与动作类
        '英雄觉醒获能场景': '英雄觉醒',
        '英雄团队协作场景': '英雄团队协作',
        '反派终极对决场景': '反派对决',
        '英雄身份隐藏/曝光场景': '英雄身份隐藏',
        '街头追逃场景': '街头追逃',
        '近身格斗场景': '近身格斗',
        '爆破逃生场景': '爆破逃生',
        '军事特训场景': '军事特训',
        '极限追逐场景': '极限追逐',
        '正面对抗复仇场景': '正面对抗',

        // 城市与灾难类
        '城市灾难救援场景': '城市灾难救援',
        '城市丧尸突袭场景': '城市丧尸突袭',
        '密闭空间躲避场景': '密闭空间躲避',
        '寻找安全区逃亡场景': '寻找安全区',

        // 丧尸/恐怖类
        '亲友变丧尸抉择场景': '亲友变丧尸',
        '病毒疫苗研发场景': '病毒疫苗研发',

        // 职场类
        '办公室加班赶工场景': '办公室加班',
        '职场前辈带新人场景': '职场前辈带新',
        '项目攻坚团队协作场景': '项目攻坚',
        '职场PUA对抗场景': '职场PUA',
        '深夜加班场景': '深夜加班',

        // 医疗类
        '急诊抢救场景': '急诊抢救',
        '手术台攻坚场景': '手术台攻坚',
        '医患沟通场景': '医患沟通',
        '医疗科研突破场景': '医疗科研突破',
        '医护人员休整场景': '医护人员休整',

        // 法律类
        '法庭辩论场景': '法庭辩论',
        '案件调查取证场景': '案件调查取证',
        '律师团队研讨场景': '律师团队研讨',
        '当事人沟通场景': '当事人沟通',
        '司法公正宣判场景': '司法公正宣判',

        // 复仇类
        '复仇计划布局场景': '复仇计划布局',
        '复仇成功/失败场景': '复仇成败',
        '复仇后的救赎场景': '复仇救赎',

        // 家庭与生活类
        '家庭聚餐场景': '家庭聚餐',
        '代际矛盾争吵场景': '代际矛盾',
        '家人互助脱困场景': '家人互助脱困',
        '亲情和解场景': '亲情和解',
        '家庭成长纪念场景': '家庭成长纪念',

        // 美食类
        '美食制作过程场景': '美食制作',
        '美食品尝点评场景': '美食品尝',
        '美食创业攻坚场景': '美食创业',
        '美食竞技比拼场景': '美食竞技',
        '美食寻根溯源场景': '美食寻根',

        // 吸血鬼/奇幻类
        '吸血鬼古堡邂逅场景': '吸血鬼古堡邂逅',
        '种族斗争对峙场景': '种族斗争',
        '永生孤独独白场景': '永生孤独',
        '吸血鬼与人类禁忌爱情场景': '吸血鬼禁忌爱',
        '月圆狼人变身场景': '狼人变身',

        // 校园青春类
        '校园毕业典礼场景': '校园毕业',
        '校园角落霸凌场景': '校园霸凌',
        '校园邂逅场景': '校园邂逅',

        // 奇幻治愈类
        '妖怪与人类相遇场景': '妖怪相遇',
        '时光倒流弥补遗憾场景': '时光倒流',
        '雨夜奇幻邂逅场景': '雨夜奇幻',
        '日常中的奇幻瞬间场景': '日常奇幻',
        '神话生物邂逅场景': '神话生物邂逅',
        '秘境入口探索场景': '秘境入口探索',
        '寻宝途中遇险场景': '寻宝遇险',

        // 歌舞类
        '爱情告白歌舞场景': '爱情告白歌舞',
        '复仇决心歌舞场景': '复仇歌舞',
        '社会现状批判歌舞场景': '社会批判歌舞',
        '家族庆典歌舞场景': '家族庆典',
        '主角成长蜕变歌舞场景': '成长蜕变',
        '歌舞叙事转场场景': '歌舞转场',

        // 爱情与婚姻类
        '婚礼宣誓场景': '婚礼宣誓',
        '异地重逢场景': '异地重逢',
        '遗憾离别场景': '遗憾离别',
        '跨国婚姻家人反对场景': '跨国婚姻',
        '婚外情被撞破场景': '婚外情',
        '雨中告白场景': '雨中告白',

        // 校园霸凌类
        '受害者隐忍/反抗场景': '受害者隐忍',
        '旁观者犹豫/出手场景': '旁观者犹豫',
        '老师介入调解场景': '老师调解',
        '霸凌者悔改/惩罚场景': '霸凌者悔改',

        // 治愈与田园类
        '乡村稻田劳作场景': '乡村稻田劳作',
        '农场动物互动场景': '农场动物互动',
        '邻里温情互助场景': '邻里温情',
        '日落田园休憩场景': '日落田园',
        '都市人归隐适应场景': '都市归隐',

        // 家庭伦理类
        '豪门宴会对峙场景': '豪门宴会对峙',
        '身世揭秘崩溃场景': '身世揭秘',
        '家族继承权争夺场景': '家族继承权',
        '复仇式联姻场景': '复仇联姻',

        // 侦探悬疑类
        '密室推理场景': '密室推理',
        '雨夜探秘场景': '雨夜探秘',
        '线索追踪场景': '线索追踪',
        '真相揭晓场景': '真相揭晓',
        '卧底接头场景': '卧底接头',

        // 社会议题类
        '阶级差异冲突场景': '阶级差异',
        '女性反抗职场歧视场景': '女性反抗歧视',
        '底层人物挣扎求生场景': '底层挣扎',
        '社会议题游行场景': '社会议题',
        '政策改变希望场景': '政策改变',

        // 老年题材类
        '老年大学相识场景': '老年大学',
        '退休后环球旅行场景': '退休旅行',
        '与子女和解谈心场景': '子女和解',
        '老年疾病互助场景': '老年疾病',
        '重温青春回忆场景': '重温青春',

        // 运动竞技类
        '赛前集训冲刺场景': '赛前集训',
        '赛场逆转绝杀场景': '赛场逆转',
        '队友矛盾和解场景': '队友和解',
        '毕业告别赛场场景': '毕业告别',
        '对抗强敌突破自我场景': '突破自我',

        // 通用场景类
        '生日庆祝场景': '生日庆祝',
        '亲人离世场景': '亲人离世',
        '颁奖典礼场景': '颁奖典礼',
        '首次成功场景': '首次成功',
        '离别时的祝福场景': '离别祝福',
      },
      // 扩展标准场景词列表（新增多样化场景）
      standardList: [
        '逃亡', '对峙', '回忆闪回', '埋伏', '祭天仪式',
        '比赛', '梦境', '跟踪', '飙车', '打斗',
        '训练', '暗杀', '谈心', '独处', '庆祝',
        '告别', '祈祷', '煎熬', '绝望', '惊吓',
        '嬉闹', '温馨', '对峙紧张', '争论', '感动',
        '治愈', '重生', '守护', '转折', '揭露',
        '真相',
        // 【新增具体场景词】乒乓球专项场景（6个）
        '决赛局决胜分对抗', '淘汰赛逆风翻盘', '团体赛关键场次交接',
        '个人专项突破训练', '团队合练对抗', '赛前封闭集训',
        // 【新增具体场景词】来自影视场景词库（109个）
        '英雄觉醒', '英雄团队协作', '反派对决', '英雄身份隐藏',
        '街头追逃', '近身格斗', '爆破逃生', '军事特训', '极限追逐',
        '正面对抗', '城市灾难救援', '城市丧尸突袭', '密闭空间躲避',
        '寻找安全区', '亲友变丧尸', '病毒疫苗研发', '办公室加班',
        '职场前辈带新', '项目攻坚', '职场PUA', '深夜加班',
        '急诊抢救', '手术台攻坚', '医患沟通', '医疗科研突破',
        '医护人员休整', '法庭辩论', '案件调查取证', '律师团队研讨',
        '当事人沟通', '司法公正宣判', '复仇计划布局', '复仇成败',
        '复仇救赎', '家庭聚餐', '代际矛盾', '家人互助脱困',
        '亲情和解', '家庭成长纪念', '美食制作', '美食品尝',
        '美食创业', '美食竞技', '美食寻根', '吸血鬼古堡邂逅',
        '种族斗争', '永生孤独', '吸血鬼禁忌爱', '狼人变身',
        '校园毕业', '校园霸凌', '校园邂逅', '妖怪相遇', '时光倒流',
        '雨夜奇幻', '日常奇幻', '神话生物邂逅', '秘境入口探索',
        '寻宝遇险', '爱情告白歌舞', '复仇歌舞', '社会批判歌舞',
        '家族庆典', '成长蜕变', '歌舞转场', '婚礼宣誓', '异地重逢',
        '遗憾离别', '跨国婚姻', '婚外情', '雨中告白', '受害者隐忍',
        '旁观者犹豫', '老师调解', '霸凌者悔改', '乡村稻田劳作',
        '农场动物互动', '邻里温情', '日落田园', '都市归隐',
        '豪门宴会对峙', '身世揭秘', '家族继承权', '复仇联姻',
        '密室推理', '雨夜探秘', '线索追踪', '真相揭晓', '卧底接头',
        '阶级差异', '女性反抗歧视', '底层挣扎', '社会议题',
        '政策改变', '老年大学', '退休旅行', '子女和解',
        '老年疾病', '重温青春', '赛前集训', '赛场逆转', '队友和解',
        '毕业告别', '突破自我', '生日庆祝', '亲人离世', '颁奖典礼',
        '首次成功', '离别祝福',
        // 【新增场景词】主旋律&红色题材+偶像剧+体育题材（24个）
        '国庆阅兵/升旗仪式', '革命先烈浴血奋战', '脱贫攻坚一线帮扶',
        '科研人员攻克技术难关', '时代楷模事迹宣讲',
        '革命根据地战略会议', '战场冲锋浴血奋战',
        '地下党秘密接头/传递情报', '先烈就义慷慨陈词',
        '后辈瞻仰红色纪念馆传承', '校园/职场初遇心动',
        '浪漫告白/求婚', '偶像舞台表演/粉丝应援',
        '误会解开深情相拥', '共同成长携手追梦',
        '职业联赛关键场次对决', '赛前伤病困扰/康复训练',
        '团队战术磨合/矛盾和解', '草根选手逆袭赛场',
        '夺冠升国旗/领奖台', '烈士纪念日公祭',
        '国家荣誉表彰', '偶像粉丝见面会', '体育赛事颁奖仪式',
        // 【新增场景词】四大题材（武侠剧、黑帮剧、都市剧、政治题材）专用场景（20个）
        '华山之巅武林大会对决', '深山竹林隐士高人论道', '江湖客栈英雄救美',
        '门派密室争夺武林秘籍', '侠客行侠仗义除暴安良',
        '地下赌场帮派火拼', '码头仓库毒品交易对峙', '警局卧底传递情报接头',
        '黑帮大佬谈判桌博弈', '扫黑专案组布控抓捕',
        '写字楼职场内卷加班', '城市天台情侣告白 / 分手', '老城区胡同家庭聚餐拌嘴',
        '深夜便利店陌生人温暖相遇', '刑侦队会议室分析案件线索',
        '古代朝堂君臣议政博弈', '现代政府会议室政策研讨', '反腐专案组调查取证',
        '国际外交谈判桌交锋', '历史政变前夜暗流涌动',
        // 【新增场景词】通用场景（4个）
        '雨夜街头对峙', '庆功宴 / 庆功酒会', '密室密谋策划', '医院生离死别',
        // 【新增场景词】中性音乐专用场景（15个）
        '客观叙事', '说明性镜头', '过渡场景', '环境氛围', '产品展示',
        '背景衬托', '日常行走', '城市街景', '自然风景', '办公室日常',
        '商场环境', '餐厅环境', '酒店大堂', '学习工作环境', '信息展示',
        // 【新增场景词】高频非标准词（14个）
        '温情日常', '温馨相处', '轻松日常', '浪漫约会', '温馨家庭',
        '朋友聚会', '都市生活', '校园生活', '职场日常', '休闲时光',
        '独处时刻', '温暖陪伴',
        // 【新增场景词】情感细节场景（40个）
        '微笑示意', '点头肯定', '摇头否认', '眨眼暗示', '皱眉思考',
        '撇嘴不屑', '咬唇纠结', '深呼吸平复', '眼神交流', '目光闪躲',
        '深情凝视', '怒目而视', '含泪微笑', '默默流泪', '强忍泪水',
        '掩面而泣', '无声叹息', '轻声叹息', '内心独白', '心理活动',
        '心理挣扎', '心理纠结', '自我对话', '自我安慰', '自我鼓励',
        '自我怀疑', '心跳加速', '手心出汗', '紧张发抖', '浑身战栗',
        '身体僵硬', '瘫软无力', '握紧拳头', '松开手', '拍打自己',
        '揪住衣领', '撕扯头发', '咬紧牙关', '屏住呼吸',
        // 【新增场景词】日常生活场景（50个）
        '早晨起床', '刷牙洗脸', '整理仪容', '早餐准备', '吃早餐',
        '咖啡时光', '收拾餐具', '打扫房间', '洗衣服', '晾晒衣物',
        '叠衣服', '熨烫衣物', '做饭', '品尝食物', '倒酒', '举杯',
        '看电视', '追剧', '刷手机', '上网', '看书', '阅读',
        '写日记', '写笔记', '化妆', '护肤', '试衣服', '照镜子',
        '健身', '运动', '瑜伽', '跑步', '散步', '遛狗', '浇花',
        '养植物', '喂宠物', '给宠物洗澡', '陪伴宠物', '午休', '午睡',
        '休息', '小憩', '睡前', '睡前准备', '关灯睡觉',
        // 【新增场景词】职场互动场景（35个）
        '会议', '同事聚餐', '团建', '培训', '面试', '同事闲聊',
        '电梯偶遇', '请教问题', '指导新人', '交接工作', '离职谈话',
        '年终总结', '绩效考评',
        // 【新增场景词】社交互动场景（30个）
        '相亲', '初次见面', '自我介绍', '打招呼', '送礼', '收礼物',
        '拆礼物', '表示感谢', '道歉', '接受道歉', '握手', '拥抱',
        '拍肩', '击掌', '挥手告别', '鞠躬', '敬礼', '点头致意',
        '微笑致意',
        // 【新增场景词】交通出行场景（25个）
        '坐地铁', '坐公交', '打车', '开车', '堵车', '停车场',
        '坐飞机', '机场送别', '机场接人', '坐高铁', '坐火车',
        '骑自行车', '步行',
        // 【新增场景词】购物消费场景（25个）
        '逛超市', '逛商场', '试穿', '买衣服', '逛街', '网购',
        '快递收货', '拆快递', '咖啡店', '奶茶店', '餐厅用餐',
        '点外卖', '超市排队',
        // 【新增场景词】新兴影视题材场景（50个）
        '虚拟现实体验', '元宇宙登录', '虚拟化身', '虚拟世界探索',
        '虚拟社交', '数字身份', '虚拟婚礼', '虚拟演唱会', '虚拟会议',
        '末日废墟', '资源争夺', '废土流浪', '避难所生活', '末日团队',
        '病毒爆发初期', '城市封锁', '末世重建',
        '幻觉', '精神崩溃', '记忆错乱', '现实与虚幻', '梦境入侵',
        '心理创伤', '心理暗示', '催眠场景', '心理操纵', '心理博弈',
        '人格分裂', '潜意识觉醒', '心理医生问诊', '精神病房',
        '人工智能觉醒', '人机对话', '人工智能助手', '算法对抗',
        '数据窃取', '数字追踪', '监控无处不在', '大数据分析', '虚拟偶像',
        // 【新增场景词】跨文化场景（30个）
        '异国街头', '海外生活', '跨国出差', '异国求学', '语言障碍',
        '文化冲突', '文化融合', '外国朋友', '外交场合', '国际合作',
        '签证面试', '移民', '海外置业', '跨国公司', '国际组织',
      ],

      // 扩展场景词与影视类型的匹配规则（新增场景的匹配规则）
      filmTypeMapping: {
        '逃亡': {
          allowed: ['动作片', '灾难片', '战争片'],
          forbidden: ['爱情片', '校园剧']
        },
        '对峙': {
          allowed: ['警匪片', '悬疑剧', '古装剧', '战争片'],
          forbidden: ['歌舞片', '校园剧', '职场剧（美食题材）']
        },
        '回忆闪回': {
          allowed: ['剧情片', '爱情片', '悬疑剧', '古装剧', '家庭剧'],
          forbidden: ['动作片', '灾难片']
        },
        '埋伏': {
          allowed: ['警匪片', '战争片', '谍战片'],
          forbidden: ['爱情片', '歌舞片', '校园剧']
        },
        '祭天仪式': {
          allowed: ['古装剧', '神话剧'],
          forbidden: ['动作片', '职场剧', '校园剧']
        },
        // 新增场景词匹配规则
        '比赛': {
          allowed: ['校园剧', '励志片', '动作片', '歌舞片'],
          forbidden: ['恐怖片', '悬疑片']
        },
        '梦境': {
          allowed: ['魔幻片', '神话剧', '悬疑剧', '爱情片'],
          forbidden: ['动作片', '灾难片']
        },
        '跟踪': {
          allowed: ['警匪片', '悬疑片', '谍战片', '推理剧'],
          forbidden: ['歌舞片', '校园剧']
        },
        '飙车': {
          allowed: ['动作片', '警匪片', '灾难片'],
          forbidden: ['古装剧', '歌舞片', '校园剧']
        },
        '打斗': {
          allowed: ['动作片', '古装剧', '战争片', '动漫'],
          forbidden: ['爱情片', '校园剧', '歌舞片']
        },
        '训练': {
          allowed: ['动作片', '励志片', '校园剧', '战争片'],
          forbidden: ['爱情片', '歌舞片']
        },
        '暗杀': {
          allowed: ['动作片', '警匪片', '古装剧', '谍战片'],
          forbidden: ['爱情片', '校园剧', '歌舞片']
        },
        '谈心': {
          allowed: ['爱情片', '家庭剧', '校园剧', '职场剧'],
          forbidden: ['动作片', '灾难片']
        },
        '独处': {
          allowed: ['剧情片', '爱情片', '传记片'],
          forbidden: ['动作片', '歌舞片']
        },
        '庆祝': {
          allowed: ['校园剧', '励志片', '歌舞片', '家庭剧'],
          forbidden: ['恐怖片', '悬疑片']
        },
        '告别': {
          allowed: ['爱情片', '家庭剧', '剧情片'],
          forbidden: ['动作片', '喜剧片']
        },
        '祈祷': {
          allowed: ['古装剧', '神话剧', '家庭剧'],
          forbidden: ['动作片', '喜剧片']
        },
        '煎熬': {
          allowed: ['剧情片', '灾难片', '战争片', '家庭剧'],
          forbidden: ['歌舞片', '喜剧片']
        },
        '绝望': {
          allowed: ['剧情片', '灾难片', '战争片'],
          forbidden: ['歌舞片', '喜剧片']
        },
        '惊吓': {
          allowed: ['恐怖片', '悬疑片', '惊悚片'],
          forbidden: ['歌舞片', '校园剧']
        },
        '嬉闹': {
          allowed: ['校园剧', '歌舞片', '爱情片'],
          forbidden: ['恐怖片', '灾难片']
        },
        '温馨': {
          allowed: ['爱情片', '家庭剧', '校园剧', '职场剧'],
          forbidden: ['恐怖片', '灾难片']
        },
        '对峙紧张': {
          allowed: ['警匪片', '悬疑剧', '古装剧'],
          forbidden: ['歌舞片', '校园剧']
        },
        '争论': {
          allowed: ['家庭剧', '职场剧', '校园剧', '爱情片'],
          forbidden: ['动作片', '恐怖片']
        },
        '感动': {
          allowed: ['爱情片', '家庭剧', '剧情片', '励志片'],
          forbidden: ['动作片', '喜剧片']
        },
        '治愈': {
          allowed: ['剧情片', '家庭剧', '校园剧', '职场剧'],
          forbidden: ['恐怖片', '灾难片']
        },
        '重生': {
          allowed: ['励志片', '剧情片', '魔幻片', '神话剧'],
          forbidden: ['恐怖片', '灾难片']
        },
        '守护': {
          allowed: ['爱情片', '家庭剧', '古装剧', '动作片'],
          forbidden: ['恐怖片', '喜剧片']
        },
        '转折': {
          allowed: ['剧情片', '悬疑剧', '推理剧'],
          forbidden: ['歌舞片', '喜剧片']
        },
        '揭露': {
          allowed: ['悬疑剧', '推理剧', '警匪片', '谍战片'],
          forbidden: ['歌舞片', '校园剧']
        },
        '真相': {
          allowed: ['悬疑剧', '推理剧', '剧情片'],
          forbidden: ['歌舞片', '校园剧']
        },
        // 【新增场景词匹配规则】乒乓球专项场景（体育题材专用）
        '决赛局决胜分对抗': {
          allowed: ['体育题材', '校园青春竞技题材', '励志片', '动作片'],
          forbidden: ['恐怖片', '悬疑片', '歌舞片']
        },
        '淘汰赛逆风翻盘': {
          allowed: ['体育题材', '校园青春竞技题材', '励志片', '动作片'],
          forbidden: ['恐怖片', '悬疑片', '歌舞片']
        },
        '团体赛关键场次交接': {
          allowed: ['体育题材', '校园青春竞技题材', '励志片', '家庭剧'],
          forbidden: ['恐怖片', '悬疑片', '歌舞片']
        },
        '个人专项突破训练': {
          allowed: ['体育题材', '校园青春竞技题材', '励志片', '校园剧'],
          forbidden: ['恐怖片', '悬疑片', '歌舞片']
        },
        '团队合练对抗': {
          allowed: ['体育题材', '校园青春竞技题材', '励志片', '校园剧'],
          forbidden: ['恐怖片', '悬疑片', '歌舞片']
        },
        '赛前封闭集训': {
          allowed: ['体育题材', '校园青春竞技题材', '励志片', '校园剧'],
          forbidden: ['恐怖片', '悬疑片', '歌舞片']
        },
        // 【新增场景词匹配规则】主旋律&红色题材+偶像剧+体育题材（24个）
        // 主旋律题材场景
        '国庆阅兵/升旗仪式': {
          allowed: ['主旋律题材', '红色题材', '战争片'],
          forbidden: ['爱情片', '校园剧', '偶像剧']
        },
        '革命先烈浴血奋战': {
          allowed: ['主旋律题材', '红色题材', '战争片', '古装剧'],
          forbidden: ['爱情片', '校园剧', '偶像剧']
        },
        '脱贫攻坚一线帮扶': {
          allowed: ['主旋律题材', '剧情片', '家庭剧'],
          forbidden: ['恐怖片', '悬疑片', '偶像剧']
        },
        '科研人员攻克技术难关': {
          allowed: ['主旋律题材', '励志片', '剧情片'],
          forbidden: ['恐怖片', '悬疑片', '偶像剧']
        },
        '时代楷模事迹宣讲': {
          allowed: ['主旋律题材', '剧情片', '家庭剧'],
          forbidden: ['恐怖片', '悬疑片', '偶像剧']
        },
        // 红色题材场景
        '革命根据地战略会议': {
          allowed: ['主旋律题材', '红色题材', '战争片', '古装剧'],
          forbidden: ['爱情片', '校园剧', '偶像剧']
        },
        '战场冲锋浴血奋战': {
          allowed: ['主旋律题材', '红色题材', '战争片', '古装剧'],
          forbidden: ['爱情片', '校园剧', '偶像剧']
        },
        '地下党秘密接头/传递情报': {
          allowed: ['主旋律题材', '红色题材', '悬疑剧', '谍战片'],
          forbidden: ['爱情片', '校园剧', '偶像剧']
        },
        '先烈就义慷慨陈词': {
          allowed: ['主旋律题材', '红色题材', '战争片', '古装剧'],
          forbidden: ['爱情片', '校园剧', '偶像剧']
        },
        '后辈瞻仰红色纪念馆传承': {
          allowed: ['主旋律题材', '红色题材', '剧情片', '家庭剧'],
          forbidden: ['爱情片', '校园剧', '偶像剧']
        },
        // 偶像剧场景
        '校园/职场初遇心动': {
          allowed: ['偶像剧', '爱情片', '校园剧', '职场剧'],
          forbidden: ['恐怖片', '战争片', '悬疑片']
        },
        '浪漫告白/求婚': {
          allowed: ['偶像剧', '爱情片', '校园剧', '歌舞片'],
          forbidden: ['恐怖片', '战争片', '悬疑片']
        },
        '偶像舞台表演/粉丝应援': {
          allowed: ['偶像剧', '爱情片', '歌舞片', '励志片'],
          forbidden: ['恐怖片', '战争片', '悬疑片']
        },
        '误会解开深情相拥': {
          allowed: ['偶像剧', '爱情片', '校园剧', '家庭剧'],
          forbidden: ['恐怖片', '战争片', '悬疑片']
        },
        '共同成长携手追梦': {
          allowed: ['偶像剧', '爱情片', '校园剧', '励志片'],
          forbidden: ['恐怖片', '战争片', '悬疑片']
        },
        // 体育题材场景
        '职业联赛关键场次对决': {
          allowed: ['体育题材', '校园青春竞技题材', '励志片', '动作片'],
          forbidden: ['恐怖片', '悬疑片', '歌舞片']
        },
        '赛前伤病困扰/康复训练': {
          allowed: ['体育题材', '校园青春竞技题材', '励志片', '剧情片'],
          forbidden: ['恐怖片', '悬疑片', '歌舞片']
        },
        '团队战术磨合/矛盾和解': {
          allowed: ['体育题材', '校园青春竞技题材', '励志片', '剧情片'],
          forbidden: ['恐怖片', '悬疑片', '歌舞片']
        },
        '草根选手逆袭赛场': {
          allowed: ['体育题材', '校园青春竞技题材', '励志片', '动作片'],
          forbidden: ['恐怖片', '悬疑片', '歌舞片']
        },
        '夺冠升国旗/领奖台': {
          allowed: ['体育题材', '校园青春竞技题材', '励志片', '动作片'],
          forbidden: ['恐怖片', '悬疑片', '歌舞片']
        },
        // 通用场景
        '烈士纪念日公祭': {
          allowed: ['主旋律题材', '红色题材', '战争片'],
          forbidden: ['爱情片', '校园剧', '偶像剧']
        },
        '国家荣誉表彰': {
          allowed: ['主旋律题材', '励志片', '剧情片'],
          forbidden: ['恐怖片', '悬疑片', '偶像剧']
        },
        '偶像粉丝见面会': {
          allowed: ['偶像剧', '爱情片', '校园剧'],
          forbidden: ['恐怖片', '战争片', '悬疑片']
        },
        '体育赛事颁奖仪式': {
          allowed: ['体育题材', '校园青春竞技题材', '励志片'],
          forbidden: ['恐怖片', '悬疑片', '歌舞片']
        },
        // 【新增场景词匹配规则】四大题材（武侠剧、黑帮剧、都市剧、政治题材）专用场景（20个）
        // 武侠剧场景
        '华山之巅武林大会对决': {
          allowed: ['武侠剧', '古装剧', '动作片', '奇幻片'],
          forbidden: ['都市剧', '政治题材', '校园剧']
        },
        '深山竹林隐士高人论道': {
          allowed: ['武侠剧', '古装剧', '神话剧'],
          forbidden: ['都市剧', '政治题材', '校园剧']
        },
        '江湖客栈英雄救美': {
          allowed: ['武侠剧', '古装剧', '动作片', '爱情片'],
          forbidden: ['都市剧', '政治题材', '校园剧']
        },
        '门派密室争夺武林秘籍': {
          allowed: ['武侠剧', '古装剧', '悬疑剧', '动作片'],
          forbidden: ['都市剧', '政治题材', '校园剧']
        },
        '侠客行侠仗义除暴安良': {
          allowed: ['武侠剧', '古装剧', '动作片', '励志片'],
          forbidden: ['都市剧', '政治题材', '校园剧']
        },
        // 黑帮剧场景
        '地下赌场帮派火拼': {
          allowed: ['黑帮剧', '动作片', '警匪片', '悬疑片'],
          forbidden: ['武侠剧', '政治题材', '校园剧']
        },
        '码头仓库毒品交易对峙': {
          allowed: ['黑帮剧', '警匪片', '悬疑剧', '动作片'],
          forbidden: ['武侠剧', '政治题材', '校园剧']
        },
        '警局卧底传递情报接头': {
          allowed: ['黑帮剧', '警匪片', '悬疑剧', '谍战片'],
          forbidden: ['武侠剧', '政治题材', '校园剧']
        },
        '黑帮大佬谈判桌博弈': {
          allowed: ['黑帮剧', '悬疑剧', '剧情片'],
          forbidden: ['武侠剧', '政治题材', '校园剧']
        },
        '扫黑专案组布控抓捕': {
          allowed: ['黑帮剧', '警匪片', '悬疑剧', '动作片'],
          forbidden: ['武侠剧', '政治题材', '校园剧']
        },
        // 都市剧场景
        '写字楼职场内卷加班': {
          allowed: ['都市剧', '职场剧', '剧情片'],
          forbidden: ['武侠剧', '政治题材', '古装剧']
        },
        '城市天台情侣告白 / 分手': {
          allowed: ['都市剧', '爱情片', '校园剧'],
          forbidden: ['武侠剧', '政治题材', '古装剧']
        },
        '老城区胡同家庭聚餐拌嘴': {
          allowed: ['都市剧', '家庭剧', '剧情片'],
          forbidden: ['武侠剧', '政治题材', '古装剧']
        },
        '深夜便利店陌生人温暖相遇': {
          allowed: ['都市剧', '爱情片', '剧情片'],
          forbidden: ['武侠剧', '政治题材', '古装剧']
        },
        '刑侦队会议室分析案件线索': {
          allowed: ['都市剧', '警匪片', '悬疑剧'],
          forbidden: ['武侠剧', '政治题材', '古装剧']
        },
        // 政治题材场景
        '古代朝堂君臣议政博弈': {
          allowed: ['政治题材', '古装剧', '历史权谋', '宫廷剧'],
          forbidden: ['武侠剧', '黑帮剧', '都市剧']
        },
        '现代政府会议室政策研讨': {
          allowed: ['政治题材', '现代官场', '剧情片'],
          forbidden: ['武侠剧', '黑帮剧', '都市剧']
        },
        '反腐专案组调查取证': {
          allowed: ['政治题材', '反腐风暴', '警匪片', '悬疑剧'],
          forbidden: ['武侠剧', '黑帮剧', '都市剧']
        },
        '国际外交谈判桌交锋': {
          allowed: ['政治题材', '国际政治', '剧情片', '悬疑剧'],
          forbidden: ['武侠剧', '黑帮剧', '都市剧']
        },
        '历史政变前夜暗流涌动': {
          allowed: ['政治题材', '历史权谋', '古装剧', '悬疑剧'],
          forbidden: ['武侠剧', '黑帮剧', '都市剧']
        },
        // 【新增场景词匹配规则】通用场景（4个）
        '雨夜街头对峙': {
          allowed: ['武侠剧', '黑帮剧', '都市剧（悬疑刑侦）', '动作片', '悬疑片'],
          forbidden: ['偶像剧', '歌舞片', '校园剧']
        },
        '庆功宴 / 庆功酒会': {
          allowed: ['武侠剧（门派庆功）', '都市剧（职场奋斗）', '政治题材', '励志片', '动作片'],
          forbidden: ['恐怖片', '悬疑片', '黑帮剧']
        },
        '密室密谋策划': {
          allowed: ['武侠剧（门派夺权）', '黑帮剧（帮派计划）', '政治题材（权谋）', '悬疑剧', '谍战片'],
          forbidden: ['爱情片', '歌舞片', '校园剧']
        },
        '医院生离死别': {
          allowed: ['武侠剧（侠客疗伤）', '黑帮剧（兄弟救急）', '都市剧（都市情感）', '家庭剧', '剧情片'],
          forbidden: ['动作片', '喜剧片', '歌舞片']
        },
        // 【新增场景词匹配规则】高频非标准词（14个）
        '温情日常': {
          allowed: ['爱情片', '家庭剧', '都市剧', '校园剧', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '悬疑片']
        },
        '温馨相处': {
          allowed: ['爱情片', '家庭剧', '都市剧', '校园剧', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '悬疑片']
        },
        '轻松日常': {
          allowed: ['爱情片', '家庭剧', '都市剧', '校园剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '悬疑片']
        },
        '浪漫约会': {
          allowed: ['爱情片', '偶像剧', '校园剧', '都市剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '温馨家庭': {
          allowed: ['家庭剧', '都市剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '朋友聚会': {
          allowed: ['爱情片', '都市剧', '校园剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '悬疑片']
        },
        '都市生活': {
          allowed: ['都市剧', '爱情片', '家庭剧', '偶像剧'],
          forbidden: ['武侠剧', '古装剧', '神话剧']
        },
        '校园生活': {
          allowed: ['校园剧', '爱情片', '偶像剧', '励志片'],
          forbidden: ['武侠剧', '古装剧', '战争片']
        },
        '职场日常': {
          allowed: ['都市剧', '职场剧', '爱情片', '励志片'],
          forbidden: ['武侠剧', '古装剧', '战争片']
        },
        '休闲时光': {
          allowed: ['爱情片', '家庭剧', '都市剧', '校园剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '悬疑片']
        },
        '独处时刻': {
          allowed: ['剧情片', '爱情片', '都市剧', '偶像剧'],
          forbidden: ['动作片', '歌舞片', '恐怖片']
        },
        '温暖陪伴': {
          allowed: ['爱情片', '家庭剧', '都市剧', '校园剧'],
          forbidden: ['恐怖片', '战争片', '悬疑片']
        },
        // 【新增场景词匹配规则】中性音乐专用场景（15个）
        '客观叙事': {
          allowed: ['剧情片', '纪录片', '都市剧', '职场剧'],
          forbidden: ['歌舞片', '喜剧片', '偶像剧']
        },
        '说明性镜头': {
          allowed: ['纪录片', '剧情片', '科幻片', '奇幻片'],
          forbidden: ['歌舞片', '喜剧片', '恐怖片']
        },
        '过渡场景': {
          allowed: ['剧情片', '都市剧', '家庭剧', '校园剧'],
          forbidden: ['恐怖片', '动作片', '惊悚片']
        },
        '环境氛围': {
          allowed: ['剧情片', '都市剧', '纪录片', '动画片'],
          forbidden: ['恐怖片', '惊悚片', '动作片']
        },
        '产品展示': {
          allowed: ['都市剧', '职场剧', '科幻片', '动作片'],
          forbidden: ['恐怖片', '文艺片', '历史剧']
        },
        '背景衬托': {
          allowed: ['剧情片', '都市剧', '纪录片', '动画片'],
          forbidden: ['恐怖片', '惊悚片', '悬疑片']
        },
        '日常行走': {
          allowed: ['剧情片', '都市剧', '家庭剧', '校园剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '城市街景': {
          allowed: ['剧情片', '都市剧', '科幻片', '动画片'],
          forbidden: ['武侠剧', '古装剧', '神话剧']
        },
        '自然风景': {
          allowed: ['纪录片', '剧情片', '动画片', '奇幻片'],
          forbidden: ['都市剧', '科幻片', '动作片']
        },
        '办公室日常': {
          allowed: ['职场剧', '都市剧', '剧情片', '家庭剧'],
          forbidden: ['武侠剧', '古装剧', '神话剧']
        },
        '商场环境': {
          allowed: ['都市剧', '爱情片', '家庭剧', '喜剧片'],
          forbidden: ['武侠剧', '古装剧', '战争片']
        },
        '餐厅环境': {
          allowed: ['都市剧', '爱情片', '家庭剧', '喜剧片'],
          forbidden: ['武侠剧', '古装剧', '战争片']
        },
        '酒店大堂': {
          allowed: ['都市剧', '爱情片', '家庭剧', '剧情片'],
          forbidden: ['武侠剧', '古装剧', '战争片']
        },
        '学习工作环境': {
          allowed: ['职场剧', '校园剧', '家庭剧', '都市剧'],
          forbidden: ['武侠剧', '古装剧', '战争片']
        },
        '信息展示': {
          allowed: ['纪录片', '科幻片', '剧情片', '都市剧'],
          forbidden: ['歌舞片', '喜剧片', '恐怖片']
        },
        // 【新增场景词匹配规则】情感细节场景（40个）
        '微笑示意': {
          allowed: ['爱情片', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '点头肯定': {
          allowed: ['剧情片', '职场剧', '家庭剧', '都市剧'],
          forbidden: ['恐怖片', '悬疑片', '动作片']
        },
        '摇头否认': {
          allowed: ['剧情片', '家庭剧', '悬疑片', '爱情片'],
          forbidden: ['动作片', '喜剧片', '歌舞片']
        },
        '眨眼暗示': {
          allowed: ['爱情片', '都市剧', '喜剧片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '悬疑片']
        },
        '皱眉思考': {
          allowed: ['推理剧', '悬疑片', '剧情片', '职场剧'],
          forbidden: ['喜剧片', '歌舞片', '动作片']
        },
        '撇嘴不屑': {
          allowed: ['都市剧', '爱情片', '家庭剧', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '咬唇纠结': {
          allowed: ['爱情片', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['动作片', '喜剧片', '恐怖片']
        },
        '深呼吸平复': {
          allowed: ['剧情片', '爱情片', '家庭剧', '心理惊悚'],
          forbidden: ['动作片', '喜剧片', '歌舞片']
        },
        '眼神交流': {
          allowed: ['爱情片', '家庭剧', '剧情片', '悬疑片'],
          forbidden: ['动作片', '战争片', '歌舞片']
        },
        '目光闪躲': {
          allowed: ['剧情片', '爱情片', '悬疑片', '家庭剧'],
          forbidden: ['喜剧片', '歌舞片', '动作片']
        },
        '深情凝视': {
          allowed: ['爱情片', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '悬疑片']
        },
        '怒目而视': {
          allowed: ['动作片', '家庭剧', '剧情片', '古装剧'],
          forbidden: ['爱情片', '喜剧片', '歌舞片']
        },
        '含泪微笑': {
          allowed: ['爱情片', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '默默流泪': {
          allowed: ['剧情片', '爱情片', '家庭剧', '悲剧片'],
          forbidden: ['喜剧片', '歌舞片', '动作片']
        },
        '强忍泪水': {
          allowed: ['剧情片', '爱情片', '家庭剧', '职场剧'],
          forbidden: ['喜剧片', '歌舞片', '恐怖片']
        },
        '掩面而泣': {
          allowed: ['剧情片', '爱情片', '家庭剧', '悲剧片'],
          forbidden: ['喜剧片', '动作片', '歌舞片']
        },
        '无声叹息': {
          allowed: ['剧情片', '爱情片', '家庭剧', '偶像剧'],
          forbidden: ['喜剧片', '动作片', '歌舞片']
        },
        '轻声叹息': {
          allowed: ['剧情片', '爱情片', '家庭剧', '偶像剧'],
          forbidden: ['喜剧片', '动作片', '恐怖片']
        },
        '内心独白': {
          allowed: ['剧情片', '爱情片', '传记片', '悬疑片'],
          forbidden: ['动作片', '喜剧片', '歌舞片']
        },
        '心理活动': {
          allowed: ['剧情片', '悬疑片', '心理惊悚', '爱情片'],
          forbidden: ['动作片', '喜剧片', '歌舞片']
        },
        '心理挣扎': {
          allowed: ['剧情片', '悬疑片', '心理惊悚', '爱情片'],
          forbidden: ['喜剧片', '歌舞片', '动作片']
        },
        '心理纠结': {
          allowed: ['剧情片', '爱情片', '悬疑片', '家庭剧'],
          forbidden: ['喜剧片', '歌舞片', '动作片']
        },
        '自我对话': {
          allowed: ['剧情片', '悬疑片', '心理惊悚', '爱情片'],
          forbidden: ['动作片', '喜剧片', '歌舞片']
        },
        '自我安慰': {
          allowed: ['剧情片', '爱情片', '家庭剧', '励志片'],
          forbidden: ['恐怖片', '悬疑片', '动作片']
        },
        '自我鼓励': {
          allowed: ['励志片', '剧情片', '家庭剧', '校园剧'],
          forbidden: ['恐怖片', '悬疑片', '悲剧片']
        },
        '自我怀疑': {
          allowed: ['剧情片', '悬疑片', '爱情片', '职场剧'],
          forbidden: ['喜剧片', '歌舞片', '励志片']
        },
        '心跳加速': {
          allowed: ['爱情片', '悬疑片', '惊悚片', '动作片'],
          forbidden: ['喜剧片', '歌舞片', '纪录片']
        },
        '手心出汗': {
          allowed: ['悬疑片', '惊悚片', '剧情片', '爱情片'],
          forbidden: ['喜剧片', '歌舞片', '动作片']
        },
        '紧张发抖': {
          allowed: ['悬疑片', '惊悚片', '剧情片', '爱情片'],
          forbidden: ['喜剧片', '歌舞片', '动作片']
        },
        '浑身战栗': {
          allowed: ['恐怖片', '惊悚片', '悬疑片', '剧情片'],
          forbidden: ['喜剧片', '歌舞片', '爱情片']
        },
        '身体僵硬': {
          allowed: ['恐怖片', '惊悚片', '悬疑片', '剧情片'],
          forbidden: ['喜剧片', '歌舞片', '爱情片']
        },
        '瘫软无力': {
          allowed: ['剧情片', '爱情片', '悲剧片', '灾难片'],
          forbidden: ['喜剧片', '歌舞片', '动作片']
        },
        '握紧拳头': {
          allowed: ['剧情片', '爱情片', '动作片', '励志片'],
          forbidden: ['喜剧片', '歌舞片', '恐怖片']
        },
        '松开手': {
          allowed: ['剧情片', '爱情片', '家庭剧', '悲剧片'],
          forbidden: ['动作片', '喜剧片', '歌舞片']
        },
        '拍打自己': {
          allowed: ['剧情片', '爱情片', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '揪住衣领': {
          allowed: ['动作片', '警匪片', '悬疑片', '古装剧'],
          forbidden: ['爱情片', '喜剧片', '歌舞片']
        },
        '撕扯头发': {
          allowed: ['剧情片', '悲剧片', '惊悚片', '心理惊悚'],
          forbidden: ['喜剧片', '歌舞片', '爱情片']
        },
        '咬紧牙关': {
          allowed: ['剧情片', '动作片', '励志片', '悲剧片'],
          forbidden: ['喜剧片', '歌舞片', '爱情片']
        },
        '屏住呼吸': {
          allowed: ['悬疑片', '惊悚片', '剧情片', '动作片'],
          forbidden: ['喜剧片', '歌舞片', '爱情片']
        },
        // 【新增场景词匹配规则】日常生活场景（50个）
        '早晨起床': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '刷牙洗脸': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '整理仪容': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '早餐准备': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '吃早餐': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '咖啡时光': {
          allowed: ['都市剧', '爱情片', '家庭剧', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '收拾餐具': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片'],
        },
        '打扫房间': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '洗衣服': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '晾晒衣物': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '叠衣服': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '熨烫衣物': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '做饭': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '品尝食物': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '倒酒': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '举杯': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '看电视': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '追剧': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '刷手机': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '上网': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '看书': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '阅读': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '写日记': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '写笔记': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '化妆': {
          allowed: ['都市剧', '爱情片', '家庭剧', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '护肤': {
          allowed: ['都市剧', '爱情片', '家庭剧', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '试衣服': {
          allowed: ['都市剧', '爱情片', '家庭剧', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '照镜子': {
          allowed: ['都市剧', '爱情片', '家庭剧', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '健身': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '运动': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '瑜伽': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '跑步': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '散步': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '遛狗': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '浇花': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '养植物': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '喂宠物': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '给宠物洗澡': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '陪伴宠物': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '午休': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '午睡': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '休息': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '小憩': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '睡前': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '睡前准备': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '关灯睡觉': {
          allowed: ['都市剧', '家庭剧', '剧情片', '偶像剧'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        // 【新增场景词匹配规则】职场互动场景（35个）
        '会议': {
          allowed: ['职场剧', '都市剧', '剧情片', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '歌舞片']
        },
        '同事聚餐': {
          allowed: ['职场剧', '都市剧', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '歌舞片']
        },
        '团建': {
          allowed: ['职场剧', '都市剧', '剧情片', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '歌舞片']
        },
        '培训': {
          allowed: ['职场剧', '都市剧', '剧情片', '励志片'],
          forbidden: ['恐怖片', '战争片', '歌舞片']
        },
        '面试': {
          allowed: ['职场剧', '都市剧', '剧情片', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '歌舞片']
        },
        '同事闲聊': {
          allowed: ['职场剧', '都市剧', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '歌舞片']
        },
        '电梯偶遇': {
          allowed: ['职场剧', '都市剧', '爱情片', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '歌舞片']
        },
        '请教问题': {
          allowed: ['职场剧', '都市剧', '剧情片', '励志片'],
          forbidden: ['恐怖片', '战争片', '歌舞片']
        },
        '指导新人': {
          allowed: ['职场剧', '都市剧', '剧情片', '励志片'],
          forbidden: ['恐怖片', '战争片', '歌舞片']
        },
        '交接工作': {
          allowed: ['职场剧', '都市剧', '剧情片', '励志片'],
          forbidden: ['恐怖片', '战争片', '歌舞片']
        },
        '离职谈话': {
          allowed: ['职场剧', '都市剧', '剧情片', '励志片'],
          forbidden: ['恐怖片', '战争片', '歌舞片']
        },
        '年终总结': {
          allowed: ['职场剧', '都市剧', '剧情片', '励志片'],
          forbidden: ['恐怖片', '战争片', '歌舞片']
        },
        '绩效考评': {
          allowed: ['职场剧', '都市剧', '剧情片', '励志片'],
          forbidden: ['恐怖片', '战争片', '歌舞片']
        },
        // 【新增场景词匹配规则】社交互动场景（30个）
        '相亲': {
          allowed: ['爱情片', '都市剧', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '初次见面': {
          allowed: ['爱情片', '都市剧', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '自我介绍': {
          allowed: ['爱情片', '都市剧', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '打招呼': {
          allowed: ['爱情片', '都市剧', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '送礼': {
          allowed: ['爱情片', '都市剧', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '收礼物': {
          allowed: ['爱情片', '都市剧', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '拆礼物': {
          allowed: ['爱情片', '都市剧', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '表示感谢': {
          allowed: ['爱情片', '都市剧', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '道歉': {
          allowed: ['爱情片', '都市剧', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '接受道歉': {
          allowed: ['爱情片', '都市剧', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '握手': {
          allowed: ['爱情片', '都市剧', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '拥抱': {
          allowed: ['爱情片', '都市剧', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '拍肩': {
          allowed: ['爱情片', '都市剧', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '击掌': {
          allowed: ['爱情片', '都市剧', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '挥手告别': {
          allowed: ['爱情片', '都市剧', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '鞠躬': {
          allowed: ['爱情片', '都市剧', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '敬礼': {
          allowed: ['爱情片', '都市剧', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '点头致意': {
          allowed: ['爱情片', '都市剧', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        '微笑致意': {
          allowed: ['爱情片', '都市剧', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '动作片']
        },
        // 【新增场景词匹配规则】交通出行场景（25个）
        '坐地铁': {
          allowed: ['都市剧', '爱情片', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '古装剧']
        },
        '坐公交': {
          allowed: ['都市剧', '爱情片', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '古装剧']
        },
        '打车': {
          allowed: ['都市剧', '爱情片', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '古装剧']
        },
        '开车': {
          allowed: ['都市剧', '爱情片', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '古装剧']
        },
        '堵车': {
          allowed: ['都市剧', '爱情片', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '古装剧']
        },
        '停车场': {
          allowed: ['都市剧', '爱情片', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '古装剧']
        },
        '坐飞机': {
          allowed: ['都市剧', '爱情片', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '古装剧']
        },
        '机场送别': {
          allowed: ['都市剧', '爱情片', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '古装剧']
        },
        '机场接人': {
          allowed: ['都市剧', '爱情片', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '古装剧']
        },
        '坐高铁': {
          allowed: ['都市剧', '爱情片', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '古装剧']
        },
        '坐火车': {
          allowed: ['都市剧', '爱情片', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '古装剧']
        },
        '骑自行车': {
          allowed: ['都市剧', '爱情片', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '古装剧']
        },
        '步行': {
          allowed: ['都市剧', '爱情片', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '古装剧']
        },
        // 【新增场景词匹配规则】购物消费场景（25个）
        '逛超市': {
          allowed: ['都市剧', '爱情片', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '古装剧']
        },
        '逛商场': {
          allowed: ['都市剧', '爱情片', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '古装剧']
        },
        '试穿': {
          allowed: ['都市剧', '爱情片', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '古装剧']
        },
        '买衣服': {
          allowed: ['都市剧', '爱情片', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '古装剧']
        },
        '逛街': {
          allowed: ['都市剧', '爱情片', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '古装剧']
        },
        '网购': {
          allowed: ['都市剧', '爱情片', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '古装剧']
        },
        '快递收货': {
          allowed: ['都市剧', '爱情片', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '古装剧']
        },
        '拆快递': {
          allowed: ['都市剧', '爱情片', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '古装剧']
        },
        '咖啡店': {
          allowed: ['都市剧', '爱情片', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '古装剧']
        },
        '奶茶店': {
          allowed: ['都市剧', '爱情片', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '古装剧']
        },
        '餐厅用餐': {
          allowed: ['都市剧', '爱情片', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '古装剧']
        },
        '点外卖': {
          allowed: ['都市剧', '爱情片', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '古装剧']
        },
        '超市排队': {
          allowed: ['都市剧', '爱情片', '家庭剧', '喜剧片'],
          forbidden: ['恐怖片', '战争片', '古装剧']
        },
        // 【新增场景词匹配规则】新兴影视题材场景（50个）
        '虚拟现实体验': {
          allowed: ['科幻片', '奇幻片', '剧情片', '动作片'],
          forbidden: ['古装剧', '战争片', '历史剧']
        },
        '元宇宙登录': {
          allowed: ['科幻片', '奇幻片', '剧情片', '动作片'],
          forbidden: ['古装剧', '战争片', '历史剧']
        },
        '虚拟化身': {
          allowed: ['科幻片', '奇幻片', '剧情片', '动作片'],
          forbidden: ['古装剧', '战争片', '历史剧']
        },
        '虚拟世界探索': {
          allowed: ['科幻片', '奇幻片', '剧情片', '动作片'],
          forbidden: ['古装剧', '战争片', '历史剧']
        },
        '虚拟社交': {
          allowed: ['科幻片', '奇幻片', '剧情片', '爱情片'],
          forbidden: ['古装剧', '战争片', '历史剧']
        },
        '数字身份': {
          allowed: ['科幻片', '奇幻片', '剧情片', '动作片'],
          forbidden: ['古装剧', '战争片', '历史剧']
        },
        '虚拟婚礼': {
          allowed: ['科幻片', '奇幻片', '剧情片', '爱情片'],
          forbidden: ['古装剧', '战争片', '历史剧']
        },
        '虚拟演唱会': {
          allowed: ['科幻片', '奇幻片', '剧情片', '歌舞片'],
          forbidden: ['古装剧', '战争片', '历史剧']
        },
        '虚拟会议': {
          allowed: ['科幻片', '奇幻片', '剧情片', '职场剧'],
          forbidden: ['古装剧', '战争片', '历史剧']
        },
        '末日废墟': {
          allowed: ['科幻片', '灾难片', '剧情片', '动作片'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '资源争夺': {
          allowed: ['科幻片', '灾难片', '剧情片', '动作片'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '废土流浪': {
          allowed: ['科幻片', '灾难片', '剧情片', '动作片'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '避难所生活': {
          allowed: ['科幻片', '灾难片', '剧情片', '动作片'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '末日团队': {
          allowed: ['科幻片', '灾难片', '剧情片', '动作片'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '病毒爆发初期': {
          allowed: ['科幻片', '灾难片', '剧情片', '动作片'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '城市封锁': {
          allowed: ['科幻片', '灾难片', '剧情片', '动作片'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '末世重建': {
          allowed: ['科幻片', '灾难片', '剧情片', '动作片'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '幻觉': {
          allowed: ['科幻片', '恐怖片', '悬疑片', '心理惊悚'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '精神崩溃': {
          allowed: ['科幻片', '恐怖片', '悬疑片', '心理惊悚'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '记忆错乱': {
          allowed: ['科幻片', '恐怖片', '悬疑片', '心理惊悚'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '现实与虚幻': {
          allowed: ['科幻片', '恐怖片', '悬疑片', '心理惊悚'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '梦境入侵': {
          allowed: ['科幻片', '恐怖片', '悬疑片', '心理惊悚'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '心理创伤': {
          allowed: ['科幻片', '恐怖片', '悬疑片', '心理惊悚'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '心理暗示': {
          allowed: ['科幻片', '恐怖片', '悬疑片', '心理惊悚'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '催眠场景': {
          allowed: ['科幻片', '恐怖片', '悬疑片', '心理惊悚'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '心理操纵': {
          allowed: ['科幻片', '恐怖片', '悬疑片', '心理惊悚'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '心理博弈': {
          allowed: ['科幻片', '恐怖片', '悬疑片', '心理惊悚'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '人格分裂': {
          allowed: ['科幻片', '恐怖片', '悬疑片', '心理惊悚'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '潜意识觉醒': {
          allowed: ['科幻片', '恐怖片', '悬疑片', '心理惊悚'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '心理医生问诊': {
          allowed: ['科幻片', '恐怖片', '悬疑片', '心理惊悚'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '精神病房': {
          allowed: ['科幻片', '恐怖片', '悬疑片', '心理惊悚'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '人工智能觉醒': {
          allowed: ['科幻片', '剧情片', '动作片', '悬疑片'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '人机对话': {
          allowed: ['科幻片', '剧情片', '动作片', '悬疑片'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '人工智能助手': {
          allowed: ['科幻片', '剧情片', '动作片', '悬疑片'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '算法对抗': {
          allowed: ['科幻片', '剧情片', '动作片', '悬疑片'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '数据窃取': {
          allowed: ['科幻片', '剧情片', '动作片', '悬疑片'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '数字追踪': {
          allowed: ['科幻片', '剧情片', '动作片', '悬疑片'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '监控无处不在': {
          allowed: ['科幻片', '剧情片', '动作片', '悬疑片'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '大数据分析': {
          allowed: ['科幻片', '剧情片', '动作片', '悬疑片'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '虚拟偶像': {
          allowed: ['科幻片', '剧情片', '动作片', '歌舞片'],
          forbidden: ['古装剧', '战争片', '历史剧']
        },
        // 【新增场景词匹配规则】跨文化场景（30个）
        '异国街头': {
          allowed: ['都市剧', '爱情片', '家庭剧', '剧情片'],
          forbidden: ['古装剧', '战争片', '历史剧']
        },
        '海外生活': {
          allowed: ['都市剧', '爱情片', '家庭剧', '剧情片'],
          forbidden: ['古装剧', '战争片', '历史剧']
        },
        '跨国出差': {
          allowed: ['都市剧', '爱情片', '家庭剧', '剧情片'],
          forbidden: ['古装剧', '战争片', '历史剧']
        },
        '异国求学': {
          allowed: ['都市剧', '爱情片', '家庭剧', '剧情片'],
          forbidden: ['古装剧', '战争片', '历史剧']
        },
        '语言障碍': {
          allowed: ['都市剧', '爱情片', '家庭剧', '剧情片'],
          forbidden: ['古装剧', '战争片', '历史剧']
        },
        '文化冲突': {
          allowed: ['都市剧', '爱情片', '家庭剧', '剧情片'],
          forbidden: ['古装剧', '战争片', '历史剧']
        },
        '文化融合': {
          allowed: ['都市剧', '爱情片', '家庭剧', '剧情片'],
          forbidden: ['古装剧', '战争片', '历史剧']
        },
        '外国朋友': {
          allowed: ['都市剧', '爱情片', '家庭剧', '剧情片'],
          forbidden: ['古装剧', '战争片', '历史剧']
        },
        '外交场合': {
          allowed: ['都市剧', '政治题材', '剧情片', '动作片'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '国际合作': {
          allowed: ['都市剧', '政治题材', '剧情片', '动作片'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        },
        '签证面试': {
          allowed: ['都市剧', '爱情片', '家庭剧', '剧情片'],
          forbidden: ['古装剧', '战争片', '历史剧']
        },
        '移民': {
          allowed: ['都市剧', '爱情片', '家庭剧', '剧情片'],
          forbidden: ['古装剧', '战争片', '历史剧']
        },
        '海外置业': {
          allowed: ['都市剧', '爱情片', '家庭剧', '剧情片'],
          forbidden: ['古装剧', '战争片', '历史剧']
        },
        '跨国公司': {
          allowed: ['都市剧', '职场剧', '剧情片', '动作片'],
          forbidden: ['古装剧', '战争片', '历史剧']
        },
        '国际组织': {
          allowed: ['都市剧', '政治题材', '剧情片', '动作片'],
          forbidden: ['古装剧', '爱情片', '喜剧片']
        }
      },
    },

    // 合并核心词和扩展词
    get allMapping() {
      return { ...this.core.mapping, ...this.extended.mapping };
    },

    // 合并核心词和扩展词列表
    get allStandardList() {
      return [...this.core.standardList, ...this.extended.standardList];
    },

    // 合并所有影视类型映射
    get allFilmTypeMapping() {
      return { ...this.core.filmTypeMapping, ...this.extended.filmTypeMapping };
    },

    // 验证场景词与影视类型是否匹配
    validateSceneMatch(scene: string, filmType: string): boolean {
      // 标准化场景词
      const standardScene = this.standardize(scene);

      // 如果场景词无效，返回 false
      if (!this.allStandardList.includes(standardScene)) {
        return false;
      }

      // 检查影视类型是否在允许列表中
      const mapping = (this.allFilmTypeMapping as Record<string, { allowed: string[] } | undefined>)[standardScene];
      if (!mapping) {
        return false;
      }

      return mapping.allowed.includes(filmType);
    },

    // 标准化场景词
    standardize(scene: string): string {
      // 首先尝试直接匹配
      for (const [key, value] of Object.entries(this.allMapping)) {
        if (scene.includes(key) || key.includes(scene)) {
          return value;
        }
      }

      // 如果没有匹配，返回未识别场景
      return '未识别场景';
    },

    // 检查是否为核心词
    isCoreScene(scene: string): boolean {
      const standardScene = this.standardize(scene);
      return this.core.standardList.includes(standardScene);
    },

    // 检查是否为扩展词
    isExtendedScene(scene: string): boolean {
      const standardScene = this.standardize(scene);
      return this.extended.standardList.includes(standardScene);
    }
  },

  // 配音建议标准词
  // 规则：核心词（80%覆盖）+ 扩展词（20%覆盖），只使用标准词，不用近义词
  dubbingSuggestions: {
    // 核心配音建议词（覆盖80%情况，严格绑定影视类型）
    core: {
      // 核心配音建议词及其近义词映射
      mapping: {
        // 对话
        '对话': '对话',
        '对白': '对话',
        '交谈': '对话',
        '对话场景': '对话',

        // 独白
        '独白': '独白',
        '内心独白': '独白',
        '心理独白': '独白',
        '独白戏': '独白',

        // 旁白
        '旁白': '旁白',
        '画外音': '旁白',
        '解说': '旁白',
        '旁白解说': '旁白',
      },
      // 核心配音建议词列表
      standardList: ['对话', '独白', '旁白'],

      // 配音建议词与影视类型的匹配规则
      filmTypeMapping: {
        '对话': {
          allowed: ['爱情片', '家庭剧', '职场剧（医护题材）', '职场剧（警察题材）', '职场剧（律政题材）', '职场剧（美食题材）', '校园剧', '剧情片'],
          forbidden: ['动作片', '灾难片', '战争片']
        },
        '独白': {
          allowed: ['爱情片', '剧情片', '传记片', '校园剧'],
          forbidden: ['动作片', '喜剧片']
        },
        '旁白': {
          allowed: ['纪录片', '传记片', '剧情片', '古装剧'],
          forbidden: ['动作片', '歌舞片']
        }
      },
    },

    // 扩展配音建议词（覆盖20%情况，人工确认后入库）
    // 这些词通过自动扩充机制从高频未识别内容中提取
    extended: {
      // 扩展配音建议词及其近义词映射
      mapping: {
        // 呐喊
        '呐喊': '呐喊',
        '呼喊': '呐喊',
        '尖叫': '呐喊',
        '嘶吼': '呐喊',

        // 争吵
        '争吵': '争吵',
        '怒骂': '争吵',
        '对骂': '争吵',
        '激烈争吵': '争吵',

        // 呼唤
        '呼唤': '呼唤',
        '呼喊名字': '呼唤',
        '呼唤声': '呼唤',

        // 歌唱
        '歌唱': '歌唱',
        '演唱': '歌唱',
        '唱歌': '歌唱',
        '歌曲演唱': '歌唱',

        // 念白
        '念白': '念白',
        '朗读': '念白',
        '朗诵': '念白',
        '念诵': '念白',
      },
      // 扩展配音建议词列表
      standardList: ['呐喊', '争吵', '呼唤', '歌唱', '念白'],

      // 扩展配音建议词与影视类型的匹配规则
      filmTypeMapping: {
        '呐喊': {
          allowed: ['动作片', '战争片', '灾难片', '恐怖片'],
          forbidden: ['校园剧', '职场剧（美食题材）']
        },
        '争吵': {
          allowed: ['家庭剧', '爱情片', '职场剧（医护题材）', '职场剧（警察题材）', '校园剧'],
          forbidden: ['歌舞片', '纪录片']
        },
        '呼唤': {
          allowed: ['爱情片', '剧情片', '古装剧', '灾难片'],
          forbidden: ['纪录片', '传记片']
        },
        '歌唱': {
          allowed: ['歌舞片', '音乐剧', '古装剧', '校园剧'],
          forbidden: ['纪录片', '警匪片', '悬疑片']
        },
        '念白': {
          allowed: ['古装剧', '神话剧', '文艺片', '历史片'],
          forbidden: ['动作片', '科幻片']
        }
      },
    },

    // 合并核心词和扩展词
    get allMapping() {
      return { ...this.core.mapping, ...this.extended.mapping };
    },

    // 合并核心词和扩展词列表
    get allStandardList() {
      return [...this.core.standardList, ...this.extended.standardList];
    },

    // 合并所有影视类型映射
    get allFilmTypeMapping() {
      return { ...this.core.filmTypeMapping, ...this.extended.filmTypeMapping };
    },

    // 验证配音建议词与影视类型是否匹配
    validateDubbingMatch(dubbing: string, filmType: string): boolean {
      // 标准化配音建议词
      const standardDubbing = this.standardize(dubbing);

      // 如果配音建议词无效，返回 false
      if (!this.allStandardList.includes(standardDubbing)) {
        return false;
      }

      // 检查影视类型是否在允许列表中
      const mapping = (this.allFilmTypeMapping as Record<string, { allowed: string[] } | undefined>)[standardDubbing];
      if (!mapping) {
        return false;
      }

      return mapping.allowed.includes(filmType);
    },

    // 标准化配音建议词
    standardize(dubbing: string): string {
      // 首先尝试直接匹配
      for (const [key, value] of Object.entries(this.allMapping)) {
        if (dubbing.includes(key) || key.includes(dubbing)) {
          return value;
        }
      }

      // 如果没有匹配，返回未分类
      return '未分类';
    },

    // 检查是否为核心词
    isCoreDubbing(dubbing: string): boolean {
      const standardDubbing = this.standardize(dubbing);
      return this.core.standardList.includes(standardDubbing);
    },

    // 检查是否为扩展词
    isExtendedDubbing(dubbing: string): boolean {
      const standardDubbing = this.standardize(dubbing);
      return this.extended.standardList.includes(standardDubbing);
    }
  },

  // 风格标签标准化
  // 用于标识音乐的风格特征，如"青春向"、"活力向"等
  // 这些标签通常与特定题材（如青春片、偶像剧、体育题材）强关联
  styleTags: {
    mapping: {
      // 青春向
      '青春向': '青春向',
      '青春风格': '青春向',
      '青春感': '青春向',
      '青春题材': '青春向',

      // 活力向
      '活力向': '活力向',
      '活力风格': '活力向',
      '活力感': '活力向',
      '活力题材': '活力向',
    },
    standardList: ['青春向', '活力向'],
  },
};

// 验证场景词与影视类型是否匹配
export function validateSceneMatch(scene: string, filmType: string): boolean {
  return STANDARD_TERMS.standardScenes.validateSceneMatch(scene, filmType);
}

// 标准化场景词（独立函数）
export function standardizeScene(scene: string): string {
  return STANDARD_TERMS.standardScenes.standardize(scene);
}

// 检查是否为标准场景词
export function isStandardScene(scene: string): boolean {
  const standardScene = standardizeScene(scene);
  return STANDARD_TERMS.standardScenes.allStandardList.includes(standardScene);
}

// 术语标准化函数
export function standardizeTerm(category: 'mood' | 'style' | 'instruments' | 'filmGenres' | 'era' | 'sceneTypes' | 'moodExtended' | 'standardScenes', text: string): string {
  const categoryData = STANDARD_TERMS[category] as any;

  if (!categoryData) {
    return text;
  }

  // 标准场景词使用专用方法
  if (category === 'standardScenes' && typeof categoryData.standardize === 'function') {
    return categoryData.standardize(text);
  }

  // 如果文本为空或 "未识别"，直接返回
  if (!text || text.trim() === '' || text === '未识别') {
    return '未识别';
  }

  // 首先尝试直接匹配
  const mapping = categoryData.mapping;
  for (const [key, value] of Object.entries(mapping)) {
    if (text.includes(key) || key.includes(text)) {
      return value as string;
    }
  }

  // 如果没有匹配，返回 "未识别" 而不是原文
  return '未识别';
}

// 批量标准化
export function standardizeTerms(category: 'mood' | 'style' | 'instruments' | 'filmGenres' | 'era' | 'sceneTypes' | 'moodExtended' | 'standardScenes', texts: string[]): string[] {
  return texts.map(text => standardizeTerm(category, text));
}

// 标准化完整分析结果
export interface StandardizedAnalysisResult {
  mood: {
    primary: string;
    originalPrimary?: string; // 映射前的原始情绪词，用于显示参考
    intensity: string;
    trajectory: string;
    emotionalDimensions: {
      happiness: number;
      sadness: number;
      tension: number;
      romance: number;
      epic: number;
    };
  };
  style: {
    primary: string;
    subGenre: string;
    genreBlending: string;
    era: string;
  };
  musicalStructure: {
    form: string;
    chorus: string;
    bridge: string;
    repeatPatterns: string;
  };
  harmony: {
    tonality: string;
    key: string;
    chordProgression: string;
    modulation: string;
  };
  rhythm: {
    timeSignature: string;
    rhythmPattern: string;
    groove: string;
  };
  instruments: {
    primary: string[];
    accompaniment: string[];
    percussion: string[];
    electronicElements: string;
    timbre: string;
  };
  musicOrigin: {
    confidenceLevel: '高' | '中' | '低';
    sourceType: '影视原声' | '专辑' | '独立单曲' | '综艺' | '游戏配乐' | '广告' | '不确定';
    filmOrTV?: {
      name?: string;
      episode?: string;
      scene?: string;
      platform?: string;
    };
    album?: {
      name?: string;
      releaseYear?: string;
      label?: string;
    };
    creators?: {
      composer?: string;
      arranger?: string;
      singer?: string;
      lyricist?: string;
    };
    reasoning: string;
    uncertaintyReason?: string;
  };
  filmMusic: {
    suitableGenres: string[];
    scenes: Array<{
      type: string;
      description: string;
      emotionalImpact: string;
      usageTips: string;
    }>;
    turningPoints: string;
    characterTheme: {
      suitable: string;
      characterType: string;
      storyArc: string;
    };
    atmosphere: string;
    emotionalGuidance: string;
  };
  culturalContext: {
    origin: string;
    influences: string[];
    modernInterpretation: string;
  };
}

export function standardizeAnalysisResult(result: StandardizedAnalysisResult): StandardizedAnalysisResult {
  // 处理 culturalContext，如果不存在或 influences 不存在则提供默认值
  const culturalContext = result.culturalContext
    ? {
        ...result.culturalContext,
        influences: result.culturalContext.influences
          ? result.culturalContext.influences.map(influence =>
              standardizeTerm('style', influence)
            )
          : [],
      }
    : {
        origin: '未指定',
        influences: [],
        modernInterpretation: '未指定',
      };

  // 保存原始情绪词（映射前的词）
  const originalMoodPrimary = result.mood.primary;
  const standardizedMoodPrimary = standardizeTerm('mood', result.mood.primary);

  return {
    ...result,
    mood: {
      ...result.mood,
      primary: standardizedMoodPrimary,
      // 如果映射后的词与原词不同，保存原词
      ...(originalMoodPrimary !== standardizedMoodPrimary ? { originalPrimary: originalMoodPrimary } : {}),
    },
    style: {
      ...result.style,
      primary: standardizeTerm('style', result.style.primary),
      era: standardizeTerm('era', result.style.era),
    },
    instruments: {
      ...result.instruments,
      primary: standardizeTerms('instruments', result.instruments.primary),
      accompaniment: standardizeTerms('instruments', result.instruments.accompaniment),
      percussion: standardizeTerms('instruments', result.instruments.percussion),
    },
    filmMusic: {
      ...result.filmMusic,
      suitableGenres: standardizeTerms('filmGenres', result.filmMusic.suitableGenres),
      scenes: result.filmMusic.scenes.map(scene => ({
        ...scene,
        type: standardizeTerm('standardScenes', scene.type),
      })),
    },
    culturalContext,
  };
}
