# 人机协作功能使用指南

## 🎯 新增功能概览

本次优化为音乐情绪识别系统增加了多项人机协作功能，帮助用户更好地理解、反馈和改进AI识别结果。

---

## 📍 功能入口位置

### 1. 反馈系统（已存在）
**位置**：数据库管理 → 分析结果表格

**操作步骤**：
1. 点击右上角"数据库管理"按钮
2. 在搜索结果中找到需要反馈的音乐记录
3. 每行记录右侧有三个按钮：
   - ✅ 绿色按钮：标记为"识别准确"
   - ❌ 红色按钮：标记为"需要修正"
   - ⚠️ 黄色按钮（新增）：标记为"部分正确"

**功能说明**：
- **识别准确**：AI分析结果完全正确，无需修改
- **需要修正**：AI识别有误，需要手动修正字段
- **部分正确**：部分结果准确，需要补充说明

---

### 2. 反馈对话框优化（已优化）
**触发方式**：点击反馈按钮后自动弹出

**新增功能**：

#### 🔹 自动填充AI识别结果
- 打开"需要修正"对话框时，系统自动填充当前记录的AI识别结果
- 原识别值自动填充，无需手动输入
- 只需填写"修正为"字段即可

#### 🔹 反馈历史查看
- 对话框底部显示该记录的所有历史反馈
- 点击"反馈历史"可展开/折叠
- 显示每次反馈的时间、类型、处理状态
- 展示修正前后的对比

**使用建议**：
- 查看历史反馈可以了解之前的修正内容
- 避免重复提交相同的问题

---

### 3. 术语帮助卡片（新增）
**位置**：分析结果中的术语标签

**操作步骤**：
1. 在分析结果中，找到"情绪识别"、"影视配乐"、"场景建议"等标签
2. 点击任意可点击的术语（鼠标悬停时会显示下划线）
3. 自动弹出术语帮助卡片

**功能说明**：
- 显示术语的详细定义
- 提供典型案例和使用场景
- 展示相关术语和使用技巧
- 支持情绪、风格、影片类型、场景、乐器5个类别

**示例**：
- 点击"浪漫"→查看浪漫情绪的定义、使用场景、相关术语
- 点击"校园剧"→了解校园剧的适用范围和搭配建议

---

### 4. 智能错误处理面板（新增）
**位置**：页面顶部工具栏

**操作步骤**：
1. 滚动到页面顶部
2. 在"数据库管理"按钮旁边，找到"⚠️ 错误处理"按钮
3. 点击按钮打开错误处理面板

**功能说明**：
- 智能分类错误类型（网络、音频、AI、数据库、验证等）
- 提供详细的解决方案和预防措施
- 显示相关错误提示
- 可查看详细错误信息

**使用场景**：
- 系统出现错误时，可以打开面板查看诊断和解决方案
- 了解如何避免常见错误
- 学习错误处理的最佳实践

---

### 5. 数据分析仪表盘（已存在，已优化）
**位置**：页面顶部工具栏

**操作步骤**：
1. 滚动到页面顶部
2. 点击"📊 数据分析"按钮

**功能说明**：
- 查看总体统计数据（总反馈数、准确率等）
- 按影片类型统计准确率
- 按情绪统计准确率
- 查看准确率趋势（最近30天）**已优化**
- 查看常见错误分析

**新增优化**：
- 准确率趋势图增加了图例说明
- 优化了Y轴刻度和参考线
- 改进了悬停提示样式
- 添加了日期标签显示

---

## 🎨 界面视觉标识

### 可点击的术语
- 鼠标悬停时显示紫色下划线
- 点击后弹出帮助卡片
- 未识别的术语不可点击

### 反馈按钮
- ✅ 绿色：识别准确
- ❌ 红色：需要修正
- ⚠️ 黄色：部分正确

### 工具栏按钮
- 📊 数据分析（紫色）
- ⚠️ 错误处理（黄色）

---

## 💡 使用建议

### 1. 提交高质量反馈
- 准确描述问题所在
- 使用修正功能提供正确值
- 查看历史反馈避免重复

### 2. 学习术语知识
- 遇到不懂的术语，点击查看解释
- 参考典型案例了解使用场景
- 学习搭配建议

### 3. 利用错误处理
- 遇到错误时，打开错误处理面板
- 按照解决方案操作
- 学习预防措施避免重复错误

### 4. 关注数据分析
- 定期查看准确率趋势
- 了解哪些类型的音乐识别准确
- 针对准确率低的类别提供更多反馈

---

## 🔧 技术细节

### 反馈数据存储
所有反馈数据存储在数据库的`user_feedback`表中，包含：
- 反馈类型（correct/incorrect/partial）
- 修正内容
- 用户说明
- 处理状态

### 术语帮助数据
术语帮助数据存储在`src/lib/tutorialSystem.ts`中，包含：
- 定义
- 案例
- 使用场景
- 相关术语
- 使用技巧

### 错误处理机制
错误处理通过`ErrorPanel`组件实现，支持：
- 智能错误分类
- 解决方案推荐
- 预防措施提示
- 详细错误信息展示

---

## 📞 反馈与支持

如果您在使用过程中遇到问题或有改进建议，欢迎通过以下方式反馈：

1. **提交反馈**：使用系统内置的反馈功能
2. **联系支持**：通过错误处理面板查看常见问题
3. **查看帮助**：点击右上角"功能说明"按钮

---

## 📝 更新日志

### v2.0.0 (2026-01-18)
- ✅ 新增术语帮助卡片功能
- ✅ 新增智能错误处理面板
- ✅ 优化反馈对话框，支持自动填充
- ✅ 新增反馈历史查看功能
- ✅ 优化准确率趋势图显示
- ✅ 改进用户体验和界面设计

---

**祝您使用愉快！** 🎉
