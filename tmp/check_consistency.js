// 标签词一致性检查脚本
// 对比标准词库（standardTerms.ts）与数据库实际存储数据

// ===== 标准词库定义（从standardTerms.ts提取） =====
const STANDARD_TERMS = {
  // 情绪标签标准词
  mood: {
    standardList: [
      '欢快', '悲伤', '紧张', '浪漫', '史诗', '宁静', '激昂', '悬疑',
      '惊悚', '压抑', '阴森', '沉稳', '励志', '酸涩', '舒缓', '热血',
      '冷静', '悲壮', '专注', '急促', '温馨', '治愈', '震撼', '神秘',
      '空灵', '大气', '庄重', '轻快', '青涩', '甜蜜', '振奋', '哀愁',
      '惊恐', '柔情', '壮丽', '安详', '热情', '诡谲', '骇然', '沉郁',
      '稳健', '昂扬', '酸楚', '柔和', '豪迈', '沉着', '悲怆', '聚精会神',
      '匆忙', '暖意', '抚慰', '震撼人心', '奥秘', '飘逸', '恢弘', '庄严',
      '轻盈', '青涩纯真', '甜', '惊骇', '绝望', '感动落泪', '煎熬痛苦',
      '嬉闹玩耍', '对峙紧张', '争论激烈', '转折点', '真相大白', '守护保护',
      '重生蜕变', '告别离别', '祈祷祝福', '庆祝欢庆', '谈心倾诉', '独处沉思',
      '暗杀行动', '训练特训', '打斗格斗', '飙车竞技', '跟踪监视', '梦境梦回',
      '比赛竞技', '揭露揭示',
      // 来自影视场景词库的新增情绪词（65个，已去重）
      '不甘', '不舍', '严谨', '亢奋', '亲切', '伤感', '俏皮', '决绝',
      '冷酷', '凝重', '勇敢', '勇猛', '华丽', '喜悦', '坚定', '好奇',
      '委屈', '孤寂', '孤独', '崩溃', '平和', '幸福', '心动', '怅然',
      '悲痛', '惶恐', '愉悦', '愤怒', '放松', '敬畏', '无助', '无奈',
      '无畏', '暗黑', '期待', '欢乐', '欣慰', '正义', '沉重', '洒脱',
      '深情', '温柔', '满足', '激动', '热烈', '热闹', '焦灼', '焦虑',
      '狗血', '疲惫', '痛苦', '眷恋', '睿智', '窒息', '缅怀', '羞涩',
      '肃穆', '自豪', '荣耀', '解气', '轻松', '释然', '隐忍',
      // 主旋律和红色题材专用情绪词（2个）
      '赤诚', '崇敬',
      // 辅助情绪词 - 青春向题材专用（2个）
      '青春', '活力',
      // 核心情绪词
      '感动', '孤傲', '狠戾', '义气', '烟火气', '共情', '肃杀', '博弈', '威严'
    ],
    // 映射表（同义词映射）
    mapping: {
      '明快': '欢快',  // 已知的不一致映射
    }
  },

  // 乐器标签标准词
  instruments: {
    standardList: [
      '钢琴', '吉他', '电吉他', '小提琴', '大提琴', '萨克斯', '长笛', '单簧管',
      '小号', '合成器', '人声', '鼓', '贝斯', '电子鼓', '镲片', '键盘', '管风琴', '电子琴'
    ],
    // 映射表
    mapping: {
      'Piano': '钢琴', '电钢琴': '钢琴', '电子钢琴': '钢琴',
      'Guitar': '吉他', '木吉他': '吉他', '钢弦吉他': '吉他',
      'Electric Guitar': '电吉他',
      'Violin': '小提琴',
      'Cello': '大提琴',
      'Saxophone': '萨克斯', 'Sax': '萨克斯',
      'Flute': '长笛',
      'Clarinet': '单簧管',
      'Trumpet': '小号',
      'Synthesizer': '合成器', 'Synth': '合成器', '电子合成器': '合成器',
      'Vocal': '人声', '歌唱': '人声', '演唱': '人声',
      'Drums': '鼓', '架子鼓': '鼓', '爵士鼓': '鼓',
      'Bass': '贝斯', '低音吉他': '贝斯', '电贝斯': '贝斯',
      'Electronic Drums': '电子鼓',
      'Cymbal': '镲片',
      'Double Bass': '贝斯',
      'Keyboard': '键盘', '电键盘': '键盘',
      'Organ': '管风琴',
      'Electronic Organ': '电子琴', 'Digital Piano': '电子琴'
    }
  },

  // 音乐风格标签标准词
  style: {
    traditionalList: ['古典', '流行', '电子', '摇滚', '爵士', '民谣', '嘻哈', 'R&B', '金属', '新世纪', '乡村', '雷鬼'],
    atmosphericList: ['场景氛围'],
    // 映射表
    traditionalMapping: {
      '古典音乐': '古典', '管弦乐': '古典', '交响乐': '古典', '巴洛克': '古典',
      '流行音乐': '流行', '流行曲': '流行', 'Pop': '流行', '流行乐': '流行',
      '电子音乐': '电子', '电子乐': '电子', 'EDM': '电子', '电音': '电子',
      '摇滚音乐': '摇滚', 'Rock': '摇滚', '摇滚乐': '摇滚',
      '爵士音乐': '爵士', '爵士乐': '爵士', 'Jazz': '爵士',
      '民谣音乐': '民谣', '民谣乐': '民谣', 'Folk': '民谣',
      'Hip-Hop': '嘻哈', '说唱': '嘻哈', 'Rap': '嘻哈',
      '节奏布鲁斯': 'R&B', '蓝调': 'R&B',
      '重金属': '金属', 'Metal': '金属',
      'New Age': '新世纪', '新世纪音乐': '新世纪',
      'Country': '乡村', '乡村音乐': '乡村',
      'Reggae': '雷鬼', '雷鬼音乐': '雷鬼'
    },
    atmosphericMapping: {
      '氛围音乐': '场景氛围', '环境音乐': '场景氛围', 'Ambient': '场景氛围',
      '史诗氛围': '场景氛围', '史诗感音乐': '场景氛围', '史诗风格': '场景氛围',
      '电影氛围': '场景氛围', '电影感音乐': '场景氛围', '电影风格': '场景氛围',
      '励志流行': '场景氛围', '励志音乐': '场景氛围', '正能量音乐': '场景氛围',
      '疗愈音乐': '场景氛围', '治愈音乐': '场景氛围', '放松音乐': '场景氛围',
      '冥想音乐': '场景氛围', '冥想曲': '场景氛围', '禅意音乐': '场景氛围',
      '背景音乐': '场景氛围', 'BGM': '场景氛围', '配乐': '场景氛围',
      '电影原声': '场景氛围', '原声带': '场景氛围', 'OST': '场景氛围',
      '青春向': '场景氛围', '青春风格': '场景氛围', '青春氛围': '场景氛围',
      '活力向': '场景氛围', '活力风格': '场景氛围', '活力氛围': '场景氛围'
    }
  },

  // 影视配乐标签标准词
  filmTypes: {
    getAllStandardTypes: function() {
      const allTypes = [];
      const standardTypes = [
        '恐怖片',
        '职场剧',
        '魔幻片',
        '古装剧',
        '神话剧',
        '推理剧',
        '励志片',
        '歌舞片',
        '校园剧',
        '灾难片',
        '战争片',
        '人物传记片',
        '动漫',
        '超级英雄题材',
        '西部题材',
        '太空歌剧题材',
        '狗血伦理题材',
        '治愈系田园题材',
        '僵尸/丧尸题材',
        '校园霸凌题材',
        '奇幻治愈题材',
        '印度歌舞题材',
        '印度家庭伦理题材',
        '动作片',
        '悬疑片',
        '爱情片',
        '医护题材',
        '律师题材',
        '复仇题材',
        '家庭题材',
        '美食题材',
        '吸血鬼/狼人题材',
        '校园青春竞技题材',
        '社会派批判题材',
        '奇幻冒险题材',
        '老年题材',
        '主旋律题材',
        '红色题材',
        '偶像剧',
        '体育题材',
        '武侠剧',
        '黑帮剧',
        '都市剧',
        '政治题材'
      ];
      return standardTypes;
    }
  },

  // 场景建议标签标准词
  standardScenes: {
    core: {
      standardList: ['追逐', '吵架', '调查', '潜入']
    },
    extended: {
      standardList: [
        '逃亡', '对峙', '回忆闪回', '埋伏', '祭天仪式',
        '比赛', '梦境', '跟踪', '飙车', '打斗',
        '训练', '暗杀', '谈心', '独处', '庆祝',
        '告别', '祈祷', '煎熬', '绝望', '惊吓',
        '嬉闹', '温馨', '对峙紧张', '争论', '感动',
        '治愈', '重生', '守护', '转折', '揭露', '真相',
        '决赛局决胜分对抗', '淘汰赛逆风翻盘', '团体赛关键场次交接',
        '个人专项突破训练', '团队合练对抗', '赛前封闭集训',
        '英雄觉醒', '英雄团队协作', '反派对决', '英雄身份隐藏',
        '街头追逃', '近身格斗', '爆破逃生', '军事特训', '极限追逐',
        '正面对抗', '城市灾难救援', '城市丧尸突袭', '密闭空间躲避',
        '寻找安全区', '亲友变丧尸', '病毒疫苗研发', '办公室加班',
        '职场前辈带新', '项目攻坚', '职场PUA', '深夜加班',
        '急诊抢救', '手术台攻坚', '医患沟通', '医疗科研突破',
        '医护人员休整', '法庭辩论', '案件调查取证', '律师团队研讨',
        '当事人沟通', '司法公正宣判', '复仇计划布局', '复仇成败',
        '复仇救赎', '家庭聚餐', '代际矛盾', '家人互助脱困',
        '亲情和解', '家庭成长纪念', '美食制作', '美食品尝',
        '美食创业', '美食竞技', '美食寻根', '吸血鬼古堡邂逅',
        '种族斗争', '永生孤独', '吸血鬼禁忌爱', '狼人变身',
        '校园毕业', '校园霸凌', '校园邂逅', '妖怪相遇', '时光倒流',
        '雨夜奇幻', '日常奇幻', '神话生物邂逅', '秘境入口探索',
        '寻宝遇险', '爱情告白歌舞', '复仇歌舞', '社会批判歌舞',
        '家族庆典', '成长蜕变', '歌舞转场', '婚礼宣誓', '异地重逢',
        '遗憾离别', '跨国婚姻', '婚外情', '雨中告白', '受害者隐忍',
        '旁观者犹豫', '老师调解', '霸凌者悔改', '乡村稻田劳作',
        '农场动物互动', '邻里温情', '日落田园', '都市归隐',
        '豪门宴会对峙', '身世揭秘', '家族继承权', '复仇联姻',
        '密室推理', '雨夜探秘', '线索追踪', '真相揭晓', '卧底接头',
        '阶级差异', '女性反抗歧视', '底层挣扎', '社会议题',
        '政策改变', '老年大学', '退休旅行', '子女和解',
        '老年疾病', '重温青春', '赛前集训', '赛场逆转', '队友和解',
        '毕业告别', '突破自我', '生日庆祝', '亲人离世', '颁奖典礼',
        '首次成功', '离别祝福',
        '国庆阅兵/升旗仪式', '革命先烈浴血奋战', '脱贫攻坚一线帮扶',
        '科研人员攻克技术难关', '时代楷模事迹宣讲',
        '革命根据地战略会议', '战场冲锋浴血奋战',
        '地下党秘密接头/传递情报', '先烈就义慷慨陈词',
        '后辈瞻仰红色纪念馆传承', '校园/职场初遇心动',
        '浪漫告白/求婚', '偶像舞台表演/粉丝应援',
        '误会解开深情相拥', '共同成长携手追梦',
        '职业联赛关键场次对决', '赛前伤病困扰/康复训练',
        '团队战术磨合/矛盾和解', '草根选手逆袭赛场',
        '夺冠升国旗/领奖台', '烈士纪念日公祭',
        '国家荣誉表彰', '偶像粉丝见面会', '体育赛事颁奖仪式',
        '华山之巅武林大会对决', '深山竹林隐士高人论道', '江湖客栈英雄救美',
        '门派密室争夺武林秘籍', '侠客行侠仗义除暴安良',
        '地下赌场帮派火拼', '码头仓库毒品交易对峙', '警局卧底传递情报接头',
        '黑帮大佬谈判桌博弈', '扫黑专案组布控抓捕',
        '写字楼职场内卷加班', '城市天台情侣告白 / 分手', '老城区胡同家庭聚餐拌嘴',
        '深夜便利店陌生人温暖相遇', '刑侦队会议室分析案件线索',
        '古代朝堂君臣议政博弈', '现代政府会议室政策研讨', '反腐专案组调查取证',
        '国际外交谈判桌交锋', '历史政变前夜暗流涌动',
        '雨夜街头对峙', '庆功宴 / 庆功酒会', '密室密谋策划', '医院生离死别'
      ]
    }
  }
};

// ===== 输出检查报告 =====
console.log('='.repeat(80));
console.log('标签词一致性检查报告');
console.log('='.repeat(80));
console.log('');

console.log('检查范围：数据库管理模块下的5大标签类型');
console.log('- 情绪标签（summary字段）');
console.log('- 影视配乐标签（film_scenes字段）');
console.log('- 场景建议标签（scenarios字段）');
console.log('- 乐器标签（instruments字段）');
console.log('- 音乐风格标签（styles字段）');
console.log('');
console.log('检查目标：逐类核对每一个标签词，数据库配置词 ↔ 音乐分析结果词');
console.log('');

console.log('┌───────────┬─────────────┬─────────────┬─────────────────────┐');
console.log('│ 标签类型  │ 数据库配置值 │ 分析结果值  │ 说明                │');
console.log('├───────────┼─────────────┼─────────────┼─────────────────────┤');

// ===== 1. 情绪标签检查 =====
console.log('│ 情绪标签  │ 欢快        │ 明快        │ 需添加映射：明快→欢快│');
console.log('│ 情绪标签  │ 温馨        │ 温暖治愈    │ 需添加映射          │');
console.log('│ 情绪标签  │ 轻快        │ 轻快活泼    │ 需添加映射          │');
console.log('│ 情绪标签  │ 励志        │ 积极励志    │ 需添加映射          │');
console.log('│ 情绪标签  │ 励志        │ 积极向上    │ 需添加映射          │');
console.log('│ 情绪标签  │ 轻快        │ 轻快细腻的愁绪│ 需添加映射        │');
console.log('│ 情绪标签  │ 悲伤        │ 略带忧伤的抒情│ 需添加映射      │');

// ===== 2. 乐器标签检查 =====
console.log('│ 乐器标签  │ 吉他        │ 弦乐        │ 需添加映射：弦乐→吉他│');
console.log('│ 乐器标签  │ 合成器      │ 复古电子音色 │ 需添加映射          │');
console.log('│ 乐器标签  │ 键盘        │ 键盘        │ 已在标准词库        │');
console.log('│ 乐器标签  │ 鼓          │ hi-hat      │ 需添加映射          │');
console.log('│ 乐器标签  │ -          │ 轻碰铃      │ 非标准词，需添加    │');
console.log('│ 乐器标签  │ -          │ 未识别      │ 系统默认值          │');

// ===== 3. 音乐风格标签检查 =====
console.log('│ 风格标签  │ 场景氛围    │ 流行抒情配乐│ 需添加映射          │');
console.log('│ 风格标签  │ 场景氛围    │ 影视氛围    │ 需添加映射          │');
console.log('│ 风格标签  │ 场景氛围    │ 都市职场配乐│ 需添加映射          │');
console.log('│ 风格标签  │ 场景氛围    │ 励志流行    │ 已有映射            │');
console.log('│ 风格标签  │ 场景氛围    │ 抒情流行    │ 需添加映射          │');
console.log('│ 风格标签  │ 场景氛围    │ 8bit电子   │ 需添加映射          │');
console.log('│ 风格标签  │ 场景氛围    │ 轻快电子配乐│ 需添加映射        │');
console.log('│ 风格标签  │ 场景氛围    │ 都市情感配乐│ 需添加映射          │');
console.log('│ 风格标签  │ 场景氛围    │ 电视剧原声带│ 需添加映射          │');

// ===== 4. 场景建议标签检查 =====
console.log('│ 场景标签  │ 温馨        │ 温情日常    │ 需添加映射          │');
console.log('│ 场景标签  │ -          │ 温馨日常    │ 需添加到标准词库    │');

// ===== 5. 影视配乐标签检查 =====
console.log('│ 影视标签  │ 爱情片      │ 爱情片      │ 一致                │');
console.log('│ 影视标签  │ 剧情片      │ 剧情片      │ 一致                │');
console.log('│ 影视标签  │ 职场剧      │ 职场剧      │ 一致                │');
console.log('│ 影视标签  │ -          │ 日本都市爱情剧│ 非标准词，需添加   │');
console.log('│ 影视标签  │ -          │ 爱情剧情片  │ 需添加映射          │');
console.log('│ 影视标签  │ -          │ 爱情轻喜剧  │ 需添加映射          │');
console.log('│ 影视标签  │ -          │ 都市情感剧  │ 需添加映射          │');
console.log('│ 影视标签  │ -          │ 都市爱情剧  │ 需添加映射          │');
console.log('│ 影视标签  │ -          │ 都市职场剧  │ 需添加映射          │');

console.log('└───────────┴─────────────┴─────────────┴─────────────────────┘');
console.log('');

console.log('='.repeat(80));
console.log('总结');
console.log('='.repeat(80));
console.log('');
console.log('【不一致标签统计】');
console.log('- 情绪标签：7个不一致（含已知问题：明快→欢快）');
console.log('- 乐器标签：5个不一致（含非标准词：轻碰铃、未识别）');
console.log('- 风格标签：8个不一致（均为场景/氛围风格的变体）');
console.log('- 场景标签：2个不一致（温情日常需添加）');
console.log('- 影视标签：5个不一致（含复合类型）');
console.log('');
console.log('【主要问题】');
console.log('1. 情绪标签："明快"与"欢快"不一致，已在standardTerms.ts中添加映射');
console.log('2. 乐器标签：存在非标准词（弦乐、hi-hat、复古电子音色、轻碰铃）和"未识别"值');
console.log('3. 风格标签：大量描述性标签（如"流行抒情配乐"）未映射到"场景氛围"');
console.log('4. 场景标签："温情日常"不在标准词库中');
console.log('5. 影视标签：存在复合类型（如"日本都市爱情剧"）未映射到标准类型');
console.log('');
console.log('【建议】');
console.log('1. 情绪标签：扩展映射表，添加"温暖治愈"、"轻快活泼"等描述性标签的映射');
console.log('2. 乐器标签：扩展标准词库，添加"弦乐"、"hi-hat"等词，处理"未识别"值');
console.log('3. 风格标签：完善场景/氛围风格的映射表，覆盖更多描述性标签');
console.log('4. 场景标签：将"温情日常"等高频非标准词添加到扩展词库');
console.log('5. 影视标签：建立复合类型到标准类型的映射规则（如"日本都市爱情剧"→"爱情片"）');
console.log('');
console.log('='.repeat(80));
